{"version":3,"sources":["units/units/db.js","components/CodeMirrorEditor.js","managers/KeyboardManager.js","managers/TimerManager.js","units/main.js","units/units/brand.js","units/units/bubbleBoard.js","units/units/bubbleFlow.js","units/units/bubbleGuns.js","units/units/bubbleTest.js","units/units/bubbleTypes.js","units/units/parseStringIntoComp.js","units/units/prettyScode.js","units/units/reactAssembler.js","components/MyInput.js","units/units/reactUtils.js","units/units/store.js","units/units/testDataGenerator.js","units/units/testMolds.js","units/units/testTplAssembling.js","units/units/tplObjParse.js","units/units/treeCardsBuilder.js","units/units/treeIterator.js","units/units/uids.js","units/init.js","units/index.js","FlatAnt1.js","App.js","serviceWorker.js","index.js","../../data-department/dataManager.js","logo.svg"],"names":["lodash__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","lodash__WEBPACK_IMPORTED_MODULE_0___default","n","faker__WEBPACK_IMPORTED_MODULE_1__","faker__WEBPACK_IMPORTED_MODULE_1___default","pouchdb__WEBPACK_IMPORTED_MODULE_2__","cu","window","ub","ctx","serialize","obj","_","cloneDeepWith","value","isFunction","TYPE","body","toString","deserialize","item","fn","eval","e","save","id","db","this","uid","generateUid","_id","get","then","doc","rev","_rev","put","i","catch","err","load","_this","cfg","state","nextId","prefix","init","name","PouchDB","auto_compaction","Date","getTime","Math","random","Object","create","test","result","x","y","obj2","run","def","debug","require","Component","DataManager","KeyboardManager","setup","isInitialized","$","on","evt","handleKey","setTrigger","layout","getValue","altKey","push","ctrlKey","metaKey","shiftKey","key","toLowerCase","comb","join","action","TimerManager","wallet","timers","start","delay","clearTimeout","timer","setTimeout","cancel","date","set","end","getColor","seed","hue","color","chroma","hsl","count","str","charCodeAt","getRandom","sin","floor","scale","max","pointsStar","polies","_loop","j","map","points","col","classname","round","concat","brand","getLogo","logo","console","log","bubbleBoard","addItem","getId","mergeItem","data","minStep","changed","appendTo","results","versions","isReady","undefined","completedAt","rewindTo","tb","onchanged","step","createdAt","values","items","hasChanges","slot","bubbleid","isString","charAt","substring","isObject","isMatch","version","evalItems","affected","_evalItems","isCompleteValues","evalItem","node","getNode","bubble","defaultsDeep","trails","rels","bellow","above","uses","checkIfComplete","type","tpl","val","master","evaluateflow","getVersion","bubbleFlow","fns","doubleCheck","evaluate","target","checks","check","shaddow","score","subs","total","resolved","unresolved","tplParams","defined","parameters","mold","param","model","v","targetId","opt","_setup","assign","shaft","fullPath","getFull","route","base","relPath","fetch","it","collection","cb","oldValues","info","sub","paths","stateCurrentId","currentItem","targetid","path","compile","clues","needes","provides","collections","subScore","params","undefinedCount","length","definedCount","bubbleGuns","bubbleTypes","dispatch","bubbleTest","nodeType","tplObjParse","viewAs","dataNode","reactNode","neededValues","reactAssembler","op","cues","pins","mirror","description","newItem","cloneDeep","bubbles","cache","newId","newValues","mirrorBubble","types","phase1","html","trim","nest","document","createElement","innerHTML","specs","childNodes","el","spec","_spec","nodeValue","props","attributes","attr","indexOf","replace","all","char","toUpperCase","class","className","style","_style","componentName","nodeName","children","htmlSlot","keys","forEach","child","match","reg","css","exec","phase2","attrs","_this2","payload","ops","watchAttrs","isArray","iterate","sort","a","b","stage","opValues","handleObj","childrenPath","subPath","handleProp","pin","parent","addOp","prepareAction","concatOp","_this3","split","filter","index","concatParent","parseStringIntoComp","nextUID","makestr","indent","usequouts","js_beautify","indent_size","indent_level","preserve_newlines","max_preserve_newlines","indent_inner_html","trimStart","lines","isObjectLike","isNil","beautify","prettyScode","getter","applyOps","tplid","newOps","MyInput","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onChange","bind","assertThisInitialized","setState","nextProps","text","React","customComponents","myinput","makeComponent","flattenDeep","component","error","reactUtils","tplComponent","createStore","hapi","store","tpls","parents","change","runWith","src","getItem","getSubs","registerTpl","args","cases","faker","company","catchPhrase","setter","level","generated","uuid","arrayElement","oldPayload","prepare","ret","integrate","addPayload","_case","testDataGenerator","parser","testMolds","parseTpl","renderTpl","assembleTpl","molds","iterateBubbles","shouldAssemble","isRegistered","addBubble","computedAtStep","uids","addedAtStep","inputs","salut","testTplAssembing","value_setter","content","#test","tplId","isUnparsedTpl","isList","parseHtml","_check","payload1","tplsMapping","defaultTpl","usedGlobalStyles","addSubs","nodes","card","useTemplate","skipGlobalStyle","root","globalStyle","title","getMolds","buildTpls","iterator","addGlobalStyles","gbs","styles","makeSelector","treeCardsBuilder","repo","mappings","treeIterator","mub","tests","pending","passes","shift","group","groupEnd","ctxpins","newAPI","TimerManagerBuilder","showhud","currentView","placeorder","which","flow","place","restart","parseinput","parse","select","setCombined","input","substr","editStartedAt","firstCharAt","myUB","antsDbState","getParent","actions","main","prevStep","startedAt","add","merge","getWallet","ant","placedAt","mapview","mergeRoot","markChangeOn","loader","fnsub","make","old","setupAll","makeUb","tb.db","goSetup","extra","autostart","waiting","c","onready","promise","Promise","resolve","opts","loadItems","saveItems","request_save","setupUb","getItemsToSave","promises","ant1","loadMap","startIds","related","ids","generateId","triggerChange","setRel","rel","mapView","frame","topic","entry","other","bridgeTitle","mapTitle","uistate","rows","selected","otherTpl","moldsMap","cardMold","getBody","setV","memo","cleanV","list","getBodyList","isSelected","moldName","titleMold","row","_this4","onbeforeunload","saveAll","loadAll","_this5","tosave","savings","saveitem","loaditem","onload","runOn","starter","done","bubbleitem","orderText","order","viewState","view","changeOrder","bumbAction","placeOrder","dim","height","width","barHeight","label","bubbleList","bumb","historyManager","recording","runToStart","Frame","_this6","_this7","components","FlatAnt","_this8","scode","react_default","FlatAnt1_Frame","App","FlatAnt1","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App_0","getElementById","URL","process","href","origin","addEventListener","response","contentType","headers","status","ready","unregister","reload","checkValidServiceWorker","currentStack","stacks","startStack","stack","prevStack","addInfo","skipClone","endStack","_DataManager","gettingValue","meta","loadersCache","triggers","currentVersion","dependencies","agenda","names","tasks","toStart","flags","setCtx","basePath","ctxPath","getCtx","runFn","fnName","pop","targetPath","getInfluenced","influenced","dep","skipPartialValueCheck","checkCache","partialPath","slice","partialResult","partialSlot","partialValue","makeList","listToValue","setCache","shouldUpdate","ignoreUpdates","prepareCache","contains","dependsOn","diffCache","oldCache","addDependency","remDependency","newC","oldC","updateVersionsMap","depOn","walletValue","srcPath","rootPath","_item","_i","silentSet","skipPathAffected","getAffectedPaths","postponedSteps","hasSteps","snoozeCount","getFromLoader","addLog","lhs","rhs","cachedValue","xcache","requester","force","logger","prism","loadedPrism","getFromDispatch","_value","TB","skipCache","runUtils","apply","mergeValue","oldValue","changedPaths","addPath","pauseAll","setObObj","updateVersionForAll","req_triggers","runningReqTriggers_timer","clearInterval","runningAgendaTriggers_timer","setInterval","callback","stop","requestAnimationFrame","stopFn","asyncTriggers","affected_checked","lazy_checkTriggers","req_Agenda","asyncTriggersAgenda","trigger","runTrigger","listener","token","sortAgenda","taskA","taskB","salience","source","appendToArray","setVersion","setByLoader","isLoaders","strPath","skipTrigger","markChangedPaths","checkTriggers","setUpdateFlag","runTriggers","fetchValues","onlyPaths","_path","_path2","KEY","loaders","loadersPaths","afterOp","isEmpty","currentPins","_pin","pinKey","isLoader","dest","hasVersion","updateVersion","hasLoaders","lPath","buildModel","tokens","modelName","MODEL","handleTokens","modelObj","modelSpec","_value2","newObj","setLoader","getStaticValue","getUID","getTrigger","remTrigger","listenerPath","oldTrigger","loaderPath","destination","prepareLoader","deepTransformObj","setMap","versionsTree","getVersionTree","objectDiff","oldObject","newObject","changes","oldO","newO","from","to","subChanges","act","ACT","go","toolbox","run_fetch","singlePath","SINGLEPATH","subPrefix","_subPrefix","pathOf","last_src","left","detach","detached","feed","arguments","in","module","exports","p"],"mappings":"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","file":"static/js/main.b33e11ae.chunk.js","sourcesContent":["import _ from \"lodash\"\nimport faker from \"faker\"\nimport PouchDB from \"pouchdb\"\n\nvar cu = window.cu;\n\n\nvar ub = {\n\n    ctx: {},\n\n    serialize : function( obj ) {\n        let item = _.cloneDeepWith( obj, function ( value ) {\n            if ( _.isFunction( value ) ) return { TYPE : \"FN\", body : value.toString() };\n        })\n\n        return item;\n    },\n\n    deserialize : function ( obj ) {\n        let item = _.cloneDeepWith( obj, function ( value ) {\n            if ( value && value.TYPE == \"FN\" ) {\n                let fn;\n                try  { \n                    eval( \"fn=\" + value.body )\n                } catch (e ) {\n\n                }\n                return fn;\n            } \n        })\n\n        return item;\n    },\n\n    save: function (value, id) {\n        var db = this.ctx.db;\n\n        let item = this.serialize( value );\n        if (!item.uid) item.uid = id || item.id || this.generateUid();\n        if (!item._id) item._id = item.uid;\n  \n        return db.get(item._id)\n          .then((doc) => {\n            let rev = doc.rev;\n            let _rev = doc._rev;\n\n            item.rev = rev;\n            item._rev = _rev;\n            return db.put(item).then( ( i)=> {\n            })\n          })\n          .catch(err => {\n            return db.put(item);\n          })\n\n\n\n    },\n\n\n\n    load: function (id) {\n        return this.ctx.db.get(id).catch( e => {\n            return null\n        })\n        .then ( item => {\n            if ( item ) item = this.deserialize( item );\n            return item;\n        })\n    },\n\n\n    generateUid : function ( ) {\n        this.cfg.state.nextId++;\n        return this.cfg.state.prefix + \"_\" + this.cfg.state.nextId;\n    },\n\n    init: function (name) {\n        let ctx = {\n            db: new PouchDB(name, {auto_compaction: true}),\n            state: {\n                prefix: new Date().getTime().toString() + \"_\" + Math.random().toString(),\n                nextId: 0,\n                id : \"state\"\n            }\n        }\n\n        let item = Object.create(this);\n\n        item.ctx = ctx;\n\n        item.load(\"state\").then(state => {\n            if ( state ) item.ctx.state = state\n            else item.save( item.ctx.state )\n        })\n\n        return item;\n    }\n\n}\n\nvar test = (result) => {\n    result.obj = ub.serialize( {x : function ( ) {} , y : \"test\"})\n\n    result.obj2 = ub.deserialize( result.obj );\n\n    ub.init(\"testdb\")\n}\n\n\ncu.db = {\n    //test,\n    run: function (name) {\n        return ub.init(name);\n    },\n\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","\nimport React, { Component } from 'react';\nimport { UnControlled as CodeMirror } from 'react-codemirror2'\nimport 'codemirror/lib/codemirror.css';\nrequire('codemirror/mode/javascript/javascript');\n\nclass CodeMirrorEditor extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n\n    this.changeValue = this.changeValue.bind(this);\n    this.changeCursor = this.changeCursor.bind(this);\n    this.isBlured = this.isBlured.bind(this);\n  }\n\n  changeValue(editor, data, value) {\n\n    if (!this.props || !this.props.valueChanged)\n      return;\n\n    //window.editor = editor;\n\n\n    let cursor = editor.getCursor();\n    if (data.origin != undefined) {\n      this.props.valueChanged({ scode: value, cursor: { line: cursor.line, ch: cursor.ch } });\n    }\n    else {\n      this.props.valueChanged({ scode: value })\n    }\n\n    this.setState({ caret: editor.cursorCoords(true, \"local\") })\n  }\n\n  changeCursor(editor, cursor) {\n    this.setState({ caret: editor.cursorCoords(true, \"local\") })\n\n    if (cursor.sticky == undefined) return;\n\n    if (!this.props || !this.props.valueChanged)\n      return;\n\n    this.props.valueChanged({ cursor: { line: cursor.line, ch: cursor.ch } });\n\n  }\n  isBlured() {\n    if (this.props.blured)\n      this.props.blured()\n  }\n\n  render() {\n\n    //this means that setting the value with null will delete the value from wallet ?!?\n    let text = this.props.data.scode || \"\";\n    if (!text.length) text = \"\";\n\n    let cursor = this.props.data.cursor;\n    if (!cursor || !cursor.ch) cursor = 0;\n\n    let popup;\n    let caret = this.state.caret || { right : 0, bottom : 0} \n    if (caret) {\n\n      let left = caret.right + 30;\n      let top = caret.bottom + 0;\n\n      popup = <div className=\"popup\" style={{ transform: \"translate(\" + left + \"px ,\" + top + \"px)\", zIndex: 100 }} > Salut  </div>\n    }\n    else popup = null;\n\n    let style = `\n      .popup { border : 1px solid #999; background : #bbb; padding : 10px; min-width:40px; width : 100px; transition : all 0.2s ease; }\n\n      .popup { opacity : 0.05; position : absolute;pointer-events: none;}\n    `\n    return <div style={{position:\"relative\"}}>\n      <style>{style}</style>\n      {popup}\n      <CodeMirror\n        value={text}\n\n        options={{\n          mode: 'javascript',\n          lineNumbers: true, \n          smartIndent : true,\n        }}\n\n        autoCursor={false}\n\n        cursor={cursor}\n        ///onBeforeChange={this.changeValue}\n        onChange={this.changeValue}\n        onCursor={this.changeCursor}\n        onBlur={this.isBlured}\n      />\n    </div>\n  }\n}\n\nexport default CodeMirrorEditor;","import React, { Component } from 'react';\nimport _ from \"lodash\";\nimport $ from \"jquery\";\nimport go from \"gojs\";\nimport \"../libs/dataManager\";\nvar DataManager = window.DataManager;\n\n\nvar KeyboardManager = {\n    setup: function () {\n        if (this.isInitialized) return;\n\n        $(\"body\").on(\"keydown\", (evt) => {\n            this.handleKey(evt)\n        })\n\n        DataManager.setTrigger(\"keyboardShortcuts.layout\", \"kbdManager\", {\n            run: () => {\n                this.load();\n            }\n        })\n        this.load();\n    },\n\n    load: function () {\n        let layout = DataManager.getValue(\"keyboardShortcuts.layout\");\n        this.layout = layout || {};\n    },\n\n    handleKey: function (evt) {\n        var name = [];\n        if (evt.altKey) name.push(\"alt\");\n        if (evt.ctrlKey) name.push(\"ctrl\");\n        if (evt.metaKey) name.push(\"meta\");\n        if (evt.shiftKey) name.push(\"shift\");\n\n        name.push(evt.key.toLowerCase())\n        let comb = name.join(\"+\");\n\n        if (this.layout[comb])\n            return this.run(this.layout[comb], comb)\n    },\n\n    run: function (action,comb) {\n        if (_.isFunction(action)) return action(comb, action);\n        else if (action.run)\n            return action.run(comb, action)\n    }\n}\n\nKeyboardManager.setup();\n\nexport default KeyboardManager","var TimerManager = {\n    init : function ( DataManager ) {\n      var item = Object.create( this );\n\n      item.DataManager = DataManager;\n      item.wallet = {timers : {} }\n      return item;\n    },\n    wallet: { timers: {} },\n  \n    start: function (name, action, delay) {\n      if (this.wallet.timers[name]) window.clearTimeout(this.wallet.timers[name]);\n  \n      var timer = window.setTimeout(() => {\n        this.cancel( name );\n        action(name, action, delay);\n      }, delay)\n  \n      this.wallet.timers[name] = timer;\n\n      let date = new Date();\n      this.DataManager.set(\"TimerManager.timer.\"  + name , { start : date.getTime(), end : date.getTime() + delay })\n    },\n  \n    cancel: function (name) {\n      if (this.wallet.timers[name]) window.clearTimeout(this.wallet.timers[name]);\n      delete this.wallet.timers[name]\n      this.DataManager.set(\"TimerManager.timer.\"  + name , \"\")\n\n    }\n  }\n\n  export {TimerManager};","\nvar cu = {}\n\nwindow.cu = cu;\n\nexport default cu;\n","import _ from \"lodash\"\nimport faker from \"faker\"\nimport chroma from \"chroma-js\"\nvar cu = window.cu;\n\n\n\nvar ub = {\n\n    getColor : function ( seed ) {\n\n        let hue = seed * 360;\n        let color = chroma(\"#007abc\").set(\"hsi.h\", hue).hsl();\n    \n        color[1] = color[1] * 100;\n        color[2] = color[2] * 100;\n\n        return color;\n    },\n    get : function ( seed, count)  {\n\n        var str = seed; //faker.lorem.sentence(10);\n        var seed = 0;\n        for (var i in str) {\n          seed += str.charCodeAt(i) * i\n        }\n        function getRandom() {\n          var x = Math.sin(seed++) * 10000;\n          return x - Math.floor(x);\n        }\n\n        count = Math.max( 2, Math.floor( (getRandom() * 5 )) )\n\n        \n        \n        let scale =  50 / count ;\n\n        let color = this.getColor( getRandom() );\n\n        let pointsStar = [\n            [0, 0, 0.5, 0.5, 1, 0],\n            [0, 0, 0.5, 0.5, 0, 1],\n            [1, 1, 0.5, 0.5, 0, 1],\n            [1, 1, 0.5, 0.5, 1, 0],\n        ]\n\n\n        \n        let polies = [];\n        for (var i = 0; i < count; i++) {\n          for (var j = 0; j < count; j++) {\n              let lum = 10; //points[i][j];\n              let x = i;\n              let y = j;\n              let poly = pointsStar.map((points) => {\n                let col = \"hsl( \" + color[0] + \",\" + color[1] + \"% ,\" + (color[2]) + \"%  )\";\n                let classname = Math.round( getRandom( ) * 5 );\n                polies.push(`<polygon\n                  class='poligon poligon_${classname}'\n                  points=\"` + points.join(\" \") + `\" stroke=\"transparent\" fill=\"transparent\" \n                  style=\" strokeWidth: ` + (1 / scale) + `;\n                  fill: `+ col + `;\n                  opacity : `+ getRandom() + `; \n                  transform: scale(` + scale + `) translate( ` + x + `px, ` + y + `px)\" />`)\n\n              })\n            }\n          }\n\n        return \"<svg> \" + polies.join( \"\" ) + \"</svg>\"\n\n\n    }\n}\n\nvar test = (result) => {\n    \n}\n\ncu.brand = {\n    //test,\n\n    getLogo: function (seed, scale, count) {\n        let logo=  ub.get(seed,  count );\n        console.log( logo )\n        return logo;\n    },\n    \n    def: `\n    `,\n\n    debug : {\n        ub : ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nimport { types } from \"util\";\nvar cu = window.cu;\n\nvar ub = {\n}\n\n\nvar test = (result) => {\n\n}\n\ncu.bubbleBoard = {\n    //test,\n\n    init: function () {\n    },\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nvar cu = window.cu;\n\n\n\nvar ub = {\n\n    ctx: {\n    },\n\n\n    addItem : function ( obj ) {\n        let id = this.getId();\n        obj.id = id;\n        this.mergeItem( id, obj );\n        return id;\n    },\n\n    getId : function ( ) {\n        this.ctx.data.state.nextId++;\n\n        let id = \"bubble_\" + this.ctx.data.state.nextId;\n\n        return id;\n    },\n    mergeItem: function (id, value) {\n        let ctx = this.ctx;\n        let result = ctx.data.result[id];\n\n\n        ctx.changed = {};\n\n        this.appendTo(id, value)\n\n        let minStep;\n        let results = ctx.data.result;\n        let changed = ctx.changed;\n\n        console.log( ctx.data );\n        let versions = ctx.data.versions;\n\n        for ( var i in changed ) {\n            if ( !versions[i] ) versions[i] = 0;\n            versions[i]++;\n            let result = results[ i ];\n            if ( !result ) continue;\n            if ( !result.isReady ) continue;\n            if ( minStep == undefined ) minStep = result.completedAt;\n            if ( minStep > result.completedAt ) minStep = result.completedAt;\n        }\n\n        if (minStep !== undefined) {\n            this.rewindTo(minStep)\n        }\n\n\n        if ( this.ctx.tb.onchanged)\n            this.ctx.tb.onchanged( changed )\n        \n        return minStep;\n    },\n\n    rewindTo: function (step) {\n        let ctx = this.ctx;\n        for (var id in ctx.data.result) {\n            let result = ctx.data.result[id];\n            if (result.isReady && (result.completedAt >= step || result.createdAt > step)) {\n                result.isReady = false;\n                result.completedAt = 0;\n            }\n        }\n\n        ctx.data.step = step;\n    },\n\n    appendTo: function (id, values) {\n        let ctx = this.ctx;\n        let item = ctx.data.items[id];\n        let hasChanges = false;\n\n        if (!item) {\n            ctx.data.step++;\n            ctx.data.items[id] = item = {}\n            ctx.data.result[id] = { createdAt: ctx.data.step }\n            hasChanges = true;\n        }\n\n        for (var slot in values) {\n            let value = values[slot];\n            if ( value == \"REMOVE\" && item[slot] !== undefined ) {\n                delete item[slot];\n                hasChanges = true;\n                continue;\n            }\n            if ( value === null && item[slot] !== undefined ) {\n                delete item[slot]\n                hasChanges = true;\n                continue;\n\n            }\n\n            if ( !value ) continue;\n\n            let bubbleid = item[slot] ? item[slot].id : null;\n            if (_.isString(value) && value.charAt(0) == \"#\") {\n                value = {id : value.substring(1) };\n            }\n\n            if ( value.id !== undefined) {\n                if ( value.id == \"#\"  || value.id==\"\" ) value.id = null;\n                value.id = value.id || bubbleid || this.getId();\n                item[slot] = { id: value.id };\n            }\n\n\n            if (value.id && _.isObject(value)) {\n                if ( value.id != bubbleid ) hasChanges = true;\n                this.appendTo(value.id, value)\n            }\n\n            else if ( _.isObject( value ) && !_.isMatch(item[slot], value )) {\n                hasChanges = true;\n                item[slot] = value;\n            }\n            else if ( item[slot]!=value) {\n                hasChanges = true;\n                item[slot] = value;\n            }\n\n        }\n\n        if( hasChanges ) {\n            if ( item.version ) {\n                item.version = item.version ? item.version+1 : 1;\n            }\n            this.ctx.changed[ id ] =true;\n        }\n    },\n\n    evalItems: function (count) {\n        this.ctx.affected = {};\n        this._evalItems( count );\n\n        if ( this.ctx.tb.onchanged)\n            this.ctx.tb.onchanged( this.ctx.affected )\n        \n    },\n\n    _evalItems : function ( count ) {\n\n        if (count<=0) return;\n\n        let ctx = this.ctx;\n\n        let hasChanges = false;\n\n        for (var id in ctx.data.items) {\n            let item = ctx.data.items[id];\n            let result = ctx.data.result[id];\n\n            if (result && result.isReady) continue;\n            let values = this.isCompleteValues(item, id);\n            if (values) {\n                if (!ctx.data.result[id]) ctx.data.result[id] = {};\n\n                this.evalItem(item, id, values, ctx.data.result[id]);\n                if ( ctx.data.result[id].isReady )\n                    hasChanges = true;\n            }\n        }\n\n\n        if (hasChanges) this._evalItems(count - 1);\n    },\n\n    evalItem: function (item, id, values, result) {\n        let ctx = this.ctx;\n\n        result.isReady = true;\n        result.values = values;\n\n        let node = this.ctx.tb.getNode(item, values, result, ctx);\n        if ( node ) \n            result.node = node;\n\n        if ( result.isReady ) {\n            ctx.data.step++;\n            result.completedAt = ctx.data.step;\n            this.ctx.affected[ id ] = true;\n        }\n\n    },\n\n    isCompleteValues(item) {\n        //if (!this.ctx.tb.checkIfComplete(item)) return false;\n\n        let ctx = this.ctx;\n\n        let values = {};\n\n        let bellow = [];\n\n        for (var slot in item) {\n            let value = item[slot];\n            if (value.id) {\n                let bubble = ctx.data.result[value.id];\n\n                if (!bubble || !bubble.isReady) return false;\n\n                let node = bubble.node;\n\n                if ( item[slot+\"_path\"]) {\n                    node = _.get( node, item[slot+\"_path\"] )\n                }\n\n                values[slot] = node;\n            }\n            else values[slot] = value\n        }\n\n        return values;\n    },\n\n    init: function (ctx) {\n        let item = Object.create(this);\n        item.ctx = ctx;\n\n        _.defaultsDeep(ctx, {\n            data : {\n                items : {},\n                result : {},\n                step : 1,\n                versions : {},\n                trails : {},\n                rels : {\n                    bellow : {},\n                    above  : {},\n                    uses   : {}\n                },\n\n                state : {\n                    nextId : 8\n                }\n            },  \n            tb: {\n                checkIfComplete: (item) => item.type || item.tpl || item.node,\n                getNode: (item, values, result) => { return { val: values, x: item.tpl } }\n            }\n        })\n\n        ctx.master = item; \n        return item;\n    },\n\n    evaluateflow : function () {\n        this.evalItems(5);\n    },\n\n    getVersion : function ( id ) {\n        let item = this.ctx.data.items[ id ];\n\n        if ( !item ) return null;\n        return item.version;\n    }\n}\n\nvar test = (result) => {\n    let ctx = {\n        data: {\n            items: {},\n            result: {},\n            versions : {},\n            ants : {},\n            step: 1,\n        }\n    }\n\n    let nub = ub.init(ctx);\n\n    nub.mergeItem(\"b1\", {\n        tpl: \"salut\",\n        testval: \"#\"\n    })\n\n    nub.mergeItem(\"b1\", {\n        tpl: \"salutare\",\n        testval: { x: 12, elefant: \"test\", tpl: \"test\" }\n    })\n\n    nub.evalItems(0);\n\n\n\n    nub.mergeItem(\"b1\", {\n        tpl: \"salutare\",\n        testval: { x: 12, elefant: \"test\", tpl: \"test\" }\n    })\n\n\n\n    nub.evalItems(0);\n\n\n    result.ctx = ctx;\n}\n\ncu.bubbleFlow = {\n    //test,\n\n\n    run: function (ctx) {\n        return ub.init( ctx );\n    },\n    init: function () {\n\n    },\n\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nvar cu = window.cu;\n\nvar fns = {}\n\nvar ub = {\n\n    ctx: {\n    },\n\n    doubleCheck: function (id) {\n        let tb = fns.evaluate.setup({ data: this.ctx.data, state: this.ctx.state }).target(id);\n\n        for (var i in checks)\n            tb.run(checks[i])\n    },\n\n    check: function (id) {\n        let item = this.ctx.data.items[id];\n        let result = this.ctx.data.result[id];\n        let shaddow = this.ctx.data.shaddow[id];\n\n        if (!shaddow)\n            shaddow = this.ctx.data.shaddow[id] = {}\n\n        let results = this.ctx.data.result;\n\n        let score = shaddow.score = {\n            subs: {\n                total: 0,\n                resolved: [],\n                unresolved: []\n            },\n        };\n\n        for (var slot in item) {\n            if (item[slot].id) {\n                score.subs.total++;\n\n                if (results[item[slot].id] && results[item[slot].id].isReady)\n                    score.subs.resolved.push({ slot: slot, id: item[slot].id });\n                else\n                    score.subs.unresolved.push({ slot: slot, id: item[slot].id });\n\n            }\n        }\n\n        if (result && result.values && result.values.tpl) {\n            let tpl = result.values.tpl;\n            score.tplParams = { total: 0, defined: 0, resolved: 0, unresolved: [] }\n            let parameters = tpl.mold.parameters;\n\n            for (var param in parameters) {\n                score.tplParams.total++;\n                if (result.values[param] || item[param]) {\n                    score.tplParams.defined++;\n                }\n                else {\n                    score.tplParams.unresolved.push(param)\n                }\n            }\n        }\n\n    },\n\n    setup: function (ctx) {\n        let item = Object.create(this);\n\n        item.ctx = ctx;\n\n        _.defaultsDeep(ctx, {\n            data: {\n                items: {},\n                result: {},\n                shaddow: {},\n                trails: {}\n            }\n        })\n\n        return item;\n    }\n}\n\n\n\nfns.evaluate = {\n    target: function (id) {\n\n        let model = this.model || this;\n\n        var item = Object.create(model);\n\n        item.model = model;\n\n        item.setup();\n\n        item.v.targetId = id;\n\n        return item;\n    },\n    setup: function (opt) {\n        this._setup(opt);\n        return this;\n    },\n    _setup: function (opt) {\n        if (opt) Object.assign(this, opt)\n\n        if (this.model && this.model.shaft) {\n            this.shaft = {};\n        }\n\n        this.v = { result: {} };\n    },\n    get: function (key) {\n        if (!_.isString(key)) return key;\n        let id = this.v.targetId;\n\n        let fullPath;\n        if (key == \"values\")\n            fullPath = [\"result\", this.v.targetId, \"values\"]\n        if (key == \"item\")\n            fullPath = [\"items\", this.v.targetId]\n        else\n            fullPath = [key, \"id\"];\n        return _.get(this.data, fullPath)\n    },\n\n    getFull: function (route) {\n        let base = route[0];\n        let id = route[1];\n        let relPath = route[2];\n\n        if (!base) base = \"items\";\n        if (base == \"item\") base = \"items\";\n\n        if (!id) id = this.v.targetId;\n\n        let fullPath = [base, id]\n        if (relPath) fullPath.push(relPath);\n\n        return _.get(this.data, fullPath.join(\".\"))\n    },\n    fetch: function (map) {\n        for (var i in map) {\n            this.v[i] = this.getFull(map[i])\n        }\n        return this;\n    },\n\n    it: function (collection, cb) {\n        collection = this.get(collection);\n\n        //let subTb = Object.create( this );\n        //subTb.v  = Object.create( this.v )\n\n        //prepare\n        let subTb = this;\n        let oldValues = {\n            slot: subTb.v.slot,\n            value: subTb.v.value,\n            info: subTb.v.info,\n            sub: subTb.v.sub\n        }\n        subTb.v.slot = null;\n        subTb.v.value = null;\n        subTb.v.info = null;\n        subTb.v.sub = null;\n        for (var i in collection) {\n            subTb.v.slot = i;\n            subTb.v.value = collection[i];\n            subTb.v.info = i;\n            subTb.v.sub = {};\n            cb(subTb, subTb.v)\n        }\n\n        //cleanup\n        for (var i in oldValues)\n            subTb[i] = oldValues[i]\n\n    },\n\n    run: function (cb) {\n        try {\n            let result = cb(this, this.v)\n        } catch (e) {\n            if (e && e.type == \"notApplicable\") {\n                return;\n            }\n            console.log(e)\n        }\n\n        if (this.v.result) {\n\n            if (!this.data.trails[this.v.targetId]) {\n                this.data.trails[this.v.targetId] = {};\n            }\n            Object.assign(this.data.trails[this.v.targetId], this.v.result)\n        }\n    },\n\n    result: function (name, value) {\n        this.v.result[name] = value;\n    },\n\n    check: function (paths) {\n        for (var i in paths) {\n            let path = paths[i];\n\n            if (path == \"isCurrentItem\") {\n                let stateCurrentId = this.state.currentItem.targetid;\n                if (!stateCurrentId || this.v.targetId != stateCurrentId)\n                    throw { type: \"notApplicable\", path: paths[i] }\n            }\n            else {\n                let value = _.get(this.v, paths[i]);\n                if (value === undefined) throw { type: \"notApplicable\", path: paths[i] }\n            }\n        }\n    }\n}\n\nfns.compile = Object.assign({}, fns.evaluate, {\n    setup: function (opt) {\n        this._setup(opt);\n\n        this.clues = {\n            needes: {},\n            provides: {},\n            collections: []\n        }\n\n        return this;\n    },\n    fetch: function (map) {\n        for (var i in map) {\n            this.clues.needes[i] = { key: map[i] }\n            this.v[i] = { test: \"test\" }\n        }\n        return this;\n    },\n\n\n    check: function (check) {\n\n    },\n\n    result: function (name, value) {\n        this.clues.provides[name] = value;\n    },\n\n    it: function (collection, cb) {\n        this.clues.collections.push(collection)\n    },\n\n    run: function (cb) {\n        let result = cb(this, this.v);\n    }\n});\n\n\nvar checks = [\n\n    (tb, v) => {\n\n        tb.fetch({\n            item: [\"item\"]\n        })\n\n        v.score = {\n            total: 0,\n            resolved: [],\n            unresolved: []\n        }\n\n        tb.it(v.item, (tb, v) => {\n            let sub = v.value;\n            if (!sub.id) return;\n\n            v.score.total++;\n\n            let result = tb.getFull([\"result\", sub.id]);\n\n            if (!result || !result.isReady) v.score.unresolved.push(sub.id)\n            else v.score.resolved.push(sub.id)\n        })\n\n        tb.result(\"subScore\", v.score)\n        return { subScore: v.score }\n    },\n\n\n\n    (tb, v) => {\n\n        tb.fetch({\n            values: [\"result\", \"\", \"values\"],\n            item: [\"item\"],\n            parameters: [\"result\", \"\", \"values.tpl.mold.parameters\"]\n        })\n\n        tb.check([\n            \"values.tpl\"\n        ])\n\n        v.score = { total: 0, defined: 0, undefined: [] }\n        v.params = {};\n        tb.it(v.parameters, (tb, v) => {\n            let param = v.slot;\n            v.params[param] = true;\n            v.score.total++;\n            if (!v.item[param] && !v.values[param])\n                v.score.undefined.push(param)\n        })\n\n        tb.it(v.parameters, (tb, v) => {\n            let param = v.slot;\n            v.params[param] = true;\n        })\n\n\n        v.score.undefinedCount = v.score.undefined.length;\n        v.score.definedCount = v.score.total - v.score.undefinedCount;\n\n        tb.result(\"tplParamsScore\", v.score);\n        tb.result(\"tplParams\", v.params)\n    },\n\n\n\n    (tb, v) => {\n\n        tb.fetch(  {\n            trails : [\"trails\"],\n\n        })\n        tb.check([\n            \"isCurrentItem\"\n        ])\n\n        console.log(\"trails is currentItem\", v.trails);\n    }\n\n]\n\nvar test = (result) => {\n\n    ub.ctx.data = {\n        items: {\n            bubble1: {\n                slot1: \"salut\",\n                slot2: { id: \"bubble2\" }\n            },\n            bubble2: {\n                test: \"salut\"\n            }\n        },\n        result: {},\n        trails: {}\n    }\n\n    let tb = fns.evaluate.target(\"bubble1\");\n\n    tb.run(checks[0]);\n    tb.run(checks[1]);\n\n    result.tb = tb.v.result;\n    result.trails = ub.ctx.data.trails;\n}\n\ncu.bubbleGuns = {\n    //test,\n\n    setup: function (ctx) {\n        return ub.setup(ctx);\n    },\n    init: function () {\n\n    },\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nimport { types } from \"util\";\nvar cu = window.cu;\n\nvar ub = {\n    ctx: {\n        tb: {\n\n            onchanged: function (changed) { },\n            getNode: function (item, values, result, ctx) {\n                return cu.bubbleTypes.dispatch.getNode(item, values, result, ctx)\n            }\n        },\n\n        data: {\n            state: {\n                nextId: 0\n            }\n        }\n    }\n}\n\n\nvar test = (result) => {\n    ub.ctx.data = { state: { nextId: 0 } };\n    ub.ctx.tb.guns = cu.bubbleGuns.setup(ub.ctx);\n    ub.ctx.tb.flow = cu.bubbleFlow.run(ub.ctx)\n\n    ub.ctx.tb.flow.mergeItem(\"item1\", {\n        id: \"item1\",\n        tpl: {\n            id: \"item2\",\n            type: \"tpl\",\n            main: \"<div style='border:1px solid #007abc'>{h1} {salut} {someothervalue}</div>\"\n        },\n        tpl_path: \"main\",\n        h1: \"noh\",\n        salut: {\n            id: \"item3\",\n            tpl: {\n                id: \"item4\",\n                type: \"tpl\",\n                main: \"<div style='border:1px solid #007abc'>{text}</div>\"\n            },\n            tpl_path: \"main\",\n            text: \"salutare\"\n        }\n    });\n\n\n    ub.ctx.tb.flow.mergeItem(\"item5\", {\n        id: \"item5\",\n        type: \"mirror\",\n        model: \"item1\",\n        data: {\n            id: \"item6\",\n            version: 1,\n            node: {\n                h1: \"hh1\",\n                salut: {\n                    text: \"hey\"\n                }\n            }\n        }\n    })\n\n\n\n    ub.ctx.tb.flow.evaluateflow();\n\n    ub.ctx.tb.flow.mergeItem(\"item6\", {\n        node: {\n            h1: \"hh11\",\n            salut: {\n                text: \"testchanged\"\n            }\n        }\n    })\n\n    ub.ctx.tb.flow.evaluateflow();\n\n\n    result.items = ub.ctx.data.items;\n    result.result = ub.ctx.data.result;\n    result.shaddow = ub.ctx.data.shaddow;\n    //result.item6_1 = ub.ctx.data.result.item5.mirror.node.children[0][0];\n    //result.item6_2 = ub.ctx.data.result.item5.mirror.node.children[0][2].children\n}\n\ncu.bubbleTest = {\n    //test,\n\n    init: function () {\n    },\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nimport { types } from \"util\";\nvar cu = window.cu;\n\nvar type = {}\n\n\ntype.dispatch = {\n    getNode: function (item, values, result, ctx) {\n        let nodeType = values.type;\n        if (!nodeType) {\n            if (values.tpl) nodeType = \"reactNode\"\n\n            else if (values.node) nodeType = \"dataNode\"\n        }\n\n        if (nodeType && type[nodeType]) {\n            return type[nodeType].getNode(item, values, result, ctx)\n        }\n        else result.isReady = false;\n    }\n}\n\ntype.tpl = {\n    getNode: function (item, values, result, ctx) {\n        delete values.type;\n        let tpl = cu.tplObjParse.run(values);\n        result.viewAs = \"object\";\n        return tpl;\n    }\n}\n\ntype.dataNode = {\n    getNode: function (item, values, result, ctx) {\n        return item.node;\n    }\n}\n\ntype.reactNode = {\n    getNode: function (item, values, result, ctx) {\n\n        let tpl = values.tpl;\n        if (!tpl || !tpl.mold) {\n            result.isReady = false;\n            return;\n        }\n\n        let neededValues = [];\n        let node = cu.reactAssembler.run(tpl, values, (data, path, op) => {\n            let value = _.get(data, path);\n            if (value !== undefined) return value;\n            neededValues.push(path);\n            return \"dummyvalue\"\n        });\n\n        if (neededValues.length) {\n            node = [neededValues, node];\n        }\n        result.viewAs = \"reactComponent\"\n\n        result.cues = { pins: tpl.mold.pins }\n\n        return node;\n\n    }\n\n}\n\ntype.mirror = {\n\n    description: \"\",\n\n\n    getNode: function (item, values, result, ctx) {\n\n\n        let model = ctx.data.items[item.model];\n        let data = values.data;\n\n        let newItem = _.cloneDeep(model);\n\n        if (!result.bubbles) result.bubbles = {};\n        if (!result.cache) result.cache = { data: {} };\n\n        if (!_.isMatch(result.cache.data, data)) {\n            result.cache.data = data;\n\n            for (var i in newItem) {\n                if (i != \"tpl\" && newItem[i].id && data[i]) {\n                    if (result.bubbles[i]) {\n                        ctx.master.mergeItem(result.bubbles[i].id, { data: data[i] })\n                    }\n                }\n            }\n        }\n\n        for (var i in newItem) {\n            if (i != \"tpl\" && newItem[i].id && data[i]) {\n\n                if (result.bubbles[i]) {\n                    newItem[i] = { id: result.bubbles[i].id }\n                }\n                else {\n                    let newId = ctx.master.addItem({ type: \"mirror\", data: data[i], model: newItem[i].id })\n                    result.bubbles[i] = { id: newId, model: newItem[i].id };\n                }\n\n                newItem[i] = { id: result.bubbles[i].id }\n            }\n            else if (data[i]) {\n                newItem[i] = data[i]\n            }\n        }\n\n        newItem.id = item.id;\n\n        let newValues = ctx.master.isCompleteValues(newItem);\n\n        if (!newValues) {\n            result.isReady = false;\n            return;\n        }\n\n        result.mirror = {};\n        ctx.master.evalItem(item, item.id, newValues, result.mirror)\n        if (result.mirror.viewAs) result.viewAs = result.mirror.viewAs;\n        return result.mirror.node;\n    }\n}\n\nvar ub = {\n}\n\n\nvar test = (result) => {\n\n}\n\ncu.bubbleTypes = {\n    //test,\n\n    mirror: type.mirrorBubble,\n\n    types: type,\n    dispatch: type.dispatch,\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","import _ from \"lodash\"\nvar cu = window.cu;\n\n\nvar phase1 = {\n\n    run: function (html) {\n        html = html.trim();\n\n        let nest = document.createElement('div');\n        nest.innerHTML = html;\n\n        let specs = [];\n\n        for (var i = 0; i < nest.childNodes.length; i++) {\n            let el = nest.childNodes[i];\n\n            let spec = this._spec(el);\n\n            specs.push(spec);\n        }\n\n        return specs.length == 1 ? specs[0] : specs;\n    },\n\n\n    _spec: function (el) {\n\n        if (el.nodeType == 3) {\n            return el.nodeValue\n        }\n\n        let props = {};\n        for (var i = 0; i < el.attributes.length; i++) {\n            let attr = el.attributes[i];\n            let name = attr.name;\n            if (name.indexOf(\"_\") != -1) {\n                name = name.replace(/\\_(.)/g, (all, char) => { return char.toUpperCase() })\n            }\n            props[name] = attr.value;\n        }\n\n        if (props.class) {\n            props.className = props.class;\n            delete props.class;\n        }\n\n        if (props.style) {\n            props.style = this._style(props.style);\n        }\n\n\n        let spec = {\n          type: \"node\",\n          componentName: el.nodeName.toLowerCase(),\n          props: props,\n          children: null,\n      };\n\n        if ( props.htmlSlot ) {\n          props[ props.htmlSlot ] = el.innerHTML;\n          return spec;\n        }\n\n        if (Object.keys(props) == 0) props = null;\n\n        let children = []\n        el.childNodes.forEach(child => {\n            children.push(this._spec(child))\n        })\n        if (children.length == 0) children = null;\n        spec.children = children;\n\n        return spec;\n    },\n\n    _style: function (str) {\n        str = str + \";\";\n        let reg = /\\s*([^:\\s]+)\\s*\\:\\s*([^;]+)\\s*\\;+/g\n        let css = {};\n        let match;\n        while (match = reg.exec(str)) {\n            css[match[1]] = match[2]\n        }\n\n        return css;\n    },\n\n}\n\nvar phase2 = {\n    run: function (obj , attrs ) {\n      let payload = {\n        ops: [],\n        pins: {},\n        parameters : {},\n        attrs : {},\n        watchAttrs : attrs || []\n      }\n  \n      if ( _.isArray( obj ) )\n        payload.tpl = obj.map(( obj, i)  => this.iterate(obj, [i], payload) )\n      else \n        payload.tpl = this.iterate(obj, [], payload)\n\n      payload.ops.sort ( (a,b) => a.stage - b.stage )\n  \n      return { ops: payload.ops, tpl: payload.tpl, pins : payload.pins , parameters : payload.parameters, attrs : payload.attrs}\n    },\n    iterate: function (obj, path, payload) {\n      if (!obj) return;\n  \n      if (_.isString(obj)) {\n        return this.opValues(obj, path, payload, false);\n      }\n  \n      obj = this.handleObj(obj, path, payload);\n  \n      let childrenPath = path.concat([\"children\"])\n      for (var i in obj.children) {\n        obj.children[i] = this.iterate(obj.children[i], childrenPath.concat(i), payload)\n      }\n  \n      let subPath = path.concat([\"props\"])\n      for (var i in obj.props) {\n        if (i == \"style\") continue;\n        obj.props[i] = this.handleProp(obj.props[i], subPath.concat(i), obj, payload)\n      }\n  \n      if (obj.props && obj.props.style) {\n        let subPath = path.concat([\"props\", \"style\"])\n        for (var i in obj.props.style) {\n          obj.props.style[i] = this.handleProp(obj.props.style[i], subPath.concat(i), obj, payload)\n        }\n      }\n  \n      if (obj.props && obj.props.pin) {\n        payload.pins[ obj.props.pin ] = path;\n      }\n\n      if (obj.props && obj.props.id) {\n        payload.pins[ obj.props.id ] = path;\n      }\n\n      if ( obj.props )\n        payload.watchAttrs.forEach( attr => {\n            if ( !obj.props[attr] ) return ;\n            if ( !payload.attrs[attr] ) payload.attrs[ attr ] = [];\n            payload.attrs[ attr ].push({  path, value : obj.props[attr] } );\n        })\n  \n      return obj;\n    },\n  \n    handleObj: function (obj, path) {\n      return obj;\n    },\n  \n    handleProp: function (obj, path, parent, payload) {\n      if (!_.isString(obj)) return obj;\n  \n      return this.opValues(obj, path, payload, true)\n    },\n    addOp: function (payload, path, op) {\n\n        if ( !op.stage ) op.stage = 0;\n      payload.parameters[ op.action ] = op.path;\n      payload.ops.push(op)\n    },\n  \n    prepareAction: function (item) {\n      return item;\n    },\n    opValues: function (value, path, payload, concatOp) {\n      if (!_.isString(value)) return value;\n      if (value.indexOf(\"{\") == -1) return value;\n  \n      let ops = payload.ops;\n      let values = value.split(/(\\{[^}\\n\\:\\;]+)\\}/g);\n      values = values.map((item, i) => {\n        if (item == \"\") return null\n        if (item.charAt(0) !== \"{\") return item;\n  \n        item = item.substring(1);\n        let action = this.prepareAction(item)\n        return { type: \"value\", action: action };\n      })\n        .filter(item => item)\n  \n  \n      if (values.length == 0) return null;\n      else if (values.length == 1) {\n        values = values[0];\n        if (values.type) {\n          values.path = path;\n        }\n        if ( _.isObject( values ))\n          this.addOp(payload, values.path, values)\n        return values;\n      }\n      else if (!concatOp) {\n        values = values.map((item, i) => {\n          if (item.type) {\n            item.path = path.concat(i);\n            item.index = i;\n            item.stage = 0;\n            this.addOp(payload, path, item);\n  \n            return item;\n          }\n          else return item;\n        })\n        return values;\n      }\n      else {\n        values = values.map((item, i) => {\n          if (item.type) {\n            item.path = path.concat(i);\n            item.index = i;\n            item.concatParent = true;\n            item.stage = 0;\n\n            this.addOp(payload, path, item);\n            return item;\n          }\n          else return item;\n        })\n        this.addOp(payload, path, { path: path, type: \"concat\", ops: values, stage : 1 });\n        return values;\n      }\n  \n    }\n  \n  }\n\n\nvar ub = {\n    run : function ( html , attrs ) {\n        var result = phase1.run( html );\n        result = phase2.run( result, attrs );\n\n        return result;\n    }\n}\n\nvar test = (result) => {\n    result.output = ub.run( \"<div>Salut {#test} </div>\");\n}\n\ncu.parseStringIntoComp = {    \n    //test,\n\n    run: function (obj, attrs ) {\n        return ub.run(obj, attrs )\n    },\n    def: `\n        @obj string \n        transform it into componentsObjects\n    `\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nimport js_beautify from \"js-beautify\"\nvar cu = window.cu;\n\n\n\nvar ub = {\n\n    ctx: {\n        nextUID : 0\n    },\n\n    run : function (name ) {\n        return (name || \"uid\" ) +\"_\"+ this.ctx.nextUID++;\n    },\n\n\n    makestr : function ( obj, indent ) {\n        if ( _.isFunction( obj ) ) return obj.toString();\n        if ( _.isString( obj ) ) {\n \n            let usequouts = '\"';\n            if ( obj.indexOf( \"\\n\") != -1 ) usequouts = \"`\";\n            if ( obj.indexOf('\"') != -1 ) usequouts = \"`\";\n            \n            if (usequouts == \"`\") {\n                obj = js_beautify.html( obj, { \n                    indent_size : 2,\n                    indent_level : indent + 1,\n                    preserve_newlines : true,\n                    max_preserve_newlines : 0,\n                    indent_inner_html: true,\n                } )\n\n                obj = obj.trimStart();\n            }\n            return usequouts + obj + usequouts\n        }\n        if ( _.isArray(obj)) {\n            let lines = [];\n            for ( var i in obj ) {\n                let value = this.makestr( obj[i] , indent + 1);\n\n                lines.push( value)\n            }\n\n            return \"[\" + lines.join(\",\\n\") + \"]\";\n        }\n\n        if ( _.isObjectLike(obj)) {\n            let lines = [];\n            let multiLine = false;\n            for ( var i in obj ) {\n                let slot = i;\n                let value = this.makestr( obj[i], indent + 1 );\n\n                if ( !slot.match( /^[a-z0-9$_]+$/) ) slot = '\"' + slot + '\"'\n\n                if ( value.indexOf(\"\\n\") != -1 ) multiLine = false;\n                lines.push( slot + \":\" + value )\n            }\n\n            return \"{\" + lines.join(\",\") + \"}\"\n        }\n        \n        if ( _.isNil( obj )) return \"null\"\n\n        return obj.toString();\n    },\n\n    beautify : function ( str ) {\n        return js_beautify.js_beautify( str, {\n            indent_size :2 ,\n            indent_level : -1, \n            max_preserve_newlines : 1,\n            preserve_newlines : true\n        } )\n    }\n}\n\nvar test = (result) => {\n\n    var obj = {\n        tpl : `<div>s\nce mai faci <span>\nsdf</span>\n        alut</div>`,\n        fn : function ( ) {\n\n        },\n        \"#b ce mai faci\" : \"\",\n        x : {\n            \"test\" : \"salut\" \n        }\n    }\n\n    result.str = ub.makestr( obj ,10 )\n    result.beuaty = js_beautify.js_beautify( result.str, {\n        indent_size :2 ,\n        indent_level : -1, \n        max_preserve_newlines : 1,\n        preserve_newlines : true\n    } )\n}\n\ncu.prettyScode = {\n    //test,\n\n    run: function (name) {\n        let str =  ub.makestr(name, 1)\n        return ub.beautify( str );\n    },\n    \n    def: `\n    `,\n\n    debug : {\n        ub : ub\n    }\n}","import _ from \"lodash\"\nvar cu = window.cu;\n\n\nvar ub = {\n\n    ctx: {\n        tb: {}\n    },\n\n    run: function (model, data, getter ) {\n        model = _.cloneDeep( model );\n        let obj = model.mold.tpl;\n\n        this.applyOps( model.mold.ops, obj , data,  getter );\n\n\n        if ( obj.props ) \n            obj.props.tplid = model.uid;\n        \n\n        return obj;\n    },\n\n    applyOps : function ( ops, obj, data, getter ) {\n        let get = getter || _.get;\n\n        let newOps = [];\n        for (var i = 0; i < ops.length; i++) {\n\n            let op = ops[i];\n\n            if (op.type == \"value\") {\n                let value = get(data, op.action, op, newOps);\n                _.set(obj, op.path, value)\n            }\n            else if (op.type == \"computedValue\") {\n                let value = op.value;\n                _.set(obj, op.path, value)\n            }\n            else if (op.type == \"concat\") {\n                let value = get(obj, op.path, op, newOps).join(\"\");\n                _.set(obj, op.path, value)\n            }\n        }\n\n        if ( newOps.length ) \n            this.applyOps( newOps, obj, data, getter )\n    },\n\n\n}\n\n\nvar inputs = {\n    data: {\n        \"#color\": 12,\n        \"#handle\": \"handle\",\n        \"#test2\": \"test2\",\n        \"#test1\": \"test1\",\n        \"#title\": \"title it is\",\n    }\n}\n\nvar test = (result) => {\n\n    let mold = cu.tests.get(\"mold.x\");\n\n    if (!mold) return \"pending\";\n\n    let value = ub.run(mold, inputs.data);\n\n    result.value = value;\n    result.mold = mold;\n\n    cu.tests.pin( \"reactTree\", value)\n\n    //result.mold = value;\n}\n\ncu.reactAssembler = {\n    //test,\n\n    run: function (mold, data, getter) {\n        return ub.run(mold, data, getter)\n    },\n\n    init: function () {\n    },\n\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","\nimport React, { Component } from 'react';\n\nclass MyInput extends Component {\n\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        value : \"\"\n      }\n\n      this.onChange = this.onChange.bind( this );\n    }\n\n    onChange ( evt ) {\n      this.setState( {value : evt.target.value});\n\n      if ( this.props.onChange ) this.props.onChange( evt );\n    }\n  \n\n    componentWillReceiveProps(nextProps) {\n      if ( nextProps.value!==undefined && nextProps.value.text!==undefined) this.setState({value : nextProps.value.text})\n    }\n\n    render () {\n\n      let props = Object.assign({}, this.props, {value : this.state.value, onChange : this.onChange })\n      \n      return React.createElement(\"input\", props, null);\n    }\n  }\n\n  export default MyInput;","import _ from \"lodash\"\nimport faker from \"faker\"\nimport React, { Component } from 'react';\nimport MyInput from \"../../components/MyInput\"\nvar cu = window.cu;\n\n\nvar customComponents = {\n  myinput : MyInput\n}\n\n\nvar ub = {\n\n    makeComponent : function (obj, i ) {\n        if (!obj) return null;\n        if (_.isString(obj)) return obj;\n        if (_.isArray(obj)) return obj.map((obj, i) => this.makeComponent(obj, i))\n        if ( !obj.componentName) return null;\n    \n        let children = null;\n        if (obj.children) children = obj.children.map((obj, i) => this.makeComponent(obj, i));\n    \n        let props = null;\n        if (obj.props) props = _.cloneDeep(obj.props);\n    \n        if (props && !props.key) props.key = i;\n        if (!props) props = { key: i }\n    \n        if (obj.componentName == \"style\") {\n          children = [_.flattenDeep(children).join(\"\")]\n        }\n    \n        let component = obj.componentName;\n        if (customComponents[component]) component = customComponents[component];\n    \n        var node;\n        try {\n          node = React.createElement(component, props, children)\n        } catch (e) {\n          console.error(e)\n          node = \"error\"\n        }\n        return node;\n        },\n\n}\n\nvar test = (result) => {\n}\n\ncu.reactUtils = {\n    //test,\n\n    makeComponent: function (tplComponent) {\n        return ub.makeComponent(tplComponent, 1)\n    },\n    \n    def: `\n    `,\n\n    debug : {\n        ub : ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nimport $ from \"jquery\"\nvar cu = window.cu;\n\n\n\nvar ub = {\n\n    ctx: {\n        nextUID : 0\n    },\n\n    createStore : function ( tb, hapi, fns  ) {\n        if ( tb.cache.store ) return tb.cache.store;\n\n        let tpls = {\n          changeValueTpl : ( path ) =>  {\n            return function ( evt ) {\n              let value = evt.target.value;\n              hapi.set( path, value )\n            }\n          }, \n          runActionTpl : ( action ) => {\n            return function ( evt ) {\n              if ( hapi[action] ) return hapi[action]( evt );\n            }\n          },\n          runWithActionTpl : ( action ) => {\n            return function ( evt ) {\n                let target = evt.target;\n                let attr = $(target).attr( action[1])\n                if ( attr === undefined ) {\n                    target = $(target).parents(\"[\" + action[1] + \"]\")\n                    attr = $(target[0]).attr( action[1])\n\n                }\n\n              if ( hapi[action[0]] ) return hapi[action[0]]( attr, evt );\n            }\n          }\n\n        }\n\n\n        let store = {}\n  \n        for ( var i in fns.change ) {\n          store[i]  = tpls.changeValueTpl( fns.change[ i ])\n        }\n  \n  \n        for ( var i in fns.run ) {\n            store[i]  = tpls.runActionTpl( fns.run[ i ])\n          }\n\n          \n            \n        for ( var i in fns.runWith ) {\n            store[i]  = tpls.runWithActionTpl( fns.runWith[ i ])\n          }\n  \n        tb.cache.store = store;\n        return store;\n      }\n\n}\n\nvar test = (result) => {\n}\n\ncu.store = {\n    //test,\n\n    run: function (name) {\n        return ub.run(name);\n    },\n    get : function ( tb, hapi,  fns ) {\n        return ub.createStore( tb, hapi, fns )\n    },\n    \n    def: `\n    `,\n\n    debug : {\n        ub : ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nvar cu = window.cu;\n\n\n\nvar ub = {\n\n    ctx: {\n        payload: {\n            data: {\n\n                items: {},\n                subs: {},\n            },\n\n            src: {\n                getItem: function (id) {\n\n                },\n\n                getSubs: function (id) {\n\n                }\n            },\n\n            tpls: [],\n            registerTpl: function (args, master) {\n                this.tpls.push(args.path);\n            },\n\n            cases: [\n                result => {\n                    let isApplicable = !result.obj.item;\n\n                    if (!isApplicable) return;\n\n                    let id = result.obj.id;\n                    let item = ub.ctx.payload.data.items[id]\n\n                    if (!item) {\n                        item = {\n                            text: faker.company.catchPhrase(),\n                            id: id\n                        }\n\n                        if (ub.ctx.payload.setter)\n                            ub.ctx.payload.setter([\"items\", id], _.cloneDeep(item) )\n                    }\n\n\n                    result.obj.item = item;\n                    return \"applied\";\n                },\n\n                result => {\n                    let isApplicable = !result.obj.subs && result.obj.item && result.obj.level < 4;\n                    if (!isApplicable) return;\n\n                    let obj = result.obj;\n\n                    let id = result.obj.id;\n\n                    let subs = ub.ctx.payload.data.subs[id];\n\n                    if (!subs && !ub.ctx.payload.generated) {\n                        subs = {};\n\n                        let count = 4;\n                        for (var i = 0; i < count; i++) {\n                            let id = faker.random.uuid();\n                            let tpl = null;\n                            if (obj.level == 1) tpl = faker.random.arrayElement([null, \"columns\"]);\n                            let sub = {\n                                id: id,\n                                level: result.obj.level + 1,\n                                tpl: tpl\n                            }\n\n                            subs[id] = sub;\n                        }\n\n                        if (ub.ctx.payload.setter)\n                            ub.ctx.payload.setter([\"subs\", id], _.cloneDeep( subs ) )\n\n                    }\n\n                    if ( !subs ) subs = {}\n\n                    result.obj.subs = subs;\n                    result.subs = subs;\n\n                    return \"applied\";\n                }\n            ]\n        },\n\n        tb: {\n            //parseHtml: cu.parseStringIntoComp\n        }\n    },\n\n    run: function (obj, attrs) {\n        let oldPayload = this.ctx.payload;\n\n        this.ctx.payload.attrs = attrs || [];\n\n        let mold = this.it(obj, []);\n\n        this.ctx.payload = oldPayload;\n\n        return mold;\n    },\n\n\n    it: function (obj, path) {\n        let oldPayload = null;\n        let result = {\n            oldPayload: null,\n\n            obj: obj,\n            sub: obj,\n\n            master: this,\n            path: path,\n            values: {},\n            ops: []\n        }\n\n        this.prepare(result);\n\n        for (var i in result.subs) {\n            let ret = this.it(result.subs[i], path.concat([i]));\n            result.values[i] = ret;\n        }\n\n        return this.integrate(result)\n    },\n\n    addPayload: function (result, obj) {\n        if (!result.oldPayload) {\n            result.oldPayload = this.ctx.payload;\n            this.ctx.payload = Object.create(this.ctx.payload);\n        }\n        Object.assign(this.ctx.payload, obj);\n    },\n\n    prepare: function (result) {\n\n        let cases = this.ctx.payload.cases;\n\n        let hasChanges = true;\n        let applied = false;\n        let count = 0;\n        while (hasChanges && count < 5) {\n            hasChanges = false;\n            count++;\n            for (var i in cases) {\n                let _case = cases[i];\n                let ret = _case(result);\n                if (ret == \"applied\") {\n                    hasChanges = true;\n                    applied = true;\n                    break;\n                }\n            }\n        }\n    },\n\n    integrate: function (result) {\n        if (result.ops.length) {\n            for (var i in result.ops) {\n                let op = result.ops[i];\n                this.ctx.payload[op.name](op.args, this)\n            }\n        };\n\n        if (result.oldPayload) this.ctx.payload = result.oldPayload;\n\n        return result.obj;\n    }\n}\n\nvar inputs = {\n    items: { level: 0 },\n    subs: {},\n}\nvar test = (result) => {\n    let value = ub.run(inputs.items);\n\n    result.x = value;\n\n\n    cu.tests.pin(\"testRepo\", value)\n    //result.mold = value;\n}\n\ncu.testDataGenerator = {\n    //test,\n\n    run: function (id, data, generated,  setter) {\n\n        ub.ctx.payload.data = data;\n        ub.ctx.payload.setter = setter;\n        ub.ctx.payload.generated = generated;\n\n        return ub.run({ id: id || \"root\", level: 0 }, [])\n    },\n\n    init: function () {\n        ub.ctx.tb.parser = cu.tplObjParse;\n        ub.ctx.tb.reactAssembler = cu.reactAssembler;\n    },\n\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","import _ from \"lodash\"\nvar cu = window.cu;\n\n\nvar ub = {\n\n    ctx: {\n        tb : {}\n    },\n\n    run : function ( str ) {\n        let mold = str;\n        mold = this.ctx.tb.parser.run( mold , [\"comp\"] );\n\n        return mold;\n    },\n\n\n}\n\n\nvar inputs = {\n    tplTree : {\n        x : `<div> <div id='title' comp='salut' class='{#test1} {#test2}' style='color : {#color}'> {#handle} : {#title}\n        \n        \n            <style>\n                @input \n                .column  { x : 12; background : {styleforred}red;}\n            </style>\n        </div> `\n    }\n}\nvar test = (result) => {\n    let value = ub.run( inputs.tplTree);\n\n    result.x = value.x.mold;\n\n    cu.tests.pin( \"mold\", value)\n    //result.mold = value;\n}\n\ncu.testMolds = {\n    //test,\n\n    run: function (obj) {\n        return ub.run(obj, [])\n    },\n\n    init : function ( ) {\n        ub.ctx.tb.parser = cu.tplObjParse;\n        ub.ctx.tb.reactAssembler = cu.reactAssembler;\n    },\n    \n    def: `\n    `,\n\n    debug : {\n        ub : ub\n    }\n}","import _ from \"lodash\"\nimport $ from \"jquery\"\n\nvar cu = window.cu;\n\n\nvar ub = {\n\n    ctx: {\n        tb: {},\n\n        wallet: {}\n    },\n\n    run: function (str) {\n        let mold = str;\n        mold = this.ctx.tb.parser.run(mold, [\"comp\"]);\n\n        return mold;\n    },\n\n    parseTpl: function (obj) {\n        let mold = this.ctx.tb.parser.run(obj, [\"comp\"]);\n        return mold;\n    },\n\n    renderTpl: function (mold, data, getter) {\n        return this.ctx.tb.reactAssembler.run(mold, data, getter)\n    },\n\n    assembleTpl: function (mold, data) {\n        if (_.isString(mold)) mold = _.get(this.ctx.payload.molds, mold);\n        return this.ctx.tb.reactAssembler.run(mold, data, (data, path) => {\n            let value = _.get( data, path );\n            if ( value.node ) return value.node;\n            return value;\n        })\n    },\n\n\n    iterateBubbles: function (bubbles, count ) {\n        if ( count == undefined ) count = 0;\n\n        if ( count && count > 5 ) return;\n\n        bubbles = bubbles || this.ctx.payload.bubbles;\n\n        let changed = false;\n        for (var i = 0; i< bubbles.length; i++ ) {\n            let bubble = bubbles[i];\n\n            if ( bubble.isReady ) continue;\n\n\n            let shouldAssemble = true;\n\n            for (var j in bubble) {\n                if (bubble[j].tpl) {\n                    if ( !bubble[j].isRegistered ) {\n                        bubble[j].isRegistered = true;\n                        this.addBubble( bubble[j] )\n                    }\n                    if (!bubble[j].isReady) {\n                        shouldAssemble = false;\n                        continue;\n                    }\n                }\n            }\n\n            if (shouldAssemble) {\n                let node = ub.assembleTpl(bubble.tpl, bubble);\n                bubble.node = node;\n                bubble.isReady = true;\n                bubble.computedAtStep = this.ctx.payload.step++;\n                changed = true;\n            }\n        }\n        if ( changed)\n            this.iterateBubbles( bubbles, count+1)\n\n    },\n\n    addBubble: function (bubble) {\n        bubble.uid = cu.uids.run(\"bubble\");\n        bubble.addedAtStep = this.ctx.payload.step;\n        this.ctx.payload.bubbles.push(bubble);\n        //this.iterateBubbles();\n    },\n\n    start: function (molds) {\n        this.ctx.payload = {\n            bubbles: [],\n            molds: molds,\n            step : 0,\n        }\n    }\n\n}\n\n\nvar inputs = {\n    tplTree: {\n        x: `\n            <div><input id='order' syncwith={value} />\n            {value} \n            <div id='menu'> </div>\n            <div id='bar'> </div>\n            <div id='window' > {content}</div>\n            </div>\n        `,\n        y: \"salut {#test} salutare din alt template \"\n    }\n}\nvar test = (result) => {\n\n    ub.start(ub.parseTpl(_.cloneDeep(inputs.tplTree)));\n\n    ub.addBubble({\n        tpl: \"x\", \n        value : \"salutare\", \n        value_setter : () => { console.log( \"setting\")},\n        content : {\n            tpl : \"y\",\n            \"#test\" : \"yo\"\n        }\n    })\n\n    ub.iterateBubbles();\n\n    result.bubbles = ub.ctx.payload;\n    //cu.tests.pin( \"mold\", value)\n    //result.mold = value;\n    //return nodes;\n}\n\nlet data = window.salut = { value: \"elefant\" }\ncu.testTplAssembing = {\n    //test,\n\n    run: function () {\n        ub.start(ub.parseTpl(_.cloneDeep(inputs.tplTree)));\n\n        ub.addBubble({\n            tpl: \"x\", \n            value : \"salutare\", \n            value_setter : () => { console.log( \"setting\")},\n            content : {\n                tpl : \"y\",\n                \"#test\" : \"yo\"\n            }\n        })\n    \n        ub.iterateBubbles();\n    \n        //result.bubbles = ub.ctx.payload;\n        return ub.ctx.payload.bubbles[0].node;\n    },\n\n    init: function () {\n        ub.ctx.tb.parser = cu.tplObjParse;\n        ub.ctx.tb.reactAssembler = cu.reactAssembler;\n    },\n\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","import _ from \"lodash\"\nvar cu = window.cu;\n\n\nvar ub = {\n\n    ctx: {\n        payload: {\n            tpls: {},\n            registerTpl: function (args, result,  master) {\n\n                result.obj.uid = cu.uids.run();\n\n                if ( result.obj.mold.props ) result.obj.mold.props.tplId = result.obj.uid;\n                //this.tpls.push(args.path);\n\n                this.tpls[ args.path.join(\".\") ] = result.obj.uid;\n            }\n        },\n\n        tb: {\n            //parseHtml: cu.parseStringIntoComp\n        }\n    },\n\n    run : function ( obj, attrs ) {\n        let oldPayload = this.ctx.payload;\n\n        this.ctx.payload.attrs = attrs;\n\n        let mold = this.it( obj, []);\n\n        this.ctx.payload = oldPayload;\n\n        return mold;\n    },\n\n\n    it: function (obj, path) {\n        let oldPayload = null;\n        let result = {\n            oldPayload: null,\n\n            obj: obj,\n            sub: obj,\n\n            master: this,\n            path: path,\n            values: obj,\n            ops: []\n        }\n\n        this.prepare(result);\n\n        for (var i in result.sub) {\n            let ret = this.it(result.sub[i], path.concat(i));\n            result.values[i] = ret;\n        }\n\n        return this.integrate(result)\n    },\n\n    addPayload: function (result, obj) {\n        if (!result.oldPayload) {\n            result.oldPayload = this.ctx.payload;\n            this.ctx.payload = Object.create(this.ctx.payload);\n        }\n        Object.assign(this.ctx.payload, obj);\n    },\n\n    prepare: function (result) {\n        let checks = {\n            isString: result => result.obj && result.obj.trim,\n            isUnparsedTpl: result => result.obj && result.obj.html && !result.obj.mold,\n            isList: result => true\n        }\n\n        let cases = {\n            \"isString\": (result) => {\n                result.values = result.obj = { html: result.obj };\n                result.sub = [];\n                return \"applied\";\n            },\n            \"isUnparsedTpl\": (result) => {\n                result.sub = [];\n                let obj = Object.assign({}, result.obj, {\n                    mold: this.ctx.tb.parseHtml.run( result.obj.html, this.ctx.payload.attrs )\n                })\n\n                result.values = result.obj = obj;\n\n                result.ops.push({ name: \"registerTpl\", path: result.path })\n                return \"applied\";\n            },\n        }\n\n        let hasChanges = true;\n        let applied = false;\n        let count = 0;\n        while (hasChanges && count < 5) {\n            hasChanges = false;\n            count++;\n            for (var i in cases) {\n                let _check = checks[i];\n                if (!_check(result)) continue;\n\n                let _case = cases[i];\n                let ret = _case(result);\n                if (ret == \"applied\") {\n                    hasChanges = true;\n                    applied = true;\n                    break;\n                }\n            }\n        }\n    },\n\n    integrate: function (result) {\n        if (result.ops.length) {\n            for (var i in result.ops) {\n                let op = result.ops[i];\n                this.ctx.payload[op.name](op, result, this)\n            }\n        };\n\n        if (result.oldPayload) this.ctx.payload = result.oldPayload;\n\n        return result.values;\n    }\n}\n\nvar test = (result) => {\n    let value = ub.run({ x: `\n        <div pin = \"test\" > \n        <input id=\"dalut\" test=\"{salut}\" />\n            <div> \n                    <div xid='x{#tes}'> \n                    </div>\n            </div>\n\n        </div>\n    `, y: { a: { b: `\n    \n        <div id='yo'> Salutare </div>\n    ` } } }, []);\n    //value = ub.it(value, []);\n\n    result.mold = value;\n}\n\ncu.tplObjParse = {\n    //test,\n\n    run: function (obj, attrs ) {\n        return ub.run(obj, attrs )\n    },\n\n    init : function ( ) {\n        ub.ctx.tb.parseHtml = cu.parseStringIntoComp;\n    },\n    \n    def: `\n        @obj with string or .html slots \n        transform it into componentsObjects\n    `,\n\n    debug : {\n        ub : ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nvar cu = window.cu;\n\n\n\nvar ub = {\n\n    ctx: {\n        tb: {},\n        payload1: {\n            tplsMapping: [\n                \"map\",\n                \"topic\",\n                \"item\",\n                \"entry\"\n            ],\n            defaultTpl: \"item\",\n            usedGlobalStyles: {},\n\n\n            addSubs: function (args, result, master) {\n                result.obj.subs = result.values;\n                //console.log( arguments );\n\n                let obj = result.obj;\n                let content = [];\n                for (var i in result.values) {\n                    let item = result.values[i];\n                    if (item.nodes && item.nodes.card)\n                        content.push(item.nodes.card)\n                }\n\n                if (content) {\n                    result.obj.nodes.content = master.ctx.payload.useTemplate(obj.tpl + \".content\", { subs: content });\n                }\n\n                let data = result.obj.nodes;\n                result.obj.nodes.card = master.ctx.payload.useTemplate(obj.tpl + \".card\", data)\n\n            },\n\n            useTemplate: function (tpl, data, skipGlobalStyle) {\n\n                if (!skipGlobalStyle) {\n                    let route = tpl.split(\".\");\n                    let root = ub.ctx.wallet.molds;\n\n                    for (var i = 0; i < route.length; i++) {\n                        let step = route[i];\n                        if (root[step].globalStyle) {\n                            let id = root[step].globalStyle.uid;\n                            this.usedGlobalStyles[id] = { parent: root[step] };\n                        }\n                        if (root[step])\n                            root = root[step];\n                        else break;\n                    }\n                }\n\n                let mold = _.get(ub.ctx.wallet.molds, tpl); // .item.title;\n                return ub.ctx.tb.reactAssembler.run(mold, data)\n            },\n            cases: [\n                (result, master) => {\n\n                    let isApplicable = !result.obj.data\n                    if (!isApplicable) return;\n\n                    let tpls = master.ctx.payload.tplsMapping;\n\n                    let defaultTpl = tpls[result.obj.level] || master.ctx.payload.defaultTpl;\n\n\n                    let obj = {\n                        tpl: result.obj.tpl || defaultTpl,\n                        data: result.obj.item,\n                        level: result.obj.level,\n                        nodes: {}\n                    }\n\n                    result.subs = result.obj.subs;\n                    result.obj = obj;\n                    result.ops.push({ name: \"addSubs\", args: \"subs\" })\n\n                    return \"applied\"\n                },\n\n                (result, master) => {\n                    let isApplicable = !result.obj.nodes.title\n                    if (!isApplicable) return;\n\n                    let obj = result.obj;\n\n                    let mold = ub.ctx.wallet.molds.item.title;\n                    let values = {\n                        title: result.obj.data.text,\n                        level: result.obj.level\n                    }\n\n                    result.obj.nodes.title = master.ctx.payload.useTemplate(obj.tpl + \".title\", values);\n\n                    return \"applied\"\n                },\n\n\n            ]\n\n        },\n\n    },\n\n    getMolds: function (tpls) {\n        let molds = this.ctx.tb.parser.run(tpls);\n        return molds;\n    },\n\n\n    buildTpls: function (data) {\n        let node = this.ctx.tb.iterator.run(data, { payload: this.ctx.payload1 });\n        return node;\n    },\n\n    addGlobalStyles: function (nodes, gbs) {\n        let styles = [];\n        gbs = gbs || this.ctx.payload1.usedGlobalStyles\n\n\n        var parent;\n\n        let makeSelector = (path) => \"[tplid='\" + parent[path].uid + \"']\";\n\n        let getter = (data, path) => {\n            if (parent[path]) {\n                return makeSelector(path)\n            }\n            else if (path == \"*\")\n\n                return Object.keys(parent).filter(item => item != \"globalStyle\").map(item => makeSelector(item)).join(\",\")\n\n            return _.get(data, path)\n        }\n\n        let data = { color: \"red\" }\n        for (var i in gbs) {\n            parent = gbs[i].parent;\n            let style = ub.ctx.tb.reactAssembler.run(parent.globalStyle, data, getter)\n            styles.push(style)\n        }\n\n        if (styles.length) {\n            nodes = [nodes, styles];\n        }\n        return nodes;\n    }\n}\n\nvar input = {\n    tpls: {\n        map: {\n            title: \"<div class='title level{level}'>{title}</div>\",\n            content: \"<div>{subs}</div>\",\n            card: \"<div class='map'>{title} {content} </div>\",\n            style: `\n\n            `\n        },\n        topic: {\n            title: \"<div class='title level{level}'>{title}</div>\",\n            content: \"<div class='content'>{subs}</div>\",\n            card: \"<div class='topic'>{title} {content} </div>\"\n        },\n        item: {\n            title: \"<div class='title level{level}'>{title}</div>\",\n            content: \"<div class='content'>{subs}</div>\",\n            card: \"<div class='item'>{title} {content} </div>\",\n            style: `\n            \n            `\n        },\n        entry: {\n            title: \"<div class='title level{level}'>{title}</div>\",\n            content: \"<div class='content'>{subs}</div>\",\n            card: \"<div class='entry'>{title} {content} </div>\"\n        },\n\n        summart: {\n            title: \"<div class='title level{level}'>{title}</div>\",\n            content: \"<div class='content'>summary</div>\",\n            card: \"<div class='entry'>{title} {content} </div>\",\n            style: `\n            \n            `\n        },\n\n        columns: {\n            title: \"<div class='title level{level}'>{title}</div>\",\n            content: \"<div class='content'>{subs}</div>\",\n            card: \"<div class='columns'>{title} {content} </div>\",\n            globalStyle: `<style htmlSlot='content'>\n               {content} { display : flex; background : hsla(100, 50%, 70%, 0.4)}\n               {content}>* { flex-basis : 100px; padding :0px 10px; border-left : 1px solid red; }\n         \n            </style>`\n        },\n    }\n}\n\nvar test = (result) => {\n    let wallet = {\n        molds: ub.getMolds(input.tpls),\n        repo: cu.tests.get(\"testRepo\"),\n    }\n\n    ub.ctx.wallet = wallet;\n\n    wallet.tpls = ub.buildTpls(wallet.repo);\n\n    let card = wallet.tpls.nodes.card;\n    card = ub.addGlobalStyles(card)\n    cu.tests.pin(\"testRoot\", card)\n    Object.assign(result, wallet)\n}\n\ncu.treeCardsBuilder = {\n    //test,\n\n    run: function (obj) {\n\n        let wallet = ub.ctx.wallet = {\n            molds : obj.molds,\n            repo  : obj.data\n        };\n\n        Object.assign(ub.ctx.payload1, {\n            tplsMapping: obj.mappings.tplsMapping,\n            defaultTpl: obj.mappings.defaultTpl, \n            usedGlobalStyles: {},\n        });\n\n        wallet.tpls = ub.buildTpls(wallet.repo);\n\n        let card = wallet.tpls.nodes.card;\n        card = ub.addGlobalStyles(card)\n\n        return card;\n    },\n\n    init: function () {\n        ub.ctx.tb.parser = cu.tplObjParse;\n        ub.ctx.tb.reactAssembler = cu.reactAssembler;\n        ub.ctx.tb.iterator = cu.treeIterator;\n    },\n\n    def: `\n    `,\n\n    debug: {\n        ub: ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nvar cu = window.cu;\n\n\n\nvar ub = {\n\n    ctx: {\n    },\n\n    run : function ( obj, attrs ) {\n        let oldPayload = this.ctx.payload;\n\n        this.ctx.payload.attrs = attrs;\n\n        let mold = this.it( obj, []);\n\n        this.ctx.payload = oldPayload;\n\n        return mold;\n    },\n\n\n    it: function (obj, path) {\n        let oldPayload = null;\n        let result = {\n            oldPayload: null,\n\n            obj: obj,\n            sub: obj,\n\n            master: this,\n            path: path,\n            values: {},\n            ops: []\n        }\n\n        this.prepare(result);\n\n        for (var i in result.subs) {\n            let ret = this.it(result.subs[i], path.concat([i]));\n            result.values[i] = ret;\n        }\n\n        return this.integrate(result)\n    },\n\n    addPayload: function (result, obj) {\n        if (!result.oldPayload) {\n            result.oldPayload = this.ctx.payload;\n            this.ctx.payload = Object.create(this.ctx.payload);\n        }\n        Object.assign(this.ctx.payload, obj);\n    },\n\n    prepare: function (result) {\n\n        let cases = this.ctx.payload.cases;\n\n        let hasChanges = true;\n        let applied = false;\n        let count = 0;\n        while (hasChanges && count < 5) {\n            hasChanges = false;\n            count++;\n            for (var i in cases) {\n                let _case = cases[i];\n                let ret = _case(result, this);\n                if (ret == \"applied\") {\n                    hasChanges = true;\n                    applied = true;\n                    break;\n                }\n            }\n        }\n    },\n\n    integrate: function (result) {\n        if (result.ops.length) {\n            for (var i in result.ops) {\n                let op = result.ops[i];\n                this.ctx.payload[op.name](op.args, result,  this)\n            }\n        };\n\n        if (result.oldPayload) this.ctx.payload = result.oldPayload;\n\n        return result.obj;\n    }\n}\n\nvar test = (result) => {\n}\n\ncu.treeIterator = {\n    //test,\n\n    run: function (obj, ctx ) {\n        let mub = Object.create( ub )\n        mub.ctx = ctx;\n        if ( !ctx.payload ) ctx.payload = { cases : [] }\n        return mub.run(obj, [])\n    },\n\n    init : function ( ) {\n        //ub.ctx.tb.parser = cu.tplObjParse;\n        //ub.ctx.tb.reactAssembler = cu.reactAssembler;\n    },\n    \n    def: `\n    `,\n\n    debug : {\n        ub : ub\n    }\n}","import _ from \"lodash\"\nimport faker from \"faker\"\nvar cu = window.cu;\n\n\n\nvar ub = {\n\n    ctx: {\n        nextUID : 0\n    },\n\n    run : function (name ) {\n        return (name || \"uid\" ) +\"_\"+ this.ctx.nextUID++;\n    },\n\n}\n\nvar test = (result) => {\n}\n\ncu.uids = {\n    //test,\n\n    run: function (name) {\n        return ub.run(name);\n    },\n    \n    def: `\n    `,\n\n    debug : {\n        ub : ub\n    }\n}","import _ from \"lodash\"\nvar cu = window.cu;\n\nfor (var i in cu) {\n    if (cu[i].init) cu[i].init();\n}\n\n\n\ncu.tests = {\n    wallet: {\n        test: {},\n        pins: {},\n        pending: []\n    },\n    pin: function (name, value) {\n        this.wallet.pins[name] = value;\n    },\n    get: function (name) {\n        let value = _.get(this.wallet.pins, name);\n        if (!value) value = _.get(this.wallet.test, name);\n        return value;\n    }\n}\n\n\nfor (var i in cu) {\n    if (cu[i].test) {\n        cu.tests.wallet.pending.push(i);\n\n    }\n}\n\n\nlet passes = 0;\nwhile (passes < 5 && cu.tests.wallet.pending.length) {\n    let i = cu.tests.wallet.pending.shift();\n    passes++;\n    let result = {};\n    let ret;\n    try {\n        ret = cu[i].test(result);\n    } catch (e) {\n        console.log(\"error when running \", i, e)\n    }\n\n    if (ret == \"pending\") {\n        cu.tests.wallet.pending.push(i)\n        continue;\n    }\n    console.group(\"test for \", i)\n\n    cu.tests.wallet.test[i] = result;\n\n    if (ret) console.log(ret)\n    if (Object.keys(result)) {\n        for (var i in result) console.log(i, result[i])\n    }\n    console.groupEnd();\n}\n\nif (cu.tests.wallet.pending.length)\n    console.error(\"error with tests : \")\n\n\n","\nimport cu from './main.js';\nimport './units/brand.js';\nimport './units/bubbleBoard.js';\nimport './units/bubbleFlow.js';\nimport './units/bubbleGuns.js';\nimport './units/bubbleTest.js';\nimport './units/bubbleTypes.js';\nimport './units/db.js';\nimport './units/parseStringIntoComp.js';\nimport './units/prettyScode.js';\nimport './units/reactAssembler.js';\nimport './units/reactUtils.js';\nimport './units/store.js';\nimport './units/testDataGenerator.js';\nimport './units/testMolds.js';\nimport './units/testTplAssembling.js';\nimport './units/tplObjParse.js';\nimport './units/treeCardsBuilder.js';\nimport './units/treeIterator.js';\nimport './units/uids.js';\nimport './init.js';\nexport default cu;\n   ","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport CodeMirrorEditor from \"./components/CodeMirrorEditor\";\nimport _ from \"lodash\";\nimport $ from \"jquery\";\nimport go from \"gojs\";\nimport \"./libs/dataManager\";\nimport KeyboardManager from \"./managers/KeyboardManager\"\nimport StaticManager from \"./managers/StaticManager\"\nimport { TimerManager as TimerManagerBuilder } from \"./managers/TimerManager\"\nimport PouchDB from \"pouchdb\"\nimport js_beautify from \"js-beautify\"\nimport { fchown, link, fstat } from 'fs';\nimport { debug } from 'util';\nimport faker from 'faker'\nimport { timingSafeEqual } from 'crypto';\nimport cu from \"./units/\"\nimport { delay } from 'q';\n\nvar fns = window.fns = {}\n\nvar ctxpins = window.ctxpins = {};\n\nvar customComponents = {\n  codemirror: CodeMirrorEditor\n}\n\nvar DataManager = window.DataManager;\nDataManager.newAPI = true;\n\nvar TimerManager = TimerManagerBuilder.init(DataManager);\n\n//--------------------\nwindow.$ = $;\n\nvar pinedTasks = `\n`\n\nvar hapi = {\n  showhud: function () {\n    let currentView = DataManager.getValue(\"workingant.viewState.path\");\n\n    console.log(currentView);\n    currentView = currentView == \"antView.map.nodes\" ? \"antView.bridge.nodes\" : \"antView.map.nodes\"\n\n    DataManager.set(\"workingant.viewState.path\", currentView);\n  },\n  placeorder: function (evt) {\n    if (evt.which !== 13) return;\n\n    flow.place();\n    DataManager.set(\"workingant.data.input\", { text: \"\" })\n    flow.restart();\n  },\n  set: function (path, value) {\n    DataManager.set(path, value)\n  },\n  parseinput: function () {\n    let text = DataManager.getValue(\"workingant.data.input\");\n    if (_.isString(text))\n      flow.parse(text)\n  },\n\n  select: function (id) {\n    flow.change({ parent: id })\n\n    DataManager.set(\"repo.uistate.selected\", id )\n  }\n}\n\nDataManager.setTrigger(\"workingant.data.input\", \"ada\", {\n  run: hapi.parseinput\n})\n\n\nDataManager.setCombined( \"ub.flow\", {\n  start : function ( ) {\n    this.wallet = {\n      step : { createdAt : new Date().getTime() },\n    }\n  },\n\n  parse : function ( input ) {\n    var result = input.match( /^(\\.[^\\s]+\\s+)*/ )\n    var text = input.substr( result[0].length )\n    var dirs = result[0].trim().split ( \" \" );\n\n    if ( !this.wallet.step.editStartedAt ) this.wallet.step.firstCharAt = new Date().getTime();\n    \n    this.wallet.step.text = text;\n  },\n\n  place : function ( ) {\n    let ant = {\n      text : this.wallet.text,\n      id : myUB.antsDbState.getId(),\n      times : {\n        createdAt : this.wallet.step.createdAt,\n        firstCharAt  : this.wallet.step.firstCharAt,\n        addedAt  : new Date().getTime()\n      }\n    };\n\n    let parent = this.getParent( );\n\n\n\n  }\n\n})\n\nvar flow = {\n\n  start: function () {\n    this.wallet = {\n      step: {},\n      actions: this.main,\n      parser: this.parser\n    }\n  },\n\n  restart: function () {\n    let prevStep = this.wallet.step;\n    this.wallet = {\n      step: {\n        parent: prevStep.parent\n      },\n      startedAt: new Date().getTime(),\n      actions: this.main,\n      parser: this.parser\n    }\n  },\n\n  parse: function (text) {\n    this.wallet.parser.parse(this.wallet, text)\n  },\n\n  change: function (values) {\n    this.wallet.actions.change(this.wallet, values)\n  },\n\n  place: function () {\n    this.wallet.actions.place(this.wallet)\n  },\n\n  parser: {\n    parse: function (wallet, text) {\n      wallet.actions.change(wallet, { text: text, x: text.substr(1) })\n    }\n  },\n\n  main: {\n    place: function (wallet) {\n      this.add(wallet)\n    },\n    change: function (wallet, values) {\n      _.merge(wallet.step, values)\n    },\n\n    add: function (wallet) {\n\n      let parent = wallet.step.parent;\n      if (!parent) {\n        let root = DataManager.getWallet(\"repo.root\");\n        parent = root.id;\n      }\n\n      let state = DataManager.getWallet(\"repo.state\");\n      state.nextId++;\n\n      let id = myUB.antsDbState.getId();\n\n      let ant = {\n        text: wallet.step.text,\n        id: id,\n        startedAt: wallet.startedAt,\n        placedAt: new Date().getTime()\n      }\n\n      myUB.mapview.mergeItem(id, ant);\n      myUB.mapview.mergeRoot(_.set({}, \"rels.sub.\" + parent + \".\" + id, { id: id, parent: parent }))\n      myUB.mapview.mergeRoot(_.set({}, \"rels.allSubs.\" + id, { id: id, parent: parent }))\n      DataManager.markChangeOn(\"repo\")\n      DataManager.markChangeOn(\"repo.items\")\n      //DataManager.set(\"repo.items.\" + id, ant);\n      //DataManager.set(\"repo.root.rels.sub.\" + parent + \".\" + id, { id: id, parent: parent })\n      //DataManager.set(\"repo.root.rels.allSubs.\" + id, { id: id, parent: parent })\n    }\n  }\n}\nflow.start();\n\n\nlet myUB = window.myUB = {};\n\nDataManager.setCombined(\"fnsub\", {\n  loader: {\n    get: function () {\n\n      let fns = myUB;\n\n      if (!fns.fnsub || !fns.fnsub.isReady) {\n        this.make(fns, \"fnsub\", \"ub.fnsub\", {\n          old: fns.fnsub\n        })\n\n        this.setupAll(fns);\n      }\n\n      fns.fnsub.makeUb(\"mapview\", \"ub.mapView\", {\n        \"tb.db\": \"db\",\n        \"state\": \"antsDbState\",\n      })\n\n      fns.fnsub.makeUb(\"antsDbState\", \"ub.antsDbState\", {\n        \"tb.db\": \"db\"\n      })\n\n      fns.fnsub.makeUb(\"db\", \"ub.db\", {})\n\n      fns.fnsub.setupAll();\n\n    },\n\n    setupAll: function (fns) {\n      for (var i in fns) {\n        if (fns[i].goSetup)\n          this.setup(fns, fns[i])\n      }\n\n      return true;\n    },\n\n    make: function (fns, name, path, extra) {\n      let obj = Object.create(DataManager.getValue(path));\n      obj.goSetup = true;\n      obj.extra = extra;\n      obj.uid = cu.uids.run();\n\n      if (fns[name]) _.merge(fns[name], obj)\n      else\n        fns[name] = obj;\n    },\n\n    setup: function (fns, obj) {\n      delete obj.goSetup;\n\n      let values = {};\n      for (var i in obj.extra) {\n        let target = _.isString(obj.extra[i]) ? _.get(fns, obj.extra[i]) : obj.extra[i];\n        if (!target) {\n          target = {};\n          _.set(fns, obj.extra[i], target)\n        }\n        _.set(values, i, target)\n      }\n\n      if (obj.setup)\n        obj.setup(values);\n\n      obj.isReady = true;\n    },\n\n    autostart: true\n\n  }\n})\n\nmyUB.fnsub = {\n  subs: [],\n  waiting: {},\n  makeUb: function (a, b, c) {\n    this.subs.push([a, b, c])\n  },\n  onready: function (sub) {\n    let payload = {};\n    let promise = new Promise((resolve) => {\n      payload.resolve = resolve;\n    })\n\n    if (!this.waiting[sub.uid]) this.waiting[sub.uid] = [];\n\n    this.waiting[sub.uid].push(payload);\n\n    return promise;\n  }\n}\n\n\nDataManager.setCombined(\"ub.antsDbState\", {\n  setup: function (opts) {\n    _.merge(this, opts);\n\n    this.wallet = {\n      state: {\n        prefix: \"ants\",\n        id: \"antsDbState\",\n        nextId: 1\n      }\n    };\n\n    myUB.fnsub.onready(this.tb.db)\n      .then(() => {\n        return this.tb.db.loadItems([\"antsDbState\"])\n      })\n      .catch(() => {\n      })\n      .then((state) => {\n        console.log(\"state\", state)\n        if (!state[0]) {\n          console.log(\"state\", this.wallet.state)\n\n          this.tb.db.saveItems(this.uid, [this.wallet.state])\n        }\n        else {\n          console.log(\"state\", state[0])\n          this.wallet.state = state[0];\n          this.isReady = true;\n        }\n      })\n  },\n\n  getId: function () {\n    this.wallet.state.nextId++;\n    this.tb.db.request_save( this.uid, [this.wallet.state], 10000)\n    return \"ant_\" + this.wallet.state.nextId;\n  }\n})\n\nDataManager.setCombined(\"ub.fnsub\", {\n  setup: function (opts) {\n\n    _.merge(this, opts)\n\n    this.fns = myUB;\n\n    this.waiting = this.waiting || {};\n\n    if (this.old.subs) {\n      for (var i in this.old.subs) {\n        let sub = this.old.subs[i];\n        this.makeUb(sub[0], sub[1], sub[2])\n      }\n      this.setupAll();\n      delete this.subs;\n    }\n  },\n\n\n  setupAll: function () {\n    let fns = this.fns;\n    for (var i in fns) {\n      if (fns[i].goSetup)\n        this.setupUb(fns[i])\n    }\n\n    return true;\n  },\n\n  makeUb: function (name, path, extra) {\n\n    let fns = this.fns;\n    let obj = Object.create(DataManager.getValue(path));\n    obj.goSetup = true;\n    obj.extra = extra;\n    obj.uid = fns[name] && fns[name].id ? fns[name].uid : cu.uids.run();\n\n\n    if (fns[name]) _.merge(fns[name], obj)\n    else\n      fns[name] = obj;\n  },\n\n  setupUb: function (obj) {\n    let fns = this.fns;\n    delete obj.goSetup;\n\n    let values = {};\n    for (var i in obj.extra) {\n      let target = _.isString(obj.extra[i]) ? _.get(fns, obj.extra[i]) : obj.extra[i];\n      if (!target) {\n        target = { uid: cu.uids.run() };\n        _.set(fns, obj.extra[i], target)\n      }\n      _.set(values, i, target)\n    }\n\n    if (obj.setup)\n      obj.setup(values);\n\n    obj.isReady = true;\n\n    if (this.waiting[obj.uid]) {\n      this.waiting[obj.uid].forEach(payload => {\n        payload.resolve()\n      })\n\n      this.waiting[obj.uid] = [];\n    }\n  },\n\n  onready: function (sub) {\n\n    if (sub.isReady) return Promise.resolve();\n\n    let payload = {};\n    let promise = new Promise((resolve) => {\n      payload.resolve = resolve;\n    })\n\n    if (!this.waiting[sub.uid]) this.waiting[sub.uid] = [];\n    this.waiting[sub.uid].push(payload);\n\n    return promise;\n  }\n\n\n});\n\nDataManager.setCombined(\"ub.db\", {\n  setup: function () {\n    this.db = cu.db.run(\"thisdb\");\n    this.timers = {};\n  },\n\n  request_save: function (id, src, delay ) {\n    if (this.timers[id]) window.clearTimeout(this.timers[id]);\n\n    this.timers[id] = window.setTimeout(() => {\n      this.saveItems(id, src)\n    }, delay || 1000)\n  },\n\n  saveItems: function (id, src) {\n    if (this.timers[id]) window.clearTimeout(this.timers[id]);\n\n    let items = (_.isArray(src)) ? src : src.getItemsToSave();\n    let promises = [];\n    for (var i in items)\n      promises.push(this.db.save(items[i], items[i].id));\n\n    return Promise.all(promises);\n  },\n\n  loadItems: function (src) {\n    let items = (_.isArray(src)) ? src : src.getItemsToSave();\n    let promises = [];\n    for (var i in items)\n      promises.push(this.db.load(items[i]))\n\n    return Promise.all(promises);\n  },\n})\n\n\n\nDataManager.setCombined(\"ub.mapView\", {\n  setup: function (args) {\n    this.wallet = {\n      items: {},\n      root: {\n        id: \"ant1\",\n        text: \"the first map\",\n        rels: { sub: {} },\n        type: \"map\"\n      },\n      changed: {},\n      state: { nextId: 1 }\n    };\n\n    this.wallet.items.ant1 = this.wallet.root;\n\n    _.merge(this, args)\n\n    console.log(this);\n    return this;\n  },\n  loadMap: function (id) {\n    let startIds = [id, \"info_\" + id]\n    this.tb.db.loadItems(startIds)\n      .then(items => {\n        for (var i in items) {\n          let item = items[i];\n          if (!item) continue;\n          this.wallet.items[items[i].id] = items[i];\n        }\n        this.wallet.root = items[0];\n      })\n      .then(() => {\n        let root = this.wallet.root;\n        let related = _.get(root, \"rels.allSubs\") || {};\n        let ids = Object.keys(related);\n        return this.tb.db.loadItems(ids)\n      })\n      .then(items => {\n        for (var i in items) {\n          let item = items[i];\n          if (!item) continue;\n          this.wallet.items[item.id] = item;\n        }\n      })\n      .then(() => {\n        console.log(\"done\", this.wallet)\n\n        DataManager.set(\"repo.items\", this.wallet.items)\n        DataManager.set(\"repo.root\", this.wallet.root)\n\n        //notify;\n      })\n  },\n\n  getItemsToSave: function () {\n    let changed = this.wallet.changed;\n    this.wallet.changed = {};\n\n    let items = [];\n    for (var i in changed) {\n      items.push(this.wallet.items[i])\n    }\n    return items;\n  },\n  saveItems: function () {\n    let items = this.getItemsToSave();\n    this.tb.db.saveItems(this.uid, items);\n  },\n  generateId: function () {\n    return this.tb.state.getId();\n  },\n  mergeItem: function (id, value) {\n    if (!id) id = this.generateId();\n    if (!this.wallet.items[id]) this.wallet.items[id] = { id : id, createdAt: new Date().getTime() };\n    _.merge(this.wallet.items[id], value);\n    this.triggerChange( id );\n    return id;\n  },\n  mergeRoot: function (value) {\n    _.merge(this.wallet.root, value);\n    this.triggerChange( this.wallet.root.id );\n    \n  },\n\n  triggerChange : function ( id ) {\n    this.wallet.changed[id] = true;\n    this.tb.db.request_save(this.uid, this);\n  },\n\n  setRel : function ( rel, a, b, value ) {\n    _.set( this.wallet.root,  [\"rels\", rel,a,b] , value );\n    this.triggerChange( this.wallet.root.id )\n  },\n\n})\nDataManager.setCombined(\"repo\", {\n  items: {},\n  root: {\n    id: \"ant1\",\n    text: \"the first map\",\n    rels: { sub: {} }\n  },\n  state: {\n    nextId: 2\n  }\n})\n\n\nDataManager.setCombined(\"antView.molds\", {\n  loader: {\n    get: function (tb) {\n      let molds = cu.tplObjParse.run(this.tpls);\n      return molds;\n    },\n    tpls: {\n      title: `<div >item : {value.text}</div>`,\n      item: `<div on_click={actions.select} antid={id}>item : {item.text}</div>`,\n      mapView: {\n        logo: cu.brand.getLogo(faker.company.catchPhrase(), 10, 5),\n        frame: `<div>{title} {content}\n        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\n        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\n        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\n        \n        <style>\n          .topic>.text { border-bottom : 1px solid {color} ; }\n          .content { margin-left : 1px; padding-left : 10px;}\n\n          .mapviewtitle { position:sticky; top : -30px; margin-bottom : 20px; background : white;  } \n          .logo { display : inline-block;width : 50px; height : 50px; }\n\n          .selected.title { font-size : 19px;}\n\n          .selected.content { \n            border-left :  1px dotted red;\n          }\n\n          .selected.content::after {\n            content : \"...\";\n            display : block;\n          }\n        </style>\n      </div>`,\n\n        title: `\n        <div class='mapviewtitle '> <svg class='logo'>{logo}</svg> {item.text}</div>`,\n      },\n\n\n      map: {\n        topic: \"<div on_click={actions.select} antid={id} class='title topic {isSelected}'><span class='text'>{handle} {item.text} &nbsp;&nbsp;&nbsp;&nbsp;</span></div>\",\n        item: \"<div on_click={actions.select} antid={id} class='title item {isSelected}'>{handle} {item.text}</div>\",\n        entry: \"<div on_click={actions.select} antid={id} class='title entry {isSelected}'>{handle} {item.text}</div>\",\n        other: `<div on_click={actions.select} antid={id} class='{isSelected}'>{item.text}</div>`,\n        card: `<div class='{isSelected}'>{title} <div id='content' class='content {isSelected}'>{content}</div></div>`,\n\n      },\n\n      bridgeTitle: `<div>{value.text}</div>`,\n      frame: \"<div>{maptitle}{items}</div>\",\n\n      mapTitle: \"\"\n    }\n  }\n})\n\n\n\nDataManager.setCombined(\"antView.map\", {\n  nodes: {\n    loader: {\n      get: function (tb, v) {\n        tb.fetch({uistate : \"repo.uistate\",  items: \"repo.items\", root: \"repo.root\", repo: \"repo\", molds: \"antView.molds\" }, v);\n\n        v.rows = Object.values(v.items);\n\n        let rows = [];\n\n        v.data = {}\n        v.actions = cu.store.get(tb, hapi, { runWith: { select: [\"select\", \"antid\"] } });\n        \n        v.selected = v.uistate.selected;\n        \n        v.color = \"#007abc\"\n        v.otherTpl = \"map.other\";\n        v.moldsMap = [\"map.topic\", \"map.item\", \"map.entry\"]\n        v.cardMold = \"map.card\";\n\n        v.body = this.getBody(v, v.root.id, v.root.rels.sub);\n        return v.body;\n      },\n\n      setV: function (value, v, memo) {\n        memo = memo || {};\n        for (var i in value) {\n          if ( memo[i] === undefined)\n            memo[i] = v[i];\n          v[i] = value[i]\n        }\n\n        return memo;\n      },\n      cleanV: function (v, memo) {\n        for (var i in memo)\n          v[i] = memo[i];\n      },\n\n      getBody: function (v, id, sub) {\n        let list = this.getBodyList(v, id, sub);\n\n        let logo = cu.reactAssembler.run(v.molds.mapView.logo, v);\n        let memo = this.setV({ logo: logo, item: v.repo.root }, v, memo)\n\n        let title = cu.reactAssembler.run(v.molds.mapView.title, v);\n        memo = this.setV({ content: list, title: title }, v, memo)\n        let node = cu.reactAssembler.run(v.molds.mapView.frame, v)\n        this.cleanV(v, memo);\n        return node;\n      },\n      getBodyList: function (v, id, sub) {\n        let related = sub[id];\n\n        if (!related) return null;\n        if (v.level > 5 ) return null;\n        let level = v.level != undefined ? v.level + 1 : 0\n        let list = [];\n        let memo = this.setV({\n          id: null,\n          item: null,\n          level: 0,\n          isSelected : null,\n          content : null,\n          title : null\n\n        }, v, memo);\n\n\n        for (var i in related) {\n\n          _.merge(v, {\n            id: i,\n            item: v.items[i],\n            level: level,\n            isSelected : v.selected == i ? \"selected\" : \"\",\n          })\n\n          let item = this.getItem(v, sub);\n          list.push(item);\n        }\n\n        this.cleanV(v, memo);\n        return list;\n      },\n\n      getItem: function (v, sub) {\n        let item = v.item;\n        let moldName = v.mold;\n        if (!moldName && v.moldsMap) {\n          moldName = v.moldsMap[v.level]\n        }\n\n        if (!moldName) moldName = v.otherTpl;\n        let titleMold = _.get(v.molds, moldName);\n\n        v.title = cu.reactAssembler.run(titleMold, v);\n        v.content = this.getBodyList(v, v.id, sub);\n\n        if ( v.isSelected && !v.content) v.content = []; \n\n\n        let node;\n        if (v.content) {\n          let cardMold = _.get(v.molds, v.cardMold);\n\n          node = cu.reactAssembler.run(cardMold, v)\n        }\n        else node = v.title;\n\n        return node;\n      },\n\n\n\n    }\n  }\n})\n\n\n\nDataManager.setCombined(\"antView.bridge\", {\n  nodes: {\n    loader: {\n      get: function (tb, v) {\n        tb.fetch({ items: \"repo.items\", molds: \"antView.molds\" }, v);\n\n        v.rows = Object.values(v.items);\n\n        let rows = [];\n\n        v.data = {}\n\n        for (var i in v.items) {\n          v.data.path = i;\n          v.data.value = v.items[i];\n          let row = cu.reactAssembler.run(v.molds.bridgeTitle, v.data)\n          rows.push(row)\n        }\n\n        console.log(rows)\n        return rows;\n      }\n    }\n  }\n})\n\nDataManager.setCombined(\"dbSavings\", {\n  items: {\n    /*\n    repoitems: { path: \"repo.items\", onload: [\"repo\", \"evaluateflow\"] },\n    bubblestate: \"repo.state\",\n    antsitems: \"repo.ants\",\n    */\n  }\n})\n\nDataManager.setCombined(\"tb.persisitence\", {\n  setup: function () {\n    this.db = cu.db.run(\"thisdb\");\n    window.onbeforeunload = () => { return this.saveAll() };\n    this.loadAll();\n\n  },\n\n  request_save: function () {\n    if (this.timer) window.clearTimeout(this.timer);\n\n    this.timer = window.setTimeout(() => {\n      this.saveAll()\n    }, 60000)\n  },\n\n  saveAll: function () {\n    let tosave = DataManager.getValue(\"dbSavings\").items\n    let savings = []\n    for (var i in tosave) {\n      savings.push(this.saveitem(i, tosave[i]))\n    }\n\n  },\n  saveitem: function (id, target) {\n    let path = target.path || target;\n    let repo = DataManager.getWallet(path);\n    return this.db.save({ repo }, id)\n  },\n\n  loadAll: function () {\n    let tosave = DataManager.getValue(\"dbSavings\").items;\n\n    for (var i in tosave)\n      this.loaditem(i, tosave[i]);\n  },\n\n  loaditem: function (id, target) {\n    let path = target.path || target;\n    let onload = target.onload || null;\n    this.db.load(id).then((items) => {\n      if (items && items.repo) DataManager.set(path, items.repo)\n      if (onload) DataManager.runOn(onload[0], onload[1])\n    })\n  },\n\n  starter: {\n    loader: {\n      autostart: true,\n      get: (tb) => {\n        if (tb.cache.done) return 1;\n        tb.cache.done = true;\n        let v = tb.fetch({ tb: \"tb.persisitence\" });\n        v.tb.setup();\n\n        return 1;\n      }\n    }\n  }\n\n})\n\n\n\n\nDataManager.setCombined(\"ui.molds\", {\n  loader: {\n    get: function (tb) {\n      let molds = cu.tplObjParse.run(this.tpls);\n      return molds;\n    },\n    tpls: {\n      main: `\n          <div id='frame'>\n            <div id='easel'>{view}</div>\n            <div id='bar'>\n              <myinput id='order' value={order.value} on_key_press={order.place} on_change={order.change}></myinput>\n              <div id='bumb' on_click='{bumb.action}'>{picture}</div>\n            </div>\n          </div>\n          <style>\n            * { box-sizing : border-box}\n            body , window, html {height : 100%; width : 100%; }\n            #frame { height : 100%; width : 100%;}\n            #frame { display : flex; flex-direction : column; }\n            #easel { flex : 1; overflow : auto; }\n            #bar   { border-top: 1px solid #999; width : 100%; flex-basis : {dim.barHeight}px ; display : flex;flex-direction:row; }\n\n            #order {  outline: none; flex : 1; border : 0px none transparent; width: 100%;}\n            #bumb  { flex-basis : {dim.barHeight}px; background : {color} } \n\n          </style>\n          \n  `,\n      bubbleitem: `<div on_click={selectitem} targetid={targetid}>{label}</div>`,\n\n    }\n  }\n})\n\nDataManager.setCombined(\"workingant\", {\n  data: {\n    input: { text: \"\" },\n    currentView: 'main',\n\n    selected: \"\"\n  }\n})\n\n\nDataManager.setCombined(\"antsFrame.ui\", {\n  loader: {\n    paths: { molds: \"ui.molds\", orderText: \"workingant.data\", node: \"antsFrame.prepare\" },\n    get: function (tb, v) {\n      tb.fetch(this.paths, v);\n\n      _.set(v.node, v.molds.main.mold.pins.order.concat([\"props\", \"value\"]), v.orderText.input)\n\n      return v.node;\n    }\n  }\n\n})\n\nDataManager.setCombined(\"workingant.viewState\", {\n  path: \"antView.map.nodes\"\n})\n\nDataManager.setCombined(\"antsFrame.prepare\", {\n  loader: {\n    paths: { molds: \"ui.molds\", data: \"bubbles.data\", repo: \"repo\", viewState: \"workingant.viewState\" },\n    get: function (tb, v) {\n      tb.fetch(this.paths, v);\n\n      tb.fetch({ view: v.viewState.path }, v)\n\n\n      let store = cu.store.get(tb, hapi,\n        { change: { changeOrder: \"workingant.data.input\" }, run: { bumbAction: \"showhud\", placeOrder: \"placeorder\" } });\n\n      v.dim = {\n        window: {\n          height: \"400\",\n          width: \"200\",\n        },\n        barHeight: \"30\"\n      }\n\n      v.data = {\n        label: \"main\",\n        bubbleList: \"TestList\",\n        order: {\n          change: store.changeOrder,\n          place: store.placeOrder\n        },\n        bumb: {\n          action: store.bumbAction\n        },\n        dim: v.dim,\n\n        view: v.view,\n\n        color: \"#007abc\"\n      }\n\n\n\n      v.node = cu.reactAssembler.run(v.molds.main, v.data)\n      return v.node;\n    },\n    autostart: true\n  }\n})\n\n\n\nDataManager.setCombined(\"test\", {\n  loader: {\n    get: function () {\n      myUB.mapview.loadMap(\"ant1\")\n    },\n    autostart: true\n  }\n})\n\n//DataManager = window._DataManager.setup();\nDataManager.historyManager.recording = false;\nDataManager.runToStart();\n//------------------\n\n\n\nclass Frame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {}\n  }\n\n  path = \"antsFrame.ui\"\n\n  componentDidMount() {\n    DataManager.setTrigger(this.path, \"asd\", {\n      run: () => {\n        this.setState({ \"version\": new Date().getTime() })\n      }\n    })\n  }\n\n  render() {\n    let components = DataManager.getValue(this.path);\n    let node = cu.reactUtils.makeComponent(components || []) || \"empty\";\n    return node\n  }\n}\n\nclass FlatAnt extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: { scode: \"salut\" }\n    }\n  }\n\n  _style() {\n    return `\n      html, window, body{ width : 100%; height : 100%; overflow : auto; padding: 0px; margin:0px;}\n      #root, .main { width : 100%; height : 100%;}\n      \n    `\n  }\n\n  render() {\n    let style = this._style();\n    let components = [\n      <Frame key=\"1\"></Frame>\n    ]\n    return [\n        <style>{style}</style>,\n        components]\n    ;\n  }\n}\n\nexport default FlatAnt;\n","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport CodeMirrorEditor from \"./components/CodeMirrorEditor\";\nimport _ from \"lodash\";\nimport $ from \"jquery\";\nimport go from \"gojs\";\nimport \"./libs/dataManager.js\";\n\nimport FlatAnt from \"./FlatAnt1\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let content = <FlatAnt />\n    return content;\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n","var historyManager = {\n  setup: function setup(info) {\n    var item = Object.create(this);\n    item.wallet = {\n      currentStack: {\n        info: [{\n          type: \"startedWith\",\n          info: info\n        }]\n      },\n      stacks: []\n    };\n    item.recording = true;\n    item.wallet.stacks.push(item.wallet.currentStack);\n    return item;\n  },\n  startStack: function startStack(info) {\n    if (!this.recording) return;\n    var stack = {\n      info: [],\n      prevStack: this.wallet.currentStack,\n      index: this.wallet.stacks.length,\n      start: info\n    };\n    this.addInfo({\n      type: \"subStack\",\n      stack: stack\n    }, true);\n    this.wallet.stacks.push(stack);\n    this.wallet.currentStack = stack;\n    if (info) this.addInfo(info);\n  },\n  addInfo: function addInfo(info, skipClone) {\n    if (!this.recording) return;\n    if (!skipClone) info = _.cloneDeep(info);\n    this.wallet.currentStack.info.push(info);\n  },\n  endStack: function endStack(info) {\n    if (!this.recording) return;\n    if (info) this.addInfo(info);\n    this.wallet.currentStack = this.wallet.currentStack.prevStack;\n  }\n};\nvar _DataManager = {\n  setup: function setup() {\n    var item = Object.create(this);\n    item.state = {\n      ctx: {},\n      gettingValue: {},\n      wallet: {},\n      meta: {},\n      cache: {},\n      version: {},\n      loadersCache: {},\n      triggers: {},\n      currentVersion: 1,\n      dependencies: {},\n      nextUID: 1,\n      agenda: {\n        names: {},\n        tasks: []\n      },\n      pins: {},\n      toStart: [],\n      flags: {}\n    };\n    item.historyManager = historyManager.setup(this);\n    return item;\n  },\n  state: {\n    gettingValue: {},\n    wallet: {},\n    meta: {},\n    cache: {},\n    version: {},\n    loadersCache: {},\n    triggers: {},\n    currentVersion: 1,\n    dependencies: {},\n    nextUID: 1,\n    agenda: {\n      names: {},\n      tasks: []\n    },\n    pins: {},\n    toStart: [],\n    flags: {}\n  },\n  setCtx: function setCtx(basePath, ctxPath, value, names) {\n    var ctx = _.get(this.state.ctx, [basePath, \"ctx\"].join(\".\"));\n\n    if (!ctx) _.set(this.state.ctx, [basePath, \"ctx\"].join(\".\"), ctx = {\n      names: []\n    });\n\n    _.set(ctx, ctxPath, value);\n\n    ctx.names.push({\n      names: names,\n      path: ctxPath\n    });\n  },\n  getCtx: function getCtx(basePath, name) {\n    var ctx = _.get(this.state.ctx, [basePath, \"ctx\"].join(\".\"));\n\n    ;\n    if (!ctx) return null;\n    var ctxPath;\n\n    for (var i in ctx.names) {\n      if (ctx.names[i].names.indexOf(name) != -1) {\n        ctxPath = ctx.names[i].path;\n        break;\n      }\n    }\n\n    if (!ctxPath) return null;\n\n    var target = _.get(ctx, ctxPath);\n\n    return target;\n  },\n  runOn: function runOn(basePath, name, args) {\n    var target = this.getCtx(basePath, name);\n    if (!target) return null;\n    return target[name](args);\n  },\n  runFn: function runFn(path, args) {\n    var route = path.split(\".\");\n    var fnName = route.pop();\n    var targetPath = route.join(\".\");\n    var target = this.getValue(targetPath);\n    if (!target[fnName]) return undefined;\n\n    if (_.isFunction(target[fnName])) {\n      return target[fnName](args, path, this);\n    } else if (_.isFunction(target[fnName].run)) {\n      return target[fnName].run(args, path, this);\n    }\n  },\n  getInfluenced: function getInfluenced(path) {\n    var influenced = [];\n\n    var dep = _.get(this.state.dependencies, path + \".DEP\");\n\n    if (!dep) return [];\n\n    for (var i in dep) {\n      influenced.push(i);\n      influenced = influenced.concat(this.getInfluenced(i));\n    }\n\n    return influenced;\n  },\n  getValue: function getValue(path, skipPartialValueCheck) {\n    var route = path.split(\".\");\n    var value = this.checkCache(path);\n    if (value) return value;\n    if (!skipPartialValueCheck) for (var i = 0; i < route.length; i++) {\n      var partialPath = route.slice(0, i).join(\".\");\n\n      if (this.state.gettingValue[partialPath]) {\n        var partialResult = this.state.gettingValue[partialPath].partialResult;\n        var partialSlot = route.slice(i);\n\n        var partialValue = _.get(partialResult, partialSlot);\n\n        if (partialValue !== undefined) return partialValue;\n      }\n    }\n    this.state.gettingValue[path] = true;\n    var list = this.makeList(path);\n    value = this.listToValue(list, path);\n    delete this.state.gettingValue[path];\n\n    if (value !== undefined) {\n      // let shouldUpdate = (  list.length == 1 && list[0].src == \"wallet\" )\n      this.setCache(path, value); //, shouldUpdate);\n      //this.diffCache( oldCache, path );\n    }\n\n    return value;\n  },\n  setCache: function setCache(path, value, shouldUpdate) {\n    this.state.cache[path] = {\n      value: value,\n      shouldUpdate: shouldUpdate || false,\n      version: this.state.currentVersion\n    };\n  },\n  checkCache: function checkCache(path, ignoreUpdates) {\n    if (!this.state.cache[path]) return null;\n    if (ignoreUpdates) return this.state.cache[path].value;\n    if (this.state.cache[path].shouldUpdate) return null;\n    return this.state.cache[path].value;\n  },\n  prepareCache: function prepareCache(path) {\n    var cache = this.state.loadersCache[path];\n\n    if (!cache) {\n      cache = this.state.loadersCache[path] = {\n        old: {},\n        contains: {},\n        dependsOn: {}\n      };\n    }\n\n    var old = {\n      contains: cache.contains || {},\n      dependsOn: cache.dependsOn || {}\n    };\n    cache.old = old;\n    delete cache.contains;\n    delete cache.dependsOn;\n    return old;\n  },\n  diffCache: function diffCache(oldCache, path) {\n    if (!this.state.loadersCache[path]) this.state.loadersCache[path] = {};\n    var cache = this.state.loadersCache[path] || {};\n    var dependencies = this.state.dependencies;\n\n    var addDependency = function addDependency(a, b) {\n      var dep = _.get(dependencies, a + \".DEP\");\n\n      if (!dep) _.set(dependencies, a + \".DEP\", dep = {});\n      dep[b] = true; //_.set( dependencies, a + \".DEP\",dep );\n    };\n\n    var remDependency = function remDependency(a, b) {\n      var dep = _.get(dependencies, a + \".DEP\");\n\n      if (!dep) return;\n      delete dep[b];\n    };\n\n    var check = function check(newC, oldC) {\n      for (var i in newC) {\n        if (!oldC || !oldC[i]) addDependency(i, path);\n      }\n\n      for (var i in oldC) {\n        if (!newC || !newC[i]) remDependency(i, path);\n      }\n    };\n\n    check(cache.contains, oldCache.contains);\n    check(cache.dependsOn, oldCache.dependsOn);\n  },\n  updateVersionsMap: function updateVersionsMap(path) {\n    var cache = this.state.loadersCache[path] || {};\n    var depOn = cache.dependsOn;\n\n    for (var i in depOn) {\n      var currentVersion = this.getVersion(i);\n      depOn[i].version = currentVersion;\n    }\n  },\n  makeList: function makeList(path) {\n    var list = [];\n    var route = path.substr ? path.split(\".\") : path;\n\n    var walletValue = _.get(this.state.wallet, path);\n\n    if (walletValue !== undefined) {\n      if (!_.isObjectLike(walletValue)) {\n        list.push({\n          src: \"wallet\",\n          value: walletValue,\n          path: [],\n          srcPath: path,\n          version: 1\n        });\n        return list;\n      }\n\n      walletValue = _.cloneDeep(walletValue);\n      list.push({\n        src: \"wallet\",\n        value: walletValue,\n        path: [],\n        srcPath: path,\n        version: 1\n      });\n    }\n\n    var meta = this.state.meta;\n\n    for (var i = 0; i < route.length; i++) {\n      if (!meta) break;\n\n      if (meta.loader) {\n        var item = {\n          src: \"root\",\n          loader: meta.loader,\n          path: [],\n          srcPath: route.slice(0, i),\n          select: route.slice(i)\n        };\n        list.push(item);\n      }\n\n      meta = meta[route[i]];\n    }\n\n    var rootPath = route;\n\n    var iterate = function iterate(obj, route, list) {\n      if (!obj) return;\n\n      if (obj.loader) {\n        var _item = {\n          src: \"sub\",\n          loader: obj.loader,\n          path: route,\n          srcPath: rootPath.concat(route)\n        };\n        list.push(_item);\n      }\n\n      for (var _i in obj) {\n        if (_i == \"loader\") continue;\n        iterate(obj[_i], route.concat(_i), list);\n      }\n    };\n\n    iterate(meta, [], list);\n    return list;\n  },\n  silentSet: function silentSet(path, value, skipPathAffected) {\n    this.historyManager.addInfo({\n      type: \"silentSet\",\n      path: path,\n      value: value\n    });\n\n    _.set(this.state.wallet, path, value);\n\n    if (this.state.cache[path]) this.state.cache[path].shouldUpdate = true;\n    if (!skipPathAffected) this.getAffectedPaths(path);\n  },\n  listToValue: function listToValue(list, path) {\n    if (list.length == 1 && list[0].value) return list[0].value;\n    var result = {};\n    this.state.gettingValue[path] = {\n      partialResult: result\n    };\n    var postponedSteps = list;\n    var hasSteps = true;\n    var snoozeCount = 0;\n\n    while (hasSteps) {\n      snoozeCount++;\n\n      if (snoozeCount > 5) {\n        //console.log( \"postponed more than 5 times\", path, result, _.cloneDeep( this.state.gettingValue ) );\n        this.state.cache[path].shouldUpdate = true;\n        return result;\n      }\n\n      list = postponedSteps;\n      postponedSteps = [];\n      hasSteps = false;\n\n      for (var i = 0; i < list.length; i++) {\n        var step = list[i];\n        var value = void 0;\n\n        if (step.value) {\n          value = step.value;\n        } else if (step.loader) {\n          try {\n            value = this.getFromLoader(step, result, path);\n          } catch (e) {\n            if (e == \"postpone\") {\n              this.state.cache[path].shouldUpdate = true;\n              postponedSteps.push(step);\n              hasSteps = true;\n            } else {\n              console.error(e);\n            }\n\n            continue;\n          }\n        }\n\n        if (step.select) value = _.get(value, step.select);\n\n        if (step.path.length) {\n          _.set(result, step.path, value);\n        } else {\n          if (Object.values(result).length == 0) {\n            result = value;\n          } else //console.log( \"merging\" , _.cloneDeep( result ), value, result);\n            _.merge(result, value);\n        }\n      }\n    }\n\n    return result;\n  },\n  loadersCache: {},\n  addLog: function addLog(lhs, rel, rhs, value) {\n    if (!this.state.loadersCache[lhs]) this.state.loadersCache[lhs] = {\n      version: this.state.currentVersion,\n      cachedValue: {}\n    };\n    var xcache = this.state.loadersCache[lhs];\n    if (!xcache[rel]) xcache[rel] = {};\n    xcache[rel][rhs] = value || true;\n  },\n  getFromLoader: function getFromLoader(step, result, requester, force) {\n    var _this = this;\n\n    var srcPath = step.srcPath.join(\".\");\n    var value;\n\n    try {\n      var logger = {\n        add: function add(path, name) {\n          _this.addLog(srcPath, \"dependsOn\", path, {\n            version: true,\n            name: name,\n            path: path,\n            srcPath: srcPath\n          });\n        }\n      };\n      var loader = step.loader;\n\n      if (loader.prism) {\n        if (loader.loadedPrism) loader = loader.loadedPrism;else {\n          var loadedPrism = this.getFromDispatch(loader.prism);\n          loader.loadedPrism = loadedPrism;\n          loader = loadedPrism;\n        }\n      }\n\n      if (loader.load) {\n        if (this.state.cache[srcPath]) {\n          return {};\n        }\n\n        value = loader.load(result, this, logger, step.loader, step);\n\n        _.set(this.state.wallet, srcPath, value);\n\n        this.state.cache[srcPath] = {\n          loader: true,\n          value: {}\n        };\n        return value;\n      }\n\n      if (!force) {\n        var _value = this.checkCache(srcPath);\n\n        if (_value) return _value;\n      }\n\n      if (step.src == \"sub\") this.addLog(requester, \"contains\", srcPath);\n      var oldCache = this.prepareCache(srcPath);\n\n      if (loader.get) {\n        try {\n          var tb = TB.init(result, this, logger, step.loader, step, this.state.loadersCache[srcPath]);\n          if (DataManager.newAPI) value = loader.get(tb, tb.v);else value = loader.get(tb, this, logger, step.loader, step, this.state.loadersCache[srcPath]);\n        } catch (e) {\n          if (e && e.type == \"return\") {\n            value = e.value;\n          } else {\n            throw e;\n          }\n        }\n      }\n\n      if (value === \"forceCache\") {\n        return this.checkCache(srcPath, true);\n      } else if (value !== undefined) {\n        this.setCache(srcPath, value);\n        this.diffCache(oldCache, srcPath);\n        if (loader.updateVersionsMap) this.updateVersionsMap(srcPath);\n\n        _.set(this.state.version, srcPath + \".version\", this.state.currentVersion);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n\n    if (loader && loader.skipCache) this.state.cache[srcPath].shouldUpdate = true;\n    return value;\n  },\n  runUtils: function runUtils(path, args) {\n    var fn = this.getValue(path);\n    if (fn && fn.run) return fn.run.apply(fn, args);\n  },\n  getWallet: function getWallet(path) {\n    return _.get(this.state.wallet, path);\n  },\n  mergeValue: function mergeValue(path, value) {\n    var _this2 = this;\n\n    this.historyManager.addInfo({\n      type: \"mergeValue\",\n      path: path,\n      value: value\n    });\n    var oldValue = path ? _.get(this.state.wallet, path) : this.state.wallet; //this.getValue( path );\n\n    if (!oldValue) {\n      oldValue = {};\n\n      _.set(this.state.wallet, path, oldValue);\n    }\n\n    var changedPaths = [];\n    this.state.currentVersion++;\n    var route = _.isString(path) ? path.split(\".\") : path || [];\n    if (route.length == 1 && route[0] == \"\") route = [];\n    var fn = {\n      addPath: function addPath(relPath) {\n        var fullPath = route.concat(relPath);\n        changedPaths.push(fullPath);\n\n        _.set(_this2.state.version, fullPath.join(\".\") + \".version\", _this2.state.currentVersion);\n      }\n    };\n    this.pauseAll();\n\n    if (_.isObjectLike(value)) {\n      this.setObObj(oldValue, value, fn, []);\n    } else {\n      console.log(\"it's not object\");\n    }\n\n    for (var i in changedPaths) {\n      this.updateVersionForAll(changedPaths[i]);\n      this.getAffectedPaths(changedPaths[i].join(\".\"));\n    }\n\n    this.req_triggers();\n  },\n  pauseAll: function pauseAll() {\n    if (this.state.runningReqTriggers_timer) {\n      this.clearInterval(this.state.runningReqTriggers_timer);\n      delete this.state.runningReqTriggers_timer;\n    }\n\n    if (this.state.runningAgendaTriggers_timer) {\n      this.clearInterval(this.state.runningAgendaTriggers_timer);\n      delete this.state.runningAgendaTriggers_timer;\n    }\n  },\n  setInterval: function setInterval(callback, delay, name) {\n    var stop = false;\n\n    var fn = function fn() {\n      if (stop) return; //console.log( \"interval\", name );\n\n      callback();\n      window.requestAnimationFrame(fn);\n    };\n\n    window.requestAnimationFrame(fn);\n    return function () {\n      stop = true;\n    };\n  },\n  clearInterval: function clearInterval(stopFn) {\n    if (!stopFn) return;\n    return stopFn();\n  },\n  req_triggers: function req_triggers() {\n    var _this3 = this;\n\n    if (this.state.runningReqTriggers_timer) return; //if ( Object.keys( this.affected ).length == 0 ) return;\n\n    this.state.runningReqTriggers_timer = this.setInterval(function () {\n      //console.log( \"affected::\", _.cloneDeep(this.affected ) );\n      _this3.asyncTriggers();\n    }, 0, \"triggers\");\n  },\n  asyncTriggers: function asyncTriggers() {\n    var keys = Object.keys(this.affected);\n\n    if (keys.length == 0) {\n      this.clearInterval(this.state.runningReqTriggers_timer); //console.log( \"affected_checked\", this.affected_checked );\n\n      this.affected_checked = {};\n      delete this.state.runningReqTriggers_timer;\n      return;\n    } //console.log( \"checking\", keys[0 ] );\n\n\n    this.affected_checked[keys[0]] = this.affected[keys[0]];\n    delete this.affected[keys[0]];\n    this.lazy_checkTriggers(keys[0]);\n  },\n  req_Agenda: function req_Agenda() {\n    var _this4 = this;\n\n    if (this.state.runningAgendaTriggers_timer) return;\n    if (this.state.agenda.tasks.length == 0) return;\n    this.state.runningAgendaTriggers_timer = this.setInterval(function () {\n      _this4.asyncTriggersAgenda();\n    }, 0, \"agenda\");\n  },\n  asyncTriggersAgenda: function asyncTriggersAgenda() {\n    if (this.state.agenda.tasks.length == 0) {\n      this.clearInterval(this.state.runningAgendaTriggers_timer);\n      delete this.state.runningAgendaTriggers_timer;\n      return;\n    }\n\n    var trigger = this.state.agenda.tasks.shift();\n    if (!trigger) return console.error(trigger); //console.log( \"checking\", keys[0 ] );\n\n    delete this.state.agenda.names[trigger.id];\n    this.runTrigger(trigger, trigger.target, trigger.listener); //this.lazy_checkTriggers( keys[0] );\n  },\n  lazy_checkTriggers: function lazy_checkTriggers(path) {\n    if (this.state.triggers[path]) {\n      if (this.state.agenda.names[path]) return;\n      var triggers = this.state.triggers[path];\n\n      for (var i in triggers) {\n        var trigger = triggers[i];\n        var id = trigger.id || path + \"___\" + i;\n        if (this.state.agenda.names[i]) continue;\n        if (!trigger.path) trigger.target = path;\n        if (!trigger.token) trigger.listener = i;\n        if (!trigger.id) trigger.id = id;\n        this.state.agenda.names[id] = true;\n        this.state.agenda.tasks.push(trigger);\n      }\n\n      this.sortAgenda();\n      this.req_Agenda();\n    }\n  },\n  sortAgenda: function sortAgenda() {\n    this.state.agenda.tasks.sort(function (taskA, taskB) {\n      if (!taskB.salience) return 1;\n      if (!taskA.salience) return -1;\n      return taskA.salience - taskB.salience;\n    });\n  },\n  setObObj: function setObObj(target, source, fn, path) {\n    for (var i in source) {\n      if (source[i] === undefined) continue;else if (_.isObjectLike(source[i])) {\n        if (!target[i]) target[i] = {};\n        this.setObObj(target[i], source[i], fn, path.concat(i));\n      } else {\n        if (target[i] != source[i]) {\n          target[i] = source[i];\n          fn.addPath(path.concat(i));\n        }\n      }\n    }\n  },\n  appendToArray: function appendToArray(path, value, setVersion) {\n    var target = _.get(this.state.wallet, path);\n\n    if (!target) {\n      value = [value];\n      return this.set(path, value, false, setVersion);\n    }\n\n    var index = target.length;\n    var route = _.isArray(path) ? path : path.split(\".\");\n    route.push(index);\n    return this.set(route, value, false, setVersion);\n  },\n  setByLoader: function setByLoader(path, value) {\n    if (_.isArray(path)) path = path.join(\".\");\n\n    var prism = _.get(this.state.meta, path);\n\n    if (!prism || !prism.loader || !prism.loader.set) return false;\n    var tb = TB.init({}, this, {}, prism.loader, {}, this.state.loadersCache[path]);\n    value = prism.loader.set(tb, value);\n    return true;\n  },\n  set: function set(path, value, isLoaders, setVersion) {\n    this.historyManager.startStack({\n      type: \"set\",\n      path: path,\n      value: value\n    });\n\n    try {\n      if (this.setByLoader(path, value)) {\n        return;\n      }\n\n      var target = isLoaders ? this.state.meta : this.state.wallet;\n\n      _.set(target, path, value); //if ( setVersion ) {\n\n\n      this.state.currentVersion++; //}\n\n      this.updateVersionForAll(path.split(\".\"));\n\n      _.set(this.state.version, path + \".version\", this.state.currentVersion);\n\n      var strPath = _.isArray(path) ? path.join(\".\") : path;\n      this.getAffectedPaths(strPath);\n      this.req_triggers();\n    } catch (e) {\n      console.error(e);\n    } finally {\n      this.historyManager.endStack();\n    }\n  },\n  affected: {},\n  affected_checked: {},\n  markChangeOn: function markChangeOn(path, skipTrigger) {\n    this.getAffectedPaths(path);\n    if (!skipTrigger) this.req_triggers();\n  },\n  getAffectedPaths: function getAffectedPaths(path) {\n    if (this.state.cache[path]) {\n      this.state.cache[path].shouldUpdate = true;\n    }\n\n    if (this.affected[path]) {\n      return;\n    }\n\n    this.affected[path] = {\n      version: this.state.currentVersion,\n      state: 1\n    };\n    var route = path.split(\".\");\n    var strPath = route[0];\n    this.getAffectedPaths(route[0]);\n\n    for (var i = 1; i < route.length - 1; i++) {\n      strPath += \".\" + route[i];\n      this.getAffectedPaths(strPath);\n    }\n\n    var influenced = this.getInfluenced(path);\n\n    for (var i in influenced) {\n      this.getAffectedPaths(influenced[i]);\n    }\n  },\n  markChangedPaths: function markChangedPaths(path) {\n    //let influenced = this.getInfluenced( path );\n    var route = path.split(\".\");\n    var strPath = route[0];\n\n    for (var i = 1; i < route.length; i++) {\n      strPath += \".\" + route[i];\n      if (this.state.cache[strPath]) this.state.cache[strPath].shouldUpdate = true;\n      this.checkTriggers(strPath);\n      this.setUpdateFlag(strPath);\n    }\n  },\n  changedPaths: {},\n  setUpdateFlag: function setUpdateFlag(path) {\n    var influenced = this.getInfluenced(path);\n    var cache = this.state.cache;\n\n    for (var i in influenced) {\n      if (cache[influenced[i]]) {\n        cache[influenced[i]].shouldUpdate = true;\n      }\n\n      this.setUpdateFlag(cache[influenced[i]]);\n      this.checkTriggers(influenced[i]);\n    }\n  },\n  checkTriggers: function checkTriggers(path) {\n    if (this.state.triggers[path]) {\n      this.runTriggers(this.state.triggers[path], path);\n    }\n  },\n  runTriggers: function runTriggers(collection, path) {\n    for (var i in collection) {\n      this.runTrigger(collection[i], path, i);\n    }\n  },\n  runTrigger: function runTrigger(trigger, path, token) {\n    if (_.isFunction(trigger.run)) {\n      return trigger.run(trigger, path, token);\n    }\n\n    var fn = _.get(this.state.wallet, trigger.run);\n\n    if (_.isFunction(fn)) return fn(trigger, path, token);else if (fn.run) return fn.run(trigger, path, token);\n  },\n  run: function run(path, value) {},\n  fetchValues: function fetchValues(target, map, wallet, master, logger, onlyPaths) {\n    for (var i in map) {\n      if (i == \"type\") continue;\n      var value = map[i];\n\n      if (_.isString(value)) {\n        if (value.charAt(0) == \"$\") {\n          var _path = value.substr(2);\n\n          if (logger) logger.add(_path, i);\n          value = master.getValue(_path);\n        } else if (onlyPaths) {\n          var _path2 = value;\n          if (logger) logger.add(_path2, i);\n          value = master.getValue(_path2);\n        }\n      } else if (value.KEY == \"fullPath\") {\n        path = value.path.join(\".\");\n        if (logger) logger.add(path, i);\n        value = master.getValue(path);\n      }\n\n      if (value === undefined) throw \"postpone\";\n      var slot = i;\n      target[slot] = value;\n      if (!target.src) target.src = {};\n      target.src[slot] = {\n        key: map[i],\n        slot: i\n      };\n    }\n\n    return target;\n  },\n  setCombined: function setCombined(path, value) {\n    this.historyManager.startStack({\n      type: \"setCombined\",\n      path: path,\n      value: value\n    });\n    var payload = {\n      loaders: {},\n      loadersPaths: [],\n      basePath: path.split(\".\"),\n      value: value,\n      pins: [],\n      afterOp: []\n    };\n    var isEmpty = this.iterate(value, [], payload);\n\n    if (payload.pins.length) {\n      var currentPins = {};\n\n      for (var i in payload.pins) {\n        var _pin = payload.pins[i];\n\n        var name = _pin.value || _pin.path.slice(-1)[0];\n\n        currentPins[name] = {\n          path: _pin.path,\n          fullPath: payload.basePath.concat(_pin.path)\n        };\n      }\n\n      var pins = _.get(this.state.pins, path + \".pins\");\n\n      if (!pins) _.set(this.state.pins, path + \".pins\", pins = {});\n\n      _.merge(pins, currentPins);\n    }\n\n    if (payload.afterOp.length) {\n      for (var i in payload.afterOp) {\n        var op = payload.afterOp[i];\n\n        if (op.type == \"gluePin\") {\n          var pin = pins[op.pin];\n          var pinKey = {\n            KEY: \"fullPath\",\n            path: pin.fullPath\n          };\n\n          if (op.isLoader) {\n            _.set(payload.loaders, op.dest, pinKey);\n          } else {\n            _.set(value, op.dest, pinKey);\n          }\n        } else if (op.type == \"flags\") {\n          if (op.flags.hasVersion) {\n            this.updateVersion(op.path);\n          }\n        }\n      }\n    }\n\n    if (!isEmpty) this.set(path, value, false, true);\n\n    if (payload.hasLoaders) {\n      //console.log( \"loaders\", payload.loadersPaths );\n      this.set(path, payload.loaders, true, true);\n\n      for (var i in payload.loadersPaths) {\n        var lPath = payload.loadersPaths[i];\n        this.setCache(lPath.join(\".\"), {}, true);\n\n        var loader = _.get(this.state.meta, lPath);\n\n        if (loader.loader && loader.loader.autostart) {\n          this.state.toStart.push({\n            path: lPath.join(\".\")\n          }); //this.getValue(lPath.join(\".\"));\n        } //console.log( \"loader\", loader );\n\n      }\n    }\n\n    this.historyManager.endStack();\n  },\n  runToStart: function runToStart() {\n    var toStart = this.state.toStart;\n\n    while (toStart.length) {\n      var item = toStart.shift();\n      this.getValue(item.path);\n    }\n  },\n  buildModel: function buildModel(input, path) {\n    var modelName = input.MODEL;\n    input = _.cloneDeep(input);\n    var tokens;\n\n    if (modelName.indexOf(\":\") != -1) {\n      tokens = modelName.split(\":\");\n      modelName = tokens.shift();\n      input.tokens = tokens;\n    }\n\n    var mold = this.getValue(modelName);\n\n    if (mold.handleTokens && tokens) {\n      mold.handleTokens(input, tokens, path);\n    }\n\n    var obj = _.cloneDeep(mold.modelObj);\n\n    if (mold.modelSpec) {\n      var spec = mold.modelSpec;\n\n      if (spec.ops) {\n        for (var i in spec.ops) {\n          var op = spec.ops[i];\n\n          if (op.type == \"replaceValue\") {\n            var value = _.get(input, op.source);\n\n            if (!op.dest) obj = value;else _.set(obj, op.dest, value);\n          } else if (op.type == \"eval\") {\n            var _value2 = op.fn(input, op);\n\n            console.log(_value2);\n\n            _.set(input, op.dest, _value2);\n          }\n        }\n      }\n\n      if (spec.isLoader) {\n        obj = {\n          loader: obj\n        };\n      }\n    }\n\n    if (input.pin !== undefined) obj.pin = input.pin;\n    this.historyManager.addInfo({\n      type: \"buildModel\",\n      path: path,\n      input: input,\n      obj: obj\n    });\n    return obj;\n  },\n  iterate: function iterate(obj, path, payload) {\n    while (obj && obj.MODEL) {\n      var newObj = this.buildModel(obj, payload.basePath.concat(path));\n\n      for (var i in obj) {\n        delete obj[i];\n      }\n\n      _.merge(obj, newObj); //really ? it was easier that way then to put inside the loop and on setCombined ? really ? \n      //yea, keeping the traditional approach\n\n    }\n\n    var isEmpty = true;\n\n    for (var i in obj) {\n      var subPath = path.concat(i);\n\n      if (i == \"pin\") {\n        payload.pins.push({\n          subPath: subPath,\n          path: path,\n          value: obj[i]\n        });\n        delete obj[i];\n      } else if (i == \"loader\") {\n        this.setLoader(payload.loaders, path, obj[i], payload.basePath, payload);\n        payload.loadersPaths.push(payload.basePath.concat(path));\n        delete obj[i];\n        payload.hasLoaders = true;\n      } else if (i == \"flags\") {\n        payload.afterOp.push({\n          type: \"flags\",\n          path: payload.basePath.concat(path).join(\".\"),\n          relPath: path,\n          flags: obj.flags\n        });\n      } else if (_.isString(obj[i]) && obj[i].charAt(0) == \"%\") {\n        obj[i] = this.getStaticValue(obj[i], i, obj, subPath, payload);\n        isEmpty = false;\n      } else if (_.isObjectLike(obj[i])) {\n        var subIsEmpty = this.iterate(obj[i], subPath, payload);\n\n        if (subIsEmpty) {//delete obj[ i ];\n        } else {\n          isEmpty = false;\n        }\n\n        isEmpty = false;\n      } else {\n        isEmpty = false;\n      }\n    }\n\n    return isEmpty;\n  },\n  getStaticValue: function getStaticValue(slot, index, obj, path, payload) {\n    if (slot == \"%PATH\") return payload.basePath.concat(path);else {\n      payload.afterOp.push({\n        type: \"gluePin\",\n        dest: path,\n        pin: slot.substring(1)\n      });\n      return {\n        KEY: \"relative path\"\n      };\n    }\n  },\n  getUID: function getUID() {\n    return this.state.nextUID++;\n  },\n  setTrigger: function setTrigger(target, listener, trigger) {\n    if (!this.state.triggers[target]) this.state.triggers[target] = {};\n    this.state.triggers[target][listener] = trigger;\n  },\n  getTrigger: function getTrigger(target, listener) {\n    if (!this.state.triggers[target]) return null;\n    return this.state.triggers[target][listener];\n  },\n  remTrigger: function remTrigger(target, listener) {\n    if (!this.state.triggers[target]) return;\n    delete this.state.triggers[target][listener];\n  },\n  setLoader: function setLoader(loaders, path, value, basePath, payload) {\n    if (_.isString(value)) {\n      var listenerPath = basePath.concat(path).join(\".\");\n      var oldTrigger = this.getTrigger(value, listenerPath);\n      if (oldTrigger && oldTrigger.path) this.remTrigger(oldTrigger.path, listenerPath);\n      this.setTrigger(value, listenerPath, {\n        run: \"base.updateLoader\",\n        loaderPath: value,\n        destination: listenerPath\n      });\n      value = this.getValue(value);\n    }\n\n    this.prepareLoader(value, basePath, path.concat(\"loader\"), payload);\n\n    _.set(loaders, path.concat(\"loader\"), value); //this.markChangeOn( path, true );\n\n  },\n  prepareLoader: function prepareLoader(loader, basePath, loaderPath, payload) {\n    this.deepTransformObj(loader, [], function (obj, slot, path) {\n      if (_.isString(obj) && obj.charAt(0) == \"%\") {\n        if (obj == \"%PATH\") {\n          return payload.basePath.concat(loaderPath);\n        }\n\n        payload.afterOp.push({\n          type: \"gluePin\",\n          dest: loaderPath.concat(path),\n          pin: obj.substring(1),\n          isLoader: true\n        });\n        return {\n          x: 12\n        };\n      }\n    });\n  },\n  deepTransformObj: function deepTransformObj(obj, path, test) {\n    if (!obj || !_.isObject(obj)) return;\n\n    for (var i in obj) {\n      var value = test(obj[i], i, path.concat([i]));\n\n      if (value !== undefined) {\n        obj[i] = value;\n        continue;\n      }\n\n      if (_.isObject(obj[i])) this.deepTransformObj(obj[i], path.concat([i]), test);\n    }\n  },\n  setMap: function setMap(map) {\n    for (var i in map) {\n      this.setCombined(i, map[i]);\n    }\n  },\n  getFromDispatch: function getFromDispatch(path) {\n    return this.getValue(path);\n  },\n  getVersion: function getVersion(path) {\n    var route = path.split(\".\");\n    var version = -1;\n    var versionsTree = this.state.version;\n\n    for (var i = 0; i < route.length; i++) {\n      var slot = route[i];\n      if (!versionsTree[slot]) return version;\n      versionsTree = versionsTree[slot];\n      if (versionsTree.version) version = versionsTree.version;\n    }\n\n    return version;\n  },\n  getVersionTree: function getVersionTree(path) {\n    var versionsTree = this.state.version;\n    return _.get(versionsTree, path);\n  },\n  updateVersionForAll: function updateVersionForAll(path) {\n    for (var i = 0; i < path.length; i++) {\n      _.set(this.state.version, path.slice(0, i).concat(\"version\"), this.state.currentVersion);\n      /*\n      \n      var node = _.get( this.state.version, path.slice(0,i) );\n      if ( !node ) break;\n      if ( node.version ) node.version = this.state.currentVersion;\n      */\n\n    }\n  },\n  updateVersion: function updateVersion(path) {\n    _.set(this.state.version, path + \".version\", this.state.currentVersion);\n  },\n  objectDiff: function difference(oldObject, newObject) {\n    function changes(oldO, newO) {\n      if (!_.isObject(oldO) || !_.isObject(newO)) return {\n        change: {\n          from: oldO,\n          to: newO\n        }\n      };\n      var result = {};\n      var hasChanges = false;\n\n      for (var i in newO) {\n        if (oldO[i] === undefined) {\n          result[i] = {\n            change: {\n              from: undefined,\n              to: newO[i],\n              type: \"added\"\n            }\n          };\n          hasChanges = true;\n        } else if (_.isFunction(newO[i]) && oldO[i] && newO[i].toString() != oldO[i].toString()) {\n          result[i] = {\n            change: {\n              from: oldO[i],\n              to: newO[i],\n              type: \"function changed\"\n            }\n          };\n          hasChanges = true;\n        } else if (_.isObject(newO[i])) {\n          var subChanges = changes(oldO[i], newO[i]);\n\n          if (subChanges) {\n            result[i] = subChanges;\n            hasChanges = true;\n          }\n        } else if (newO[i] != oldO[i]) {\n          result[i] = {\n            change: {\n              from: oldO[i],\n              to: newO[i],\n              type: \"changed\"\n            }\n          };\n          hasChanges = true;\n        }\n      }\n\n      for (var i in oldO) {\n        if (newO[i] === undefined) {\n          hasChanges = true;\n          result[i] = {\n            change: {\n              from: oldO[i],\n              to: null,\n              type: \"deleted\"\n            }\n          };\n        }\n      }\n\n      return hasChanges ? result : null;\n    }\n\n    return changes(oldObject, newObject);\n  },\n  act: function act(path, args, tb) {\n    var value = _.isObject(path) ? path : this.getValue(path);\n\n    if (!tb) {\n      tb = this.tb();\n    }\n\n    var act = ACT.init(value, this, args, path, tb);\n    return act;\n  },\n  tb: function tb() {\n    var tb = TB.init({}, this, null, {}, {}, {});\n    return tb;\n  }\n};\n\nvar DataManager = _DataManager.setup();\n\nvar ACT = {\n  master: null,\n  actions: null,\n  args: null,\n  init: function init(actions, master, args, path, tb) {\n    var item = Object.create(this);\n    item.master = master;\n    item.actions = actions;\n    item.args = args;\n    item.path = path;\n    item.tb = tb;\n    return item;\n  },\n  run: function run(name, args) {\n    return this.actions[name].apply(this.actions, [args, this.tb]);\n  }\n};\nvar TB = {\n  master: null,\n  logger: null,\n  spec: null,\n  step: null,\n  cache: null,\n  v: null,\n  init: function init(wallet, master, logger, spec, step, cache) {\n    var item = Object.create(this);\n    Object.assign(item, {\n      wallet: wallet,\n      master: master,\n      logger: logger,\n      spec: spec,\n      step: step,\n      cache: cache\n    });\n    item.v = {};\n    return item;\n  },\n  act: function act(path, args) {\n    var act = this.master.act(path, args, this);\n    return act;\n  },\n  go: function go(name, args) {\n    if (!this.toolbox) this.toolbox = DataManager.getValue(\"toolBox\");\n\n    if (!this.toolbox[name]) {\n      console.log(\"no \", name);\n      return null;\n    }\n\n    if (this.toolbox[name].run) return this.toolbox[name].run(args, this);else if (_.isFunction(this.toolbox[name])) return this.toolbox[name](args, this);\n  },\n  path: function path() {\n    return this.step.srcPath.join(\".\");\n  },\n  fetch: function fetch(paths, target) {\n    return this.run_fetch(paths, target);\n  },\n  run_fetch: function run_fetch(paths, target, prefix) {\n    var _this5 = this;\n\n    var singlePath = false;\n\n    if (_.isString(paths) || paths.KEY) {\n      singlePath = true;\n      paths = {\n        SINGLEPATH: paths\n      };\n    }\n\n    var values = {};\n    this.master.fetchValues(values, paths, this.wallet, this.master, {\n      add: function add(path, slot) {\n        if (!_this5.logger) return;\n        var name = slot !== \"SINGLEPATH\" ? (prefix || []).concat(slot) : prefix || [];\n\n        _this5.logger.add(path, name.join(\".\"));\n      }\n    }, true);\n\n    for (var i in values) {\n      if (values[i] && values[i].type == \"routes\") {\n        var subPrefix = i != \"SINGLEPATH\" ? (prefix || []).concat(i) : prefix;\n        values[i] = this.run_fetch(values[i], null, subPrefix);\n      } else if (values[i] && values[i].type == \"value\") {//let subPrefix = i != \"SINGLEPATH\" ? (prefix || [] ).concat( i ) : prefix;\n        //values[ i ] = this.run_fetch( values[ i ], null, subPrefix )\n      } else if (values[i] && _.isString(values[i]) && values[i].charAt(0) == \"$\") {\n        var _subPrefix = i != \"SINGLEPATH\" ? (prefix || []).concat(i) : prefix;\n\n        values[i] = this.run_fetch(values[i].substring(2), null, _subPrefix);\n      }\n    }\n\n    if (singlePath) values = values.SINGLEPATH;\n\n    if (target) {\n      if (target.src) {\n        var src = values.src;\n        delete values.src;\n\n        _.merge(target.src, src);\n      }\n\n      Object.assign(target, values);\n      return target;\n    } else {\n      return values;\n    }\n  },\n  pathOf: function pathOf(path) {\n    var path = this.v.src[path];\n    if (path.key) return path.key;\n    if (_.isString(path)) return path;\n  },\n  set: function set(path, value) {\n    var target = this.v;\n    var route = _.isString(path) ? path.split(\".\") : path;\n    var last_src = null;\n\n    for (var i = 0; i < route.length; i++) {\n      var slot = route[i];\n\n      if (target.src && target.src[slot]) {\n        last_src = {\n          src: target.src[slot],\n          left: route.slice(i + 1)\n        };\n      }\n\n      if (!target[slot]) {\n        break;\n      }\n\n      target = target[slot];\n    }\n\n    if (last_src) {\n      var basePath = _.isString(last_src.src.key) ? last_src.src.key.split(\".\") : last_src.src.key.path;\n      var fullPath = basePath.concat(last_src.left).join(\".\");\n      this.master.set(fullPath, value);\n    }\n  },\n  detach: function detach() {\n    var detached = Object.create(this);\n    detached.v = {};\n    detached.logger = null;\n    return detached;\n  },\n  feed: function feed(path) {\n    var feedModel = this.master.getValue(path);\n    var feed = feedModel.init();\n    var start = 1;\n\n    for (var i = start; i < arguments.length; i++) {\n      feed.in(arguments[i]);\n    }\n\n    return feed;\n  }\n};\n\ntry {\n  if (!window.DataManager) {\n    window.DataManager = DataManager;\n    window._DataManager = _DataManager;\n  } //eval( 'export default DataManager' );\n\n} catch (e) {}","module.exports = __webpack_public_path__ + \"static/media/logo.06a44ff7.svg\";"],"sourceRoot":""}