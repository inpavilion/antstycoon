(window.webpackJsonp=window.webpackJsonp||[]).push([[1],Array(22).concat([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(1),i=u(r),o=(u(a(8)),u(a(25))),s=u(a(27)),l=u(a(34));function u(t){return t&&t.__esModule?t:{default:t}}a(35);var c={name:"bee",color:"#5adbee",main:"\nComponents : \n    Bar\n    Deck\n    Data\nDynamicDriver\n    workarounds : \n        ad-hoc data preparation before render\n        input component to swing between managed and unmanaged component\nPrisms\n    redirect path values \nCleanups\n    added managers folder\nIDEAS\n    \n    "},d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state={version:0},a.mainRef=i.default.createRef(),a.inputRef=i.default.createRef(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"componentDidMount",value:function(){var t=this;window.targetView=this;window.setTimeout(function(){(0,o.default)(t.inputRef.current).focus();console.log((0,o.default)("body").scrollTop())},1e3)}},{key:"render",value:function(){return DataManager.getValue("startup"),i.default.createElement("div",{className:"list",ref:this.mainRef},i.default.createElement(l.default,{name:"bee",ants:c}),i.default.createElement("style",null,"\n            .deb { border : 1px solid red;}\n            * { } \n            .list { }\n        "),i.default.createElement(s.default,{dataStorePath:"app.ui"}),i.default.createElement("input",{ref:this.inputRef,style:{fontSize:40,position:"relative",top:"2000px"},placeholder:"elefant"}))}}]),e}();e.default=d},function(t,e){var a={state:{gettingValue:{},wallet:{},meta:{},cache:{},version:{},loadersCache:{},triggers:{},currentVersion:1,dependencies:{},nextUID:1,agenda:{names:{},tasks:[]}},runFn:function(t,e){let a=t.split("."),n=a.pop(),r=a.join("."),i=this.getValue(r);if(i[n])return _.isFunction(i[n])?i[n](e,t,this):_.isFunction(i[n].run)?i[n].run(e,t,this):void 0},getInfluenced:function(t){let e=[],a=_.get(this.state.dependencies,t+".DEP");if(!a)return[];for(var n in a)e.push(n),e=e.concat(this.getInfluenced(n));return e},getValue:function(t,e){let a=t.split("."),n=this.checkCache(t);if(n)return n;let r=this.prepareCache(t);if(!e)for(let t=0;t<a.length;t++){let e=a.slice(0,t).join(".");if(this.state.gettingValue[e]){let n=this.state.gettingValue[e].partialResult,r=a.slice(t),i=_.get(n,r);if(void 0!==i)return i}}this.state.gettingValue[t]=!0;let i=this.makeList(t);return n=this.listToValue(i,t),delete this.state.gettingValue[t],void 0!==n&&(this.setCache(t,n),this.diffCache(r,t)),n},setCache:function(t,e){this.state.cache[t]={value:e,shouldUpdate:!1,version:this.state.currentVersion}},checkCache:function(t){return this.state.cache[t]?this.state.cache[t].shouldUpdate?null:this.state.cache[t].value:null},prepareCache:function(t){var e=this.state.loadersCache[t];if(!e)return{contains:{},dependsOn:{}};let a={contains:e.contains||{},dependsOn:e.dependsOn||{}};return delete e.contains,delete e.dependsOn,a},diffCache:function(t,e){var a=this.state.loadersCache[e]||{};let n=this.state.dependencies,r=function(t,e){let a=_.get(n,t+".DEP");a||_.set(n,t+".DEP",a={}),a[e]=!0},i=function(t,e){let a=_.get(n,t+".DEP");a&&delete a[e]},o=function(t,a){for(var n in t)a&&a[n]||r(n,e);for(var n in a)t&&t[n]||i(n,e)};o(a.contains,t.contains),o(a.dependsOn,t.dependsOn)},makeList:function(t){let e=[],a=t.substr?t.split("."):t,n=_.get(this.state.wallet,t);if(void 0!==n){if(!_.isObjectLike(n))return e.push({src:"wallet",value:n,path:[],srcPath:t,version:1}),e;n=_.cloneDeep(n),e.push({src:"wallet",value:n,path:[],srcPath:t,version:1})}let r=this.state.meta;for(let t=0;t<a.length&&r;t++){if(r.loader){let n={src:"root",loader:r.loader,path:[],srcPath:a.slice(0,t),select:a.slice(t)};e.push(n)}r=r[a[t]]}let i=a,o=function(t,e,a){if(t){if(t.loader){let n={src:"sub",loader:t.loader,path:e,srcPath:i.concat(e)};a.push(n)}for(let n in t)"loader"!=n&&o(t[n],e.concat(n),a)}};return o(r,[],e),e},silentSet:function(t,e){_.set(this.state.wallet,t,e),this.state.cache[t]&&(this.state.cache[t].shouldUpdate=!0),this.getAffectedPaths(t)},listToValue:function(t,e){if(1==t.length&&t[0].value)return t[0].value;let a={};this.state.gettingValue[e]={partialResult:a};let n=t,r=!0,i=0;for(;r;){if(++i>5)return console.log("postponed more than 5 times",e,a,_.cloneDeep(this.state.gettingValue)),this.state.cache[e].shouldUpdate=!0,a;t=n,n=[],r=!1;for(let i=0;i<t.length;i++){let o,s=t[i];if(s.value)o=s.value;else if(s.loader)try{o=this.getFromLoader(s,a,e)}catch(t){"postpone"==t&&(this.state.cache[e].shouldUpdate=!0,n.push(s),r=!0);continue}s.select&&(o=_.get(o,s.select)),s.path.length?_.set(a,s.path,o):_.merge(a,o)}}return a},loadersCache:{},addLog:function(t,e,a,n){this.state.loadersCache[t]||(this.state.loadersCache[t]={version:this.state.currentVersion,cachedValue:{}});var r=this.state.loadersCache[t];r[e]||(r[e]={}),r[e][a]=n||!0},getFromLoader:function(t,e,a,n){let r,i=t.srcPath.join(".");try{let l={add:t=>{this.addLog(i,"dependsOn",t)}};var o=t.loader;if(o.prism)if(o.loadedPrism)o=o.loadedPrism;else{var s=this.getFromDispatch(o.prism);o.loadedPrism=s,o=s}if(o.load)return this.state.cache[i]?{}:(r=o.load(e,this,l,t.loader,t),_.set(this.state.wallet,i,r),this.state.cache[i]={loader:!0,value:{}},r);if(!n){let t=this.checkCache(i);if(t)return t}"sub"==t.src&&this.addLog(a,"contains",i);let u=this.prepareCache(i);o.get&&(r=o.get(e,this,l,t.loader,t)),void 0!==r&&(this.setCache(i,r),this.diffCache(u,i))}catch(t){console.error(t)}return r},mergeValue:function(t,e){let a=_.get(this.state.wallet,t),n=[],r=_.isString(t)?t.split("."):t,i={addPath:function(t){n.push(r.concat(t))}};for(var o in this.pauseAll(),_.isObjectLike(e)?this.setObObj(a,e,i,[]):console.log("it's not object"),n)this.getAffectedPaths(n[o].join("."));this.req_triggers()},pauseAll:function(){this.state.runningReqTriggers_timer&&(window.clearInterval(this.state.runningReqTriggers_timer),delete this.state.runningReqTriggers_timer),this.state.runningAgendaTriggers_timer&&(window.clearInterval(this.state.runningAgendaTriggers_timer),delete this.state.runningAgendaTriggers_timer)},setInterval:function(t){var e=!1,a=()=>{e||(t(),window.requestAnimationFrame(a))};return window.requestAnimationFrame(a),()=>{e=!0}},clearInterval:function(t){if(t)return t()},req_triggers:function(){this.state.runningReqTriggers_timer||(this.state.runningReqTriggers_timer=this.setInterval(()=>{this.asyncTriggers()},0))},asyncTriggers:function(){let t=Object.keys(this.affected);0==t.length&&(this.clearInterval(this.state.runningReqTriggers_timer),delete this.state.runningReqTriggers_timer),delete this.affected[t[0]],this.lazy_checkTriggers(t[0])},req_Agenda:function(){this.state.runningAgendaTriggers_timer||(this.state.runningAgendaTriggers_timer=this.setInterval(()=>{this.asyncTriggersAgenda()},0))},asyncTriggersAgenda:function(){if(0==this.state.agenda.tasks.length)return this.clearInterval(this.state.runningAgendaTriggers_timer),void delete this.state.runningAgendaTriggers_timer;let t=this.state.agenda.tasks.shift();if(!t)return console.error(t);delete this.state.agenda.names[t.id],this.runTrigger(t,t.target,t.listener)},lazy_checkTriggers:function(t){if(this.state.triggers[t]){if(this.state.agenda.names[t])return;let a=this.state.triggers[t];for(var e in a){let n=a[e],r=n.id||t+"___"+e;this.state.agenda.names[e]||(n.path||(n.target=t),n.token||(n.listener=e),n.id||(n.id=r),this.state.agenda.names[r]=!0,this.state.agenda.tasks.push(n))}this.sortAgenda(),this.req_Agenda()}},sortAgenda:function(){this.state.agenda.tasks.sort((t,e)=>e.salience?t.salience?t.salience-e.salience:-1:1)},setObObj:function(t,e,a,n){for(var r in e)void 0!==e[r]&&(_.isObjectLike(e[r])?(t[r]||(t[r]={}),this.setObObj(t[r],e[r],a,n.concat(r))):t[r]!=e[r]&&(t[r]=e[r],a.addPath(n.concat(r))))},set:function(t,e,a,n){try{let i=a?this.state.meta:this.state.wallet;_.set(i,t,e),n&&this.state.currentVersion++,_.set(this.state.version,t+".version",this.state.currentVersion);var r=_.isArray(t)?t.join("."):t;this.getAffectedPaths(r),this.req_triggers()}catch(t){console.error(t)}},affected:{},markChangeOn:function(t,e){this.getAffectedPaths(t),e||this.req_triggers()},getAffectedPaths:function(t){if(this.state.cache[t]&&(this.state.cache[t].shouldUpdate=!0),this.affected[t])return;this.affected[t]={version:this.state.currentVersion,state:1};let e=t.split("."),a=e[0];for(var n=1;n<e.length;n++)a+="."+e[n],this.getAffectedPaths(a);let r=this.getInfluenced(t);for(var n in r)this.getAffectedPaths(r[n])},markChangedPaths:function(t){let e=t.split("."),a=e[0];for(var n=1;n<e.length;n++)a+="."+e[n],this.state.cache[a]&&(this.state.cache[a].shouldUpdate=!0),this.checkTriggers(a),this.setUpdateFlag(a)},changedPaths:{},setUpdateFlag:function(t){let e=this.getInfluenced(t);var a=this.state.cache;for(var n in e)a[e[n]]&&(a[e[n]].shouldUpdate=!0),this.setUpdateFlag(a[e[n]]),this.checkTriggers(e[n])},checkTriggers:function(t){this.state.triggers[t]&&this.runTriggers(this.state.triggers[t],t)},runTriggers:function(t,e){for(var a in t)this.runTrigger(t[a],e,a)},runTrigger:function(t,e,a){if(_.isFunction(t.run))return t.run(t,e,a);var n=_.get(this.state.wallet,t.run);return _.isFunction(n)?n(t,e,a):n.run?n.run(t,e,a):void 0},run:function(t,e){},fetchValues:function(t,e,a,n,r,i){for(var o in e){let a=e[o];if(_.isString(a))if("$"==a.charAt(0)){let t=a.substr(2);r&&r.add(t),a=n.getValue(t)}else if(i){let t=a;r&&r.add(t),a=n.getValue(t)}if(void 0===a)throw"postpone";t[o]=a}return t},setCombined:function(t,e){var a={loaders:{},basePath:t.split("."),value:e};this.iterate(e,[],a)||this.set(t,e,!1,!0),Object.keys(a.loaders).length&&this.set(t,a.loaders,!0,!0)},iterate:function(t,e,a){var n=!0;for(var r in t){let i=e.concat(r);if("loader"==r)this.setLoader(a.loaders,e,t[r],a.basePath),delete t[r];else if(_.isString(t[r])&&"%"==t[r].charAt(0))t[r]=this.getStaticValue(t[r],r,t,i,a),n=!1;else if(_.isObjectLike(t[r])){this.iterate(t[r],i,a)||(n=!1),n=!1}else n=!1}return n},getStaticValue:function(t,e,a,n,r){if("%PATH"==t)return r.basePath.concat(n)},getUID:function(){return this.state.nextUID++},setTrigger:function(t,e,a){this.state.triggers[t]||(this.state.triggers[t]={}),this.state.triggers[t][e]=a},getTrigger:function(t,e){return this.state.triggers[t]?this.state.triggers[t][e]:null},remTrigger:function(t,e){this.state.triggers[t]&&delete this.state.triggers[t][e]},setLoader:function(t,e,a,n){if(_.isString(a)){var r=n.concat(e).join("."),i=this.getTrigger(a,r);i&&i.path&&this.remTrigger(i.path,r),this.setTrigger(a,r,{run:"base.updateLoader",loaderPath:a,destination:r}),a=this.getValue(a)}_.set(t,e.concat("loader"),a)},setMap:function(t){for(var e in t)this.setCombined(e,t[e])},getFromDispatch:function(t){return this.getValue(t)}};try{window.DataManager||(window.DataManager=a)}catch(t){}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findInArray=function(t,e){for(var a=0,n=t.length;a<n;a++)if(e.apply(e,[t[a],a,t]))return t[a]},e.isFunction=function(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)},e.isNum=function(t){return"number"==typeof t&&!isNaN(t)},e.int=function(t){return parseInt(t,10)},e.dontSetMe=function(t,e,a){if(t[e])return new Error("Invalid prop "+e+" passed to "+a+" - do not set this, set it on the child.")}},,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.matchesSelector=s,e.matchesSelectorAndParentsTo=function(t,e,a){var n=t;do{if(s(n,e))return!0;if(n===a)return!1;n=n.parentNode}while(n);return!1},e.addEvent=function(t,e,a){if(!t)return;t.attachEvent?t.attachEvent("on"+e,a):t.addEventListener?t.addEventListener(e,a,!0):t["on"+e]=a},e.removeEvent=function(t,e,a){if(!t)return;t.detachEvent?t.detachEvent("on"+e,a):t.removeEventListener?t.removeEventListener(e,a,!0):t["on"+e]=null},e.outerHeight=function(t){var e=t.clientHeight,a=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,n.int)(a.borderTopWidth),e+=(0,n.int)(a.borderBottomWidth)},e.outerWidth=function(t){var e=t.clientWidth,a=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,n.int)(a.borderLeftWidth),e+=(0,n.int)(a.borderRightWidth)},e.innerHeight=function(t){var e=t.clientHeight,a=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,n.int)(a.paddingTop),e-=(0,n.int)(a.paddingBottom)},e.innerWidth=function(t){var e=t.clientWidth,a=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,n.int)(a.paddingLeft),e-=(0,n.int)(a.paddingRight)},e.offsetXYFromParent=function(t,e){var a=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),n=t.clientX+e.scrollLeft-a.left,r=t.clientY+e.scrollTop-a.top;return{x:n,y:r}},e.createCSSTransform=function(t){var e=t.x,a=t.y;return function(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a;return t}({},(0,r.browserPrefixToKey)("transform",i.default),"translate("+e+"px,"+a+"px)")},e.createSVGTransform=function(t){var e=t.x,a=t.y;return"translate("+e+","+a+")"},e.getTouch=function(t,e){return t.targetTouches&&(0,n.findInArray)(t.targetTouches,function(t){return e===t.identifier})||t.changedTouches&&(0,n.findInArray)(t.changedTouches,function(t){return e===t.identifier})},e.getTouchIdentifier=function(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier},e.addUserSelectStyles=function(t){if(!t)return;var e=t.getElementById("react-draggable-style-el");e||((e=t.createElement("style")).type="text/css",e.id="react-draggable-style-el",e.innerHTML=".react-draggable-transparent-selection *::-moz-selection {background: transparent;}\n",e.innerHTML+=".react-draggable-transparent-selection *::selection {background: transparent;}\n",t.getElementsByTagName("head")[0].appendChild(e));t.body&&l(t.body,"react-draggable-transparent-selection")},e.removeUserSelectStyles=function(t){try{t&&t.body&&u(t.body,"react-draggable-transparent-selection"),t.selection?t.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},e.styleHacks=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},t,{touchAction:"none"})},e.addClassName=l,e.removeClassName=u;var n=a(24),r=a(44),i=function(t){return t&&t.__esModule?t:{default:t}}(r);var o="";function s(t,e){return o||(o=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(e){return(0,n.isFunction)(t[e])})),!!(0,n.isFunction)(t[o])&&t[o](e)}function l(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)"+e+"(?!\\S)"))||(t.className+=" "+e)}function u(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)","g"),"")}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(1),i=c(r),o=c(a(31)),s=c(a(32)),l=c(a(8)),u=c(a(33));function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.dataStore=new u.default(a.props.dataStorePath),a.dataStore.link(a),a.state={version:-1},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"_item",value:function(t,e,a){var n=this,r=void 0;if(t&&t.prepare){var u=t.prepare(e);u&&u.type&&(t=u)}if(l.default.isString(t))r=t;else{if(l.default.isArray(t))return l.default.flattenDeep(t.map(function(t){return n._item(t,e,a)}));if(e.path&&e.pathSpecs){var c=e.path.join("_");e.pathSpecs[c]?e.currentPathSpecs=e.pathSpecs[c]:e.currentPathSpecs=null}else e.currentPathSpecs=null;switch(t.type){case"reactComponent":r=o.default._node(t,e,a,this);break;case"getVValue":r=l.default.get(e.blocks,t.path);break;case"getValue":r=l.default.get(e.data,t.path);break;case"getPayload":r=l.default.get(e,t.path);break;case"list":r=s.default._node(t,e,a,this);break;case"pivot":r=PivotBuilder._node(t,e,a,this);break;case"useTemplate":r=this._useTemplate(t.name,e);break;case"dynamicValue":r=this._dynamicValue(t,e,a);break;default:r=i.default.createElement("div",null,JSON.stringify(t))}}return t.after&&(r=t.after(r,e)),r}},{key:"_dynamicValue",value:function(t,e,a){return l.default.get(e.TPL,t.path).run(t,e,this)}},{key:"_node",value:function(t,e){var a=this;if(t&&t.prepare){var n=t.prepare(e);n&&n.type&&(t=n)}if(l.default.isArray(t)){var r=t.map(function(t){return a._item(t,e)});return l.default.flattenDeep(r)}return this._item(t,e)}},{key:"_useTemplate",value:function(t,e){e=e?Object.assign({},e):{};var a=this._tpl(t,e);if(a||console.error(t,e,this.dataCache),l.default.isFunction(a))return a(e,this);if(a&&a.prepare){var n=a.prepare(e);if(n&&"useTemplate"==n.type)return this._useTemplate(n.name,e)}var r=a.main||a;return this._makeTemplate(r,e,a)}},{key:"_tpl",value:function(t,e){return l.default.get(this.dataCache.molds,t)}},{key:"_makeTemplate",value:function(t,e,a){if(e.TPL=t,e.TPLS=a,l.default.isFunction(t))return t(e,this);if(t.shaddow.v)for(var n in t.shaddow.v)e.blocks[n]||(e.blocks[n]=this._makePayload(t.shaddow.v[n],a,e),e.blocks["SRC_"+n]=t.shaddow.v[n]);return this._node(t.mold,e)}},{key:"_makePayload",value:function(t,e,a){return"makeNode"==t.type?this._makeTemplate(e[t.template],a,e):"useTemplate"==t.type?this._useTemplate(t.tpl,a):void 0}},{key:"_payload",value:function(){return Object.assign({},this.dataCache.startPayload,{data:this.dataCache.data,slot:"",path:[],wallet:this.dataCache.wallet,walletRoot:this.dataCache.wallet,dataRoot:this.dataCache.data,blocks:{}})}},{key:"_dataValue",value:function(t){return l.default.get(this.dataCache.data,t)}},{key:"_molds",value:function(){return this.dataCache.molds}},{key:"_wallet",value:function(){return this.dataCache.wallet}},{key:"_startTemplate",value:function(){return this.dataCache.startTemplate||"tpl1"}}]),n(e,[{key:"componentWillUnmount",value:function(){this.dataStore.unlink()}},{key:"addLinks",value:function(t){for(var e in this.links||(this.links={}),t)this.links[e]||(this.links[e]=!0,this.dataStore.link(this,e))}},{key:"_reactNode",value:function(t){var e=this;if(!l.default.isObject(t))return t;if(t.children)var a=t.children.map(function(t){return e._reactNode(t)});else a=null;if(repo.components[t.name])var n=repo.components[t.name];else n=t.name;return i.default.createElement(n,t.props,a)}},{key:"runFormatters",value:function(t,e){try{if(t)for(var a in t)t[a]&&t[a](this,e)}catch(t){console.error(t)}}},{key:"applyExtraProps",value:function(t,e){for(var a in t){var n=this.pins[a];n&&(n.props=l.default.merge({},n.props,t[a]))}}},{key:"render",value:function(){var t=void 0;if(this.cacheVersion!=this.state.version){this.dataCache=this.dataStore.getData(),this.pins={},this.dataCache.startPayload&&this.runFormatters(this.dataCache.startPayload.prepare),this.dataCache.links&&this.addLinks(this.dataCache.links);this._molds();var e=this._payload(),a=this._startTemplate();t=this._useTemplate(a,e),this.cachedNodes=t,this.cacheVersion=this.state.version}else t=this.cachedNodes;return this.runFormatters(this.dataCache.format,t),this.props.extraprops&&this.applyExtraProps(this.props.extraprops,t),this._reactNode(t)}}]),e}();e.default=d},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBoundPosition=function(t,e,a){if(!t.props.bounds)return[e,a];var r=t.props.bounds;r="string"==typeof r?r:function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}(r);var s=o(t);if("string"==typeof r){var l=s.ownerDocument,u=l.defaultView,c=void 0;if(!((c="parent"===r?s.parentNode:l.querySelector(r))instanceof u.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var d=u.getComputedStyle(s),p=u.getComputedStyle(c);r={left:-s.offsetLeft+(0,n.int)(p.paddingLeft)+(0,n.int)(d.marginLeft),top:-s.offsetTop+(0,n.int)(p.paddingTop)+(0,n.int)(d.marginTop),right:(0,i.innerWidth)(c)-(0,i.outerWidth)(s)-s.offsetLeft+(0,n.int)(p.paddingRight)-(0,n.int)(d.marginRight),bottom:(0,i.innerHeight)(c)-(0,i.outerHeight)(s)-s.offsetTop+(0,n.int)(p.paddingBottom)-(0,n.int)(d.marginBottom)}}(0,n.isNum)(r.right)&&(e=Math.min(e,r.right));(0,n.isNum)(r.bottom)&&(a=Math.min(a,r.bottom));(0,n.isNum)(r.left)&&(e=Math.max(e,r.left));(0,n.isNum)(r.top)&&(a=Math.max(a,r.top));return[e,a]},e.snapToGrid=function(t,e,a){var n=Math.round(e/t[0])*t[0],r=Math.round(a/t[1])*t[1];return[n,r]},e.canDragX=function(t){return"both"===t.props.axis||"x"===t.props.axis},e.canDragY=function(t){return"both"===t.props.axis||"y"===t.props.axis},e.getControlPosition=function(t,e,a){var n="number"==typeof e?(0,i.getTouch)(t,e):null;if("number"==typeof e&&!n)return null;var r=o(a),s=a.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,i.offsetXYFromParent)(n||t,s)},e.createCoreData=function(t,e,a){var r=t.state,i=!(0,n.isNum)(r.lastX),s=o(t);return i?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:a,x:e,y:a}:{node:s,deltaX:e-r.lastX,deltaY:a-r.lastY,lastX:r.lastX,lastY:r.lastY,x:e,y:a}},e.createDraggableData=function(t,e){return{node:e.node,x:t.state.x+e.deltaX,y:t.state.y+e.deltaY,deltaX:e.deltaX,deltaY:e.deltaY,lastX:t.state.x,lastY:t.state.y}};var n=a(24),r=function(t){return t&&t.__esModule?t:{default:t}}(a(9)),i=a(26);function o(t){var e=r.default.findDOMNode(t);if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t;(t=console).log.apply(t,arguments)}},,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r(a(1));var n=r(a(8));function r(t){return t&&t.__esModule?t:{default:t}}var i={_node:function(t,e,a,r){if(t.preProcess){var i=t.preProcess(t,e,r);null!==i&&(t=i.spec||t,e=i.payload||e)}var o,s=this._obj(t.props,e,a,r),l=this._children(t.children,e,a,r),u=t.componentName;if(t.style&&(s||(s={}),s.style=this._obj(t.style,e,a,r)),t.props&&t.props.role&&e.roles){var c=e.roles[t.props.role];c.style&&n.default.merge(s.style,c.style)}if(s&&e.path&&(s.path=e.path.join("."),s.uid_path=e.path.join("_"),s.slot=e.slot),s&&(s.master=r),e.wallet&&e.wallet.nodeSpec){var d=e.wallet.nodeSpec;s||(s={});var p=s.role;if(d&&d[p]){s.className&&!n.default.isArray&&(s.className=[s.className]);this._obj(d[p],e,a,r,s);if(d[p].children){var f=this._children(d[p].children,e,a,r);f.length&&(l=l.concat(f))}n.default.isArray(s.className)&&(s.className=s.className.join(" ")),delete s.children}}if(e.currentPathSpecs){var h=e.currentPathSpecs;s||(s={});var g=s.role;if(h&&h[g]){s.className&&!n.default.isArray(s.className)&&(s.className=[s.className]);this._obj(h[g],e,a,r,s);if(h[g].children){var m=this._children(h[g].children,e,a,r);m.length&&(l=(l||[]).concat(m))}delete s.children,n.default.isArray(s.className)&&(s.className=s.className.join(" "))}}if(e.TPL&&e.TPL.postProcess){var v=e.TPL.postProcess(t,e,s,l);if(void 0!==v)return v}if(s&&s.processor){var y=e.TPL[s.processor](t,e,s,l);if(void 0!==y)return y}return s&&s.pinAs&&(o=s.pinAs),this._element(u,s,l,r,o)},_element:function(t,e,a,n,r){var i={name:t,props:e,children:a};return r&&(n.pins[r]=i),i},_style:function(t,e,a,n){return t},_children:function(t,e,a,r){if(!t)return null;var i=[];for(var o in t){var s=r._item(t[o],e,a);s&&(n.default.isArray(s)&&(s=n.default.flattenDeep(s)),i=i.concat(s))}return i},_obj:function(t,e,a,r,i){if(!t)return null;for(var o in i=i||{},t){var s=this._propValue(t[o],e,a,r);null!==s&&(n.default.isArray(i[o])?i[o]=i[o].concat(s):i[o]=s)}return i},_propValue:function(t,e,a,r){var i=this;if(null==t)return null;if(n.default.isArray(t))return t.map(function(t){return i._propValue(t,e,a,r)}).join("");if(n.default.isString(t))return t;if(!t.type)return t;var o=void 0;switch(t.type){case"getVValue":o=n.default.get(e.blocks,t.path);break;case"getValue":o=n.default.get(e.data,t.path);break;case"getPayload":o=n.default.get(e,t.path);break;case"dynamicValue":o=r._dynamicValue(t,e,a)}return void 0!==o?o:JSON.stringify(t)}};e.default=i},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={_node:function(t,e,a,n){var r=t.shouldRenderItems(e),i=this._data(t.dataPath,e),o=i.data,s=i.basePath,l=i.wallet;if(s=_.isString(s)?s.split("."):s,s=e.path?e.path.concat(s):s,e.itemsSummaryTpl)return n._node(e.itemsSummaryTpl,e);var u=r||e.itemsSummaryTpl?this._items(o,t.item,e,a,n,s,l,t):null;return this._wrap(t,u,n,e)},_wrap:function(t,e,a,n){if(!e||!t.wrapper)return null;if(!e.length)return this._emptyContent(t,a,n);var r=Object.assign({},n,{data:{items:e}});return a._makeTemplate(t.wrapper,r,{})},_emptyContent:function(t,e,a){return t.empty_content?e._makeTemplate(t.empty_content,a,{}):null},_data:function(t,e){return"*"==t?{data:e.data,basePath:[],wallet:e.wallet}:{data:_.get(e.data,t),basePath:t,wallet:e.wallet?_.get(e.wallet,t):null}},_items:function(t,e,a,n,r,i,o,s){var l=[];if(!_.isObjectLike(t))return l;for(var u in t){var c=this._item(u,t[u],e,n,r,a,i,o,s);l.push(c)}return l},_item:function(t,e,a,n,r,i,o,s,l){var u=this._payload(t,e,i,o,s),c=l.prepareItem(u),d=void 0;return c&&c.type?d=r._node(c,u):(d=r._makeTemplate(a,u,{}),l.wrapItem&&(d=l.wrapItem(d,l,u,r))),d},_payload:function(t,e,a,n,r){var i=Object.assign({},a,{data:e,slot:t});return i.path=n.concat(t),i.wallet=r?_.get(r,t):null,i.blocks={},i}};e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();a(23);var r=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.path=e,this.uid=DataManager.getUID()}return n(t,[{key:"getFullPath",value:function(t){var e=[this.path];return t&&e.push(t),e.join(".")}},{key:"getData",value:function(t){var e=this.getFullPath(t);return DataManager.getValue(e)}},{key:"setData",value:function(t,e,a){e||(e=t,t=null),e=_.cloneDeep(e);var n=this.getFullPath(t);if(!a&&null!=e)return DataManager.setCombined(n,e);DataManager.set(n,e)}},{key:"unset",value:function(t){var e=this.getFullPath(t);DataManager.set(e,null)}},{key:"setAbsolute",value:function(t,e){return e=_.cloneDeep(e),DataManager.set(t,e)}},{key:"mergeData",value:function(t,e){e||(e=t,t=null),e=_.cloneDeep(e);var a=this.getFullPath(t);return DataManager.mergeValue(a,e)}},{key:"link",value:function(t,e){DataManager.setTrigger(e||this.path,this.uid,{run:function(){t.setState({version:(new Date).getTime(),salience:100})},salience:100})}},{key:"unlink",value:function(t){DataManager.remTrigger(this.path,this.uid)}}]),t}();e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state={isOpen:!1},a.onChange=a.onChange.bind(a),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"onChange",value:function(t){this.setState({isOpen:!this.state.isOpen})}},{key:"_content",value:function(){return this.props.ants.main.split("\n").map(function(t){var e=5*/\s*/.exec(t)[0].length;return i.default.createElement("div",{style:{marginLeft:e}},t)})}},{key:"render",value:function(){Object.assign({},this.props,{value:this.state.value,onChange:this.onChange});var t=this.state.isOpen?this._content():null;return i.default.createElement("div",null,i.default.createElement("div",{onClick:this.onChange,style:{color:this.props.ants.color}},this.props.ants.name),t)}}]),e}();e.default=o},function(t,e,a){"use strict";var n=u(a(36));a(23);var r=u(a(42)),i=u(a(46)),o=u(a(27)),s=u(a(54)),l=u(a(55));function u(t){return t&&t.__esModule?t:{default:t}}a(56),n.default.components.draggable=r.default,n.default.components.codemirror=i.default,n.default.components.dynamicdriver=o.default,n.default.managers.timeline=s.default,n.default.managers.drag=l.default,DataManager.setCombined("oldrepo",n.default),DataManager.setCombined("startup",{dataStore:{loader:{prism:"prisms.builder",destination:"dataStore.ctx1",source:"dataStore.builder.ctx1"}},app:{loader:{prism:"prisms.builder",destination:"app.ui",source:"app.builder.ui"}},cards:{outline:{loader:{prism:"prisms.builder",destination:"cards.outline.ui",source:"cards.outline.builder.ui"}}},bar:{loader:{prism:"prisms.builder",destination:"bar.ui",source:"bar.builder.ui"}}}),DataManager.setCombined("plot",{paths:{inputActions:"ants.currentWork.actions",displayReadyData:"antsTree.ants1",dataStore:"dataStore.ctx1",currentCtx:"ants.currentWork.ctx"}});var c=1e3;DataManager.setCombined("cards.outline.builder.ui",{run:function(t,e){var a={tb:{}};DataManager.fetchValues(a,{simpleUI_tpl:"$.modules.simpleUI"},null,e,null),DataManager.fetchValues(a.tb,{makeAList:"$.fn.makeAList",makeAStyle:"$.fn.makeAStyle",cleanTpl:"$.fn.cleanTpl",insertValues:"fn.insertValues"},null,e,null),a.bp=a.tb.cleanTpl.run({target:a.simpleUI_tpl});a.bp.data={loader:{prism:"prisms.simpleDataFetch",args:{value:"$.antsTree.ants1"},outputMap:{tree:"value.tree",itemsMap:"value.itemsMap"}}},a.tpls={main:{main:"<div pin_as='frame' class='context frame' >{tpl:style} Context {$data.tree.data.label} {@items}</div>",items:{dataPath:"tree.sub",item:"salut",prepareItem:function(t){return{type:"useTemplate",name:"tree"}},wrapper:"<div class='' role='content'>{#items} </div>",empty_content:""}},tree:{main:"<div>{tpl:title} {@items}</div>",items:{dataPath:"sub",item:"{tpl:tree}",wrapper:"<div class='content' role='content'>{#items} </div>",empty_content:"<div class='content' role='content'></div>"}},title:function(t,e){var a=t.data,n=a.info.tpl;n||(n="comment");var r=e._useTemplate(n,t);if(a.isAnswerOf){var i=Object.assign({},t,{title:r});r=e._useTemplate("question",i)}return r},question:{main:"<div class='questionWrapper'>{@items} {$title}</div>",items:{dataPath:"isAnswerOf",item:"<div class='question'>{$data.data.label}</div>",wrapper:"<div>{#items} </div>",empty_content:""}},insertPoint:"<div class='insertPoint'>................</div>",style:[".insertPoint {color : red;}",".content { padding-left : 20px;}",".title { padding : 10px 0px; } ",".question { margin-left: 15px; background : #bbb; display : inline;  }",".questionWrapper { border-left : 1px dotted red; margin-top : 10px; }",".handle::after { content : '.'; margin-right : 5px}",".handle {color : #555;}",".active { color : red}","body {   user-select: none; }",".frame { overflow : auto;}"]};var r={item:"<div>{$data.data.label}</div>",topic:"<div>{$data.data.label}</div>",comment:"<div>{$data.data.label}</div>",topic_css:"\n                @.title { border-bottom : 1px solid gold; }\n                .content{ font-size : 45px;}\n            ",comment_css:"\n                @.title { border-bottom : 1px dotted red ;},\n                .content { font-size : 12px;}\n            "},i="item,topic,comment".split(",");(i=i.map(function(t){var e={index:t,html:r[t],node:$(r[t]),name:t};return r[t+"_css"]&&(e.css=r[t+"_css"]),e})).forEach(function(t){if(t.css){var e=t.css.split("\n").map(function(t){return t.trim()}).filter(function(t){return""!=t}).map(function(e){return-1==e.indexOf("@")?"."+t.name+" "+e:e.replace("@","."+t.name)});a.tpls.style=a.tpls.style.concat(e)}});var o={},s=function(t,e){var a={};for(var n in t.split(",").forEach(function(t){var n={index:t,html:e[t],node:$(e[t]),name:t};a[t]=n}),e)if(-1!=n.indexOf("_")){var r=n.split("_"),i=r[0],o=r[1];_.isObject(e[n])?(a[i][o]||(a[i][o]=_.isArray(e[n])?[]:{}),_.merge(a[i][o],e[n])):a[i][o]=e[n]}return a},l=function(t,e){for(var a in e){var n=e[a];t[n.index]=n.node.get(0).outerHTML}},u={get:function(t,e){var a={};for(var n in e){var r=e[n];"@"==r.charAt(0)?r=_.get(t,r.substr(1)):_.isFunction(r)&&(r=r(t,e,n)),a[n]=r}return a}};o.getValue=u;var c={run:function(t){var e=t.item,a=t.opMold,n=t.op_map,r=o.getValue.get(e,a);for(var i in n){if(r[n[i].match])return n[i].fn(e,r)}}},d={run:function(t,e,a,n){var r={input:t};if(a)var i=function(t,e){return a(t,e,r)};else i=function(e,a){if(!e)return t;var n=_.get(r,e);if(void 0===n)throw{notFound:e};return n};for(var o=Object.keys(e),s=0,l=4*o.length;o.length&&l>0;){s>=o.length&&(s=0);var u=o[s];try{var c=this.runStep(e[u],i,r);c&&(r[u]=c),o.splice(s,1),r.lastValue=c}catch(t){if(t.fromUp)throw t.e;if(n)throw t;s++}l--}if(0==l)throw{notCompleted:!0,result:r};return r},runStep:function(t,e,a){return _.isArray(t)?this.run({},t,function(t,a,n){if(!n.lastValue)return e(t);if(!t)return n.lastValue;if(void 0===(n=_.get(n.lastValue,t)))try{return e(t)}catch(t){throw{fromUp:!0,e:t}}return n},!0).lastValue:_.isObjectLike(t)?this._subTpl(t,e,a):t(e,a.lastValue)},_subTpl:function(t,e,a){return t.src?this._iteration(t,e,a):this.run(a.input,t)},_iteration:function(t,e,a){var n=this.run({},t.src,e);delete n.lastValue,delete n.input;for(var r=[],i=0;i<t.iterate.length;i++){var o=t.iterate[i],s=n[o[1]],l=o[0];for(var u in s){n[l]=s[u],n["slot_"+l]=u,(a=this.run(n,t.tpl))&&a.output&&(a=a.output),r.push(a)}}return r}},p=s("item,topic,comment",r);!function(t,e,a,n){for(var r in t)for(var i in e)n[a[0]]=t[r],n[a[1]]=e[i],n.run.run(n)}(p,[{class:"@index"},{class:"title"},{prepend:"<span class='handle'>handle{$data.info.handle}</span>"},{attr:"role",value:"title"},{attr:"on_click",value:"{$actions.select}"},{attr:"on_mouse_down",value:"{$actions.startMove}"},{attr:"on_touch_start",value:"{$actions.startTouch}"}],["item","opMold"],{run:c,op_map:[{match:"class",fn:function(t,e){return t.node.addClass(e.class)}},{match:"prepend",fn:function(t,e){return t.node.prepend(e.prepend)}},{match:"attr",fn:function(t,e){return t.node.attr(e.attr,e.value)}}]}),l(a.tpls,p);var f=function(t,e){var a={};for(var n in t)t[n][e]&&(a[n]=t[n]);return a}(p,"css");d.run(f,{output:{src:{items:function(t){return t("input")}},iterate:[["item","items"]],tpl:{output:{src:{lines:function(t){return t("input.item.css").split("\n").map(function(t){return t.trim()}).filter(function(t){return t})},item:function(t){return t("input.item")}},iterate:[["line","lines"]],tpl:{output:function(t){var e=t("input.line"),a=t("input.item.index");return-1!==e.indexOf("@")?e.replace("@",a):a+" "+e}}}}}});a.bp.tpls=a.tpls,a.bp.currentCtx={loader:{get:function(t,e,a,n,r){var i={};DataManager.fetchValues(i,{ctx:"$.ants.currentWork.ctx"},t,e,a);var o={data:"$."+r.srcPath.slice(0,-1).concat(["data"]).join(".")};return DataManager.fetchValues(i,o,t,e,a),{selected:i.ctx.parent}}}},a.bp.staticValues={markInsertPoint:{title:{className:["active"]},content:{children:[{type:"useTemplate",name:"insertPoint"}]}}},a.bp.startPayload.prepare=[function(t){var e=t.dataCache,a=e.currentCtx.selected,n=e.data.itemsMap[a];if(n){var r=["pathSpecs","tree_"+n.join("_")];_.set(e.startPayload,r,e.staticValues.markInsertPoint)}},function(t){var e=t.dataCache;e.fastLane&&e.fastLane.test&&(e.startPayload.pathSpecs||(e.startPayload.pathSpecs={}),_.set(e.startPayload,"pathSpecs",e.fastLane.test))}];return a.bp.startPayload.actions={select:function(t){var e=t._targetInst.memoizedProps.slot;DataManager.set("ants.currentWork.ctx.parent",e)},startTouch:function(t){var e=t._targetInst.memoizedProps,a=(t._targetInst,e.uid_path,{});e.master.dataStore.setData("format",{drag:function(t,e){t.pins.dragging.props=Object.assign({},t.pins.dragging.props,{style:{position:"relative",transformOrigin:"top left",transform:"translateX("+a.mvx+"px) scaleX("+a.wdt+")",transition:"all ease-out 0.1s"}})}}),e.master.dataStore.setData("fastLane.test."+e.uid_path,{title:{pinAs:"dragging"}}),n.default.managers.drag.startTouchWatch(t,{end:function(){e.master.dataStore.setData("fastLane",{},!0),e.master.dataStore.setData("format",{},!0),e.master.setState({version:(new Date).getTime()})},run:function(t){var n=t.targetX-t.initial.targetX,r=(t.targetY,t.initial.targetY,(t.initial.targetWidth-n)/t.initial.targetWidth);a.mvx=n,a.wdt=r,e.master.setState({smallVersion:(new Date).getTime()})}})},startMove:function(t){var e=t._targetInst.memoizedProps,a=(t._targetInst,e.uid_path,{});e.master.dataStore.setData("format",{drag:function(t,e){t.pins.dragging.props=Object.assign({},t.pins.dragging.props,{style:{transformOrigin:"middle left",transform:"translateX("+a.mvx+"px) scaleX("+a.wdt+")",transition:"all ease-out 0.1s"}})}}),e.master.dataStore.setData("fastLane.test."+e.uid_path,{title:{pinAs:"dragging"}}),n.default.managers.drag.startMouseWatch(t,{end:function(){e.master.dataStore.setData("fastLane",{},!0),e.master.dataStore.unset("format.drag"),e.master.setState({version:(new Date).getTime()})},run:function(t){var n=t.targetX-t.initial.targetX,r=(t.targetY,t.initial.targetY,(t.initial.targetWidth-n)/t.initial.targetWidth),i=1+2*r;a.mvx=n,a.wdt=r,a.hgt=i,e.master.setState({smallVersion:(new Date).getTime()})}})},stopMove:function(t){t._targetInst.memoizedProps.master.dataStore.setData("fastLane.test",{})}},a.bp.links={selected:"ants.currentWork.ctx"},a.tpls.style=a.tb.makeAStyle.run(a.tpls.style,a.tb),a.bp},get:function(t,e,a,n,r){}}),DataManager.setCombined("bar.builder.ui",{run:function(t,e){var a={tb:{}};DataManager.fetchValues(a,{simpleUI_tpl:"$.modules.simpleUI"},null,e,null),DataManager.fetchValues(a.tb,{makeAList:"$.fn.makeAList",makeAStyle:"$.fn.makeAStyle",cleanTpl:"$.fn.cleanTpl",insertValues:"fn.insertValues"},null,e,null),a.bp=a.tb.cleanTpl.run({target:a.simpleUI_tpl}),a.bp.data={text:"text",height:400,ctx:{loader:{prism:"prisms.pathLoader",path:"plot.paths.currentCtx"}}},a.tpls={main:"<div pin_as='frame'> {tpl:style} {tpl:input} {tpl:menu} </div>",input:"<myinput   />",menu:{main:function(t,e){return t.data.showMenu?e._useTemplate("xmenu",t):null}},style:[".content { padding-left : 10px;}",".topic.title { border-bottom : 1px solid green } ",".question { margin-left: 15px; background : #bbb; display : inline;  }",".questionWrapper { border-left : 1px dotted red; margin-top : 10px; }",".handle::after { content : '.'; margin-right : 5px}"],xmenu:"<div style='height:{$data.height};' >Menu</div>"},a.tpls.style=a.tb.makeAStyle.run(a.tpls.style,a.tb);var n="input".split(",");return(n=n.map(function(t){return{index:t,html:a.tpls[t],node:$(a.tpls[t])}})).forEach(function(t){t.node.attr("value","{$data.ctx.inputText}").attr("on_change","{$actions.input.changeText}").attr("on_key_up","{$actions.input.commandReady}").attr("on_focus","{$actions.showMenu}").attr("on_blur","{$actions.hideMenu}")}),n.forEach(function(t){a.tpls[t.index]=t.node.get(0).outerHTML}),_.merge(a.bp.startPayload,{actions:{input:{changeText:function(t,e){var a=t._targetInst.memoizedProps.master.dataCache.startPayload,n=t.target.value;a.actions.inputActions.setText(n)},commandReady:function(t){if(13==t.keyCode){var e=t._targetInst.memoizedProps.master.dataCache.startPayload,a=t.target.value;e.actions.inputActions.finishCommand(a)}}},changeValue:function(){},showMenu:function(){},hideMenu:function(){},inputActions:{loader:{prism:"prisms.pathLoader",path:"plot.paths.inputActions"}}}}),a.bp.links={height:"bar.ui.data.height",input:"ants.currentWork.ctx.inputText"},a.bp.tpls=a.tpls,a.bp},get:function(t,e,a,n,r){}}),DataManager.setCombined("app.builder.ui",{run:function(t,e){var a={tb:{}};return DataManager.fetchValues(a,{simpleUI_tpl:"$.modules.simpleUI"},null,e,null),DataManager.fetchValues(a.tb,{makeAList:"$.fn.makeAList",makeAStyle:"$.fn.makeAStyle",cleanTpl:"$.fn.cleanTpl",insertValues:"fn.insertValues"},null,e,null),a.bp=a.tb.cleanTpl.run({target:a.simpleUI_tpl}),a.bp.data={bar:{frame:{style:{border:"1px solid #bada55",left:0,top:1500,height:50,width:500,position:"absolute"}}},cards:{frame:{style:{border:"1px solid #5adbee",left:0,top:0,height:1500,width:500,position:"absolute"}}}},a.tpls={main:'<div> hey              \n                <DynamicDriver data_Store_Path="bar.ui" extraprops={$data.bar}></DynamicDriver>\n                <DynamicDriver data_Store_Path="cards.outline.ui" extraprops={$data.cards}></DynamicDriver>\n            </div>',style:[".content { padding-left : 10px;}",".topic.title { border-bottom : 1px solid green } ",".question { margin-left: 15px; background : #bbb; display : inline;  }",".questionWrapper { border-left : 1px dotted red; margin-top : 10px; }",".handle::after { content : '.'; margin-right : 5px}"]},a.tpls.style=a.tb.makeAStyle.run(a.tpls.style,a.tb),a.bp.tpls=a.tpls,a.bp},get:function(t,e,a,n,r){}}),DataManager.setCombined("antsTree.ants1",{loader:{get:function(t,e,a,n,r){var i={};DataManager.fetchValues(i,this.links,null,e,a),DataManager.fetchValues(i,{ctx:i.paths},null,e,a,!0),i.tree=this.makeItem(0,i.ctx,{level:-1});var o={level:-1,handles:{},itemsMap:{}};return this.processNode(this.bkp,i.tree,null,o,[]),{tree:i.tree,handles:o.handles,itemsMap:o.itemsMap}},bkp:{before:function(t,e,a,n){t.info.level=a.level;var r=this.getType(t);t.info.tpl=r.name,t.info.handle=this.getHandle(t.info.index,r),t.info.fullHandle=this.getFullHandle(t,e),t.info.path=n,a.handles[t.info.fullHandle.toLowerCase()]=t.info.itemId,a.itemsMap[t.info.itemId]=n,this.orderSub(t,e,a)},getType:function(t){var e=this.tplByLevelMap[t.info.level];return e||(e=this.tplByLevelMap[this.tplByLevelMap.length-1]),e},getHandle:function(t,e){if(void 0===t)return"";if(!e.bullet)return"";if(1==e.bullet)return t+1;var a="A"==e.bullet?65:97;return String.fromCharCode(a+t)},getFullHandle:function(t,e){var a="";return e&&e.info&&e.info.fullHandle&&(a=e.info.fullHandle+"."),a+=t.info.handle},orderSub:function(t,e,a){for(var n in t)if("data"!=n&&"info"!=n){var r=0;for(var i in t[n])t[n][i]&&(t[n][i].info.index=r,r++)}},getPayload:function(t,e,a){return(a=Object.assign({},a)).level++,a},after:function(t,e,a){},tplByLevelMap:[{name:"topic",bullet:1},{name:"item",bullet:"A"},{name:"comment",bullet:1}]},processTree:function(t,e,a){for(var n in e)this.processNode(t,e[n],e,a)},processNode:function(t,e,a,n,r){for(var i in t.before(e,a,n,r),e)if("data"!=i&&"info"!=i){var o=t.getPayload(e,i,n);for(var s in e[i])this.processNode(t,e[i][s],e,o,r.concat([i,s]))}t.after(e,a,n)},makeItem:function(t,e,a){var n={data:e.items[t],info:{itemId:t}},r=Object.assign({},a),i=e.rels[t];for(var o in i){var s=this.makeItem(o,e,r);_.set(n,[i[o].type,o],s)}return n},links:{paths:"$.plot.paths.dataStore"}}}),DataManager.setCombined("dataStore.builder.ctx1",{run:function(t,e,a,n,r){try{var i=this.generateTree(0,{id:0,maxItems:3}),o={items:{},rels:{}};o.items[0]={label:"this is a new context",seed:"1234"},this.gather(0,i,o,0)}catch(t){console.error(t)}return o},gather:function(t,e,a,n){if(e)for(var r in e){var i="el"+r,o={label:null,id:i},s=this.generateRel(t,o,n);a.items[i]=o,_.set(a.rels,[t,i],{type:s}),o.label=this.generateLabel(o,s),this.gather(i,e[r],a,n+1)}},generateLabel:function(t,e){return"item  "+t.id},generateRel:function(t,e,a){return"sub"},generateTree:function(t,e){if(t>3)return 1;for(var a={},n=!1,r=0;r<3;r++){var i=this.generateTree(t+1,e);i&&(a[e.id++]=i,n=!0)}return n?a:null}}),DataManager.setCombined("ants.currentWork",{ctx:{text:"",parent:0,relation:"sub",inputText:""},actions:{path:"%PATH",getCtxPath:function(){return this.path.slice(0,-2).concat("ctx")},finishCommand:function(){var t=this.getCtxPath().join("."),e=DataManager.getValue(t),a="el"+c++,n={label:e.text,id:a},r={};_.set(r,["items",a],n),_.set(r,["rels",e.parent,a],{type:e.rel||"sub"}),_.set(r,["changed","items",a],!0),_.set(r,["changed","rels",e.parent],!0),DataManager.mergeValue("dataStore.ctx1",r),DataManager.mergeValue(t,{text:"",parent:void 0,relation:"sub",inputText:null})},setText:function(t){var e=this.getCtxPath(),a=t.trim(),n=/(\.([^\s\,]+))?(\,([^\s\.]+))?(\.([^\s\,]+))?(\s+(.+))?/g.exec(a),r={text:void 0,parent:void 0,relation:void 0,inputText:t};n&&n[0]?(n[2]&&(r.parentHandle=n[2]),n[4]&&(r.relation=n[4]),n[6]&&(r.parentHandle=n[6]),r.parentHandle&&(r.parent=this.getItemIdByHandle(r.parentHandle)),r.text=n[8]):r.text=a,DataManager.mergeValue(e,r)},getItemIdByHandle:function(t){var e=DataManager.getValue("plot.paths.displayReadyData");return DataManager.getValue(e+".handles")[t=t.toLowerCase()]||void 0}}})},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(a(8)),r=c(a(37)),i=c(a(38)),o=c(a(39)),s=c(a(40)),l=c(a(25)),u=c(a(41));function c(t){return t&&t.__esModule?t:{default:t}}n.default.templateSettings.interpolate=/\{\#([\s\S]+?)\}/g,window.$=l.default;try{for(var d in r.default.tpls={tpl1:{main:"<div> {@title} {@items}  </div>",title:"<span onclick={$actions.toggle}> {$slot} </span>",items:{dataPath:"*",item:"{tpl:tpl1}",wrapper:"<div class='content'>{#items} </div>",empty_content:"<span> : {$data}</span>",prepareItem:function(t){n.default.isString(t.data)&&"#"==t.data.charAt(0)&&(t.hue=360*Math.random(),t.itemsSummaryTpl={type:"useTemplate",name:"color"})},shouldRenderItems:function(t){return!(!t.wallet||!t.wallet.isOpen)},wrapItem:function(t,e,a,n){return a.item=t,a.wallet&&a.wallet.dragging?n._node({type:"useTemplate",name:"dragging"},a):n._node({type:"useTemplate",name:"todrag"},a)}},prepare:function(t){if(t.wallet&&t.wallet.useThisTpl)return{type:"useTemplate",name:t.wallet.useThisTpl}}},tpl2:{main:"<div style='color : red;'> RED </div>"},todrag:{main:"<div> {$item} </div>"},dragging:{main:"<div style='border :1px dotted yellow;'><Draggable onStart={$actions.nothing} onDrag={$actions.dragging} onStop={$actions.endDrag}>{$item}</Draggable></div>"},dragging_empty:{main:"<div style='border:1px solid green'><ol><li>{$item}</li></ol></Draggable></div>"},color:{main:"<span style='background:hsl({$hue}, 50%, 50%); border: 1px solid red;'>___{$data}___</span>"},hasaa:{main:"<div> HASAAA. nothing else matters </div>"},map:{title:"MAP : {#title} ",content:"<div>{#items}</div>",item:"{tpl:section}",makeTpl:{from:"basicContent"},path:"sections"},section:{title:" - {#title} ",content:"<ol>{#items}</ol>",item:"{tpl:topic}",makeTpl:{from:"basicContent"},path:"topics"},topic:{title:"<li>{#title} </li>",content:"<ol>{#items}</ol>",item:"{tpl:line}",makeTpl:{from:"basicContent"},path:"lines"},line:{main:"<div> {#title} </div>"},question:{main:"<div> {#title} </div>"},basicContent:{main:"<div> {@title} {@items}  </div>",title:{placeholder:"title"},items:{dataPath:{placeholder:"path"},item:{placeholder:"item"},wrapper:{placeholder:"content"},empty_content:"<span></span>"}},codemirror:{main:"\n                <codemirror data={$wallet} />\n            "}},r.default.tplUtilities={fillTpl:function(t,e){var a=this.getTpl(t);return n.default.cloneDeepWith(a,function(t,a){if(t.placeholder)return e[t.placeholder]})},getTpl:function(t){return r.default.tpls[t]}},r.default.otherTpl={items:{}},r.default.otherTpl.names="section,topic,line,question,map".split(","),r.default.otherTpl.names){var p=r.default.otherTpl.names[d];r.default.otherTpl.items[p]=n.default.cloneDeep(r.default.tpls[p])}for(var d in r.default.otherTpl)r.default.tpls[d]=r.default.otherTpl[d];var f=r.default.otherTpl.items,h={};for(var d in f){var g=f[d];g.makeTpl?h[d]=r.default.tplUtilities.fillTpl(g.makeTpl.from,g):h[d]=g}for(var d in r.default.otherTpl.items=h,h)r.default.tpls[d]=h[d];r.default.alterActions={tpl3Actions:{source:"tpl2",main:[{type:"append",selector:"div",html:"<div class='tooltip'>this is a div</div>"},{type:"css",selector:".tooltip",css:{border:"1px solid green"}}]}},r.default.tpls.tpl3=r.default.tplAlter.run(r.default.alterActions.tpl3Actions),r.default.parsed=r.default.parseCollection.parse(r.default.tpls),r.default.startPayload=o.default,r.default.startWallet=s.default,r.default.startData=i.default,window.repo=r.default,r.default.components.myinput=u.default}catch(t){console.error(t)}e.default=r.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(25),_jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}_lodash2.default.templateSettings.interpolate=/\{\#([\s\S]+?)\}/g;try{var repo={};repo.tplAlter={runInPlace:function(t,e){return this.runStepsArray(t,e),t},runStepsArray:function(t,e){if(_lodash2.default.isArray(e))for(var a=0;a<e.length;a++)this.runStepsArray(t,e[a]);else this.runStep(t,e)},runStep:function(t,e){try{e.target&&(t=this.getTarget(t,e.target)),e.steps?this.runStepsArray(t,e.steps):this.ops[e.type](t,e),e.target&&this.setTarget(t)}catch(t){console.error(t)}},getTarget:function(t,e){if(_lodash2.default.isString(e)){var a=e.split(":");1==a.length?e={path:t,prism:"value"}:(prismName=a.shift(),this.prism[prismName]?prism=this.prism[prismName]:prism=DataManager.getValue(prismName),prism.getKeyFromArray&&((e=prism.getKeyFromArray(a)).prismInstance=prism))}return e.prismInstance?e.prismInstance.get(t,e,this):this.prism[e.prism].get(t,e,this)},setTarget:function(t){t.node.get(0).outerHTML;if(t.prismInstance)return t.prismInstance.set(t,this);this.prism[t.prism].set(t,this)},ops:{getNode:function(t,e){var a=t.node,n=e.selector;return n&&!a.is(n)&&(a=(0,_jquery2.default)(n,a)),a},css:function(t,e){this.getNode(t,e).css(e.css)},append:function(t,e){this.getNode(t,e).append(e.html)},attr:function(t,e){this.getNode(t,e).attr(e.attr)}},prism:{value:{get:function(t,e,a){var n=e.path;return{root:t=t.value||t,path:n,value:_lodash2.default.get(t,n),prism:"value"}},set:function(t,e){_lodash2.default.set(t.root,t.path,t.value)},run:function(t,e,a){}},domnode:{get:function(t,e,a){var n=a.prism.value.get(t,{path:e.path}),r=(0,_jquery2.default)(n.value);return n.node=r,n.prism="domnode",n},set:function(t,e){var a=t.node.get(0).outerHTML;t.value=a,e.prism.value.set(t,e)},run:function(t,e,a){}}},run:function(t){var e=this.getSource(t.source),a=_lodash2.default.cloneDeep(e);for(var n in t)if("source"!=n){var r=(0,_jquery2.default)("<div>");r.append(a[n]),this.runOps(r,t[n]),a[n]=r.children().get(0).innerHTML}return a},runOps:function(t,e){for(var a in e)this.runOp(t,e[a])},runOp:function(t,e){var a=(0,_jquery2.default)(e.selector,t);e.css?a.css(e.css):e.html?a.html(e.html):e.nodes&&a.append(e.nodes)},getSource:function(t){return _lodash2.default.get(repo.tpls,t)}},repo.changeNode={tpl_rec:{fn:function(t,e){for(var a in data)this.fn(data[a])},before:function(){},item:function(){},wrapper:function(){}}},repo.parseTpl={parse:function(t){if(_lodash2.default.isFunction(t))return t;if(_lodash2.default.isString(t))return repo.tplParser.parse(t);if(t.html){var e=repo.tplParser.parse(t.html);return _lodash2.default.merge(e,t),delete e.html,e}return t.iterate?repo.parsePivot.parse(t):t.dataPath&&t.item?repo.parseList.parse(t):t}},repo.components={},repo.managers={},repo.parseList={parse:function(t){var e={};return e.item=repo.parseTpl.parse(t.item),e.wrapper=t.wrapper?repo.parseTpl.parse(t.wrapper):null,e.empty_content=t.empty_content?repo.parseTpl.parse(t.empty_content):null,e.dataPath=t.dataPath,e.type="list",e.prepareItem=t.prepareItem||function(){},e.shouldRenderItems=t.shouldRenderItems||function(){return!0},e.wrapItem=t.wrapItem||null,{mold:e,shaddow:{}}}},repo.parsePivot={parse:function(t){var e={};return e.prepare=t.prepare||function(){},e.iterate=t.iterate||function(){},e.wrap=t.wrap||function(){},e.type="pivot",e.dataPath=t.dataPath,{mold:e,shaddow:{}}}},repo.parseHtml={parse:function(t){t=t.trim();var e=document.createElement("div");e.innerHTML=t;for(var a=[],n=0;n<e.childNodes.length;n++){var r=e.childNodes[n],i=this._spec(r);a.push(i)}return 1==a.length?a[0]:a},_spec:function(t){var e=this;if(3==t.nodeType)return t.nodeValue;for(var a={},n=0;n<t.attributes.length;n++){var r=t.attributes[n],i="classname"==r.name||"class"==r.name?"className":r.name;0==i.indexOf("on")&&(i="on"+i.charAt(2).toUpperCase()+i.substring(3).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})),-1!=i.indexOf("_")&&(i=i.replace(/\_(.)/g,function(t,e){return e.toUpperCase()})),a[i]=r.value}var o=null;a.style&&(o=this._style(a.style),delete a.style),0==Object.keys(a)&&(a=null);var s=[];return t.childNodes.forEach(function(t){s.push(e._spec(t))}),0==s.length&&(s=null),{type:"reactComponent",componentName:t.nodeName.toLowerCase(),props:a,children:s,style:o}},_style:function(t){for(var e=/\s*([^:\s]+)\s*\:\s*([^;]+)\s*\;/g,a={},n=void 0;n=e.exec(t);)a[n[1]]=n[2];return a}},repo.tplParser={parse:function(t){var e=repo.parseHtml.parse(t),a={v:{},neededValues:{}};return{mold:e=this.iterate(e,a),shaddow:a}},iterate:function(t,e){var a=this;if(_lodash2.default.isString(t))return repo.expander.expandValue(t,"",e);if(_lodash2.default.isArray(t))return t.map(function(t){return a.iterate(t,e)});if(t.props)for(var n in t.props)t.props[n]=repo.expander.expandValue(t.props[n],n,e);if(t.style)for(var n in t.style)t.style[n]=repo.expander.expandValue(t.style[n],n,e);if(t.children){var r=[];for(n=0;n<t.children.length;n++){var i=void 0;(i=_lodash2.default.isString(t.children[n])?repo.expander.expandValue(t.children[n],n,e):this.iterate(t.children[n],e))&&(r=r.concat(i))}t.children=r}return t}},repo.expander={expandValue:function(t,e,a){var n=this;if(!_lodash2.default.isString(t))return t;if(-1==t.indexOf("{"))return t;var r=t.split(/(\{[^}]+)\}/g);return 0==(r=r.map(function(t){return""==t?null:"{"!==t.charAt(0)?t:(t=t.substring(1),t=n.getActionObj(t,a))}).filter(function(t){return t})).length?null:1==r.length?r[0]:r},getActionObj:function getActionObj(str,shaddow){var firstChar=str.charAt(0),path=str.substring(1);if("#"==firstChar)return shaddow.neededValues[path]=!0,{type:"getValue",path:path};if("$"==firstChar)return shaddow.neededValues[path]=!0,{type:"getPayload",path:path};if("@"==firstChar)return shaddow.v[path]={type:"makeNode",template:path},{type:"getVValue",path:path};if(-1!=str.indexOf(":")){var tokens=str.split(/[:\s]+/g),template=this.templates[tokens[0]];try{var obj=eval(_lodash2.default.template(template)({v:tokens}));return obj.isValue?(shaddow.neededValues[path]=!0,obj):(shaddow.v[str]=obj,{type:"getVValue",path:str})}catch(t){return console.error(t,template),{}}}return str},templates:{tpl:"({type : 'useTemplate', tpl : '{#v[1]}'})",run:"({type : 'dynamicValue' , path : '{#v[1]}', isValue : true})"}},repo.parseCollection={parseModule:function(t,e){var a={};for(var n in _lodash2.default.isObjectLike(e)||(e={main:e}),e){var r=repo.parseTpl.parse(e[n]);r.KEY={moduleName:t,tplSlot:n},a[n]=r}return a},parse:function(t){var e={};for(var a in t){var n=this.parseModule(a,t[a]);e[a]=n}return e}},repo.htmltpl={append:function(t,e,a){var n=(0,_jquery2.default)("<div>");return n.html(t),(0,_jquery2.default)(e,n).html(a),n.get(0).innerHTML},css:function(t,e,a){var n=(0,_jquery2.default)("<div>");return n.html(t),(0,_jquery2.default)(e,n).css(a),n.get(0).innerHTML}}}catch(t){console.error(t)}exports.default=repo},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t&&t.__esModule}(a(8));try{var n={leftPanel:{a:"salut",scode:"test"},map:{title:"the map",sections:{s1:{title:"Section One",topics:{t1:{title:"First Topic",lines:{l1:{title:"Line 1",question:{title:"What line is this ?"}},l2:{title:"Line 2",question:{title:"What line is this ?"}},l3:{title:"Line 3",question:{title:"What line is this ?"}}}}}}}},data:{color:"#007aaa",x:"XXX",y:"aaa",items:{aa:{name:"List",slot:"aa"},b:{name:"Free",slot:"b"},c:{name:"This",slot:"c"}},tree:{x:{a:{test:"test"},b:{test2:"test2"}},y:{aa:{test3:"test3"},bb:{test4:"test4"}}}},roles:{title:{style:{border:"10px solid green",padding:"10px"}}}}}catch(t){console.error(t)}e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(a(8));n.default.templateSettings.interpolate=/\{\#([\s\S]+?)\}/g;try{var r={actions:{toggle:function(t){var e=window.repo,a=t._dispatchInstances.memoizedProps.path,r=n.default.get(e.startWallet,a),i=r&&r.isOpen;n.default.set(e.startWallet,a+".isOpen",!i),window.targetView.setState({xversio:(new Date).getTime()})}}}}catch(t){console.error(t)}e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t&&t.__esModule}(a(8));try{var n={isOpen:!0,g:"salut",data:{isOpen:!0,color:{isOpen:!0},items:{isOpen:!0,useThisTpl:"hasaa"}},map:{isOpen:!0,useThisTpl:"map"},leftPanel:{isOpen:!0,useThisTpl:"codemirror"}}}catch(t){console.error(t)}e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state={value:""},a.onChange=a.onChange.bind(a),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"onChange",value:function(t){this.setState({value:t.target.value}),this.props.onChange&&this.props.onChange(t)}},{key:"componentWillReceiveProps",value:function(t){void 0==t.value&&this.setState({value:""})}},{key:"render",value:function(){var t=Object.assign({},this.props,{value:this.state.value,onChange:this.onChange});return i.default.createElement("input",t,null)}}]),e}();e.default=o},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!e||a.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=g(a(1)),s=g(a(0)),l=g(a(9)),u=g(a(43)),c=a(26),d=a(28),p=a(24),f=g(a(45)),h=g(a(29));function g(t){return t&&t.__esModule?t:{default:t}}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var v=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.onDragStart=function(t,e){if((0,h.default)("Draggable: onDragStart: %j",e),!1===a.props.onStart(t,(0,d.createDraggableData)(a,e)))return!1;a.setState({dragging:!0,dragged:!0})},a.onDrag=function(t,e){if(!a.state.dragging)return!1;(0,h.default)("Draggable: onDrag: %j",e);var n=(0,d.createDraggableData)(a,e),i={x:n.x,y:n.y};if(a.props.bounds){var o=i.x,s=i.y;i.x+=a.state.slackX,i.y+=a.state.slackY;var l=(0,d.getBoundPosition)(a,i.x,i.y),u=r(l,2),c=u[0],p=u[1];i.x=c,i.y=p,i.slackX=a.state.slackX+(o-i.x),i.slackY=a.state.slackY+(s-i.y),n.x=i.x,n.y=i.y,n.deltaX=i.x-a.state.x,n.deltaY=i.y-a.state.y}if(!1===a.props.onDrag(t,n))return!1;i.x=n.x,i.y=n.y,a.setState(i)},a.onDragStop=function(t,e){if(!a.state.dragging)return!1;if(!1===a.props.onStop(t,(0,d.createDraggableData)(a,e)))return!1;(0,h.default)("Draggable: onDragStop: %j",e);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(a.props.position)){var r=a.props.position,i=r.x,o=r.y;n.x=i,n.y=o}a.setState(n)},a.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Component),i(e,[{key:"componentWillMount",value:function(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&l.default.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(t){!t.position||this.props.position&&t.position.x===this.props.position.x&&t.position.y===this.props.position.y||this.setState({x:t.position.x,y:t.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var t,e={},a=null,r=!Boolean(this.props.position)||this.state.dragging,i=this.props.position||this.props.defaultPosition,s={x:(0,d.canDragX)(this)&&r?this.state.x:i.x,y:(0,d.canDragY)(this)&&r?this.state.y:i.y};this.state.isElementSVG?a=(0,c.createSVGTransform)(s):e=(0,c.createCSSTransform)(s);var l=this.props,p=l.defaultClassName,h=l.defaultClassNameDragging,g=l.defaultClassNameDragged,v=this.props.children[0],y=(0,u.default)(v.props.className||"",p,(m(t={},h,this.state.dragging),m(t,g,this.state.dragged),t));return console.log("Render draggable"),o.default.createElement(f.default,n({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.default.cloneElement(v,{className:y,style:Object.assign({},v.props.style,e),transform:a}))}}]),e}();v.displayName="Draggable",v.propTypes={axis:s.default.oneOf(["both","x","y","none"]),bounds:s.default.oneOfType([s.default.shape({left:s.default.number,right:s.default.number,top:s.default.number,bottom:s.default.number}),s.default.string,s.default.oneOf([!1])]),defaultClassName:s.default.string,defaultClassNameDragging:s.default.string,defaultClassNameDragged:s.default.string,defaultPosition:s.default.shape({x:s.default.number,y:s.default.number}),position:s.default.shape({x:s.default.number,y:s.default.number}),className:p.dontSetMe,style:p.dontSetMe,transform:p.dontSetMe},v.defaultProps={axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null},e.default=v},,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPrefix=r,e.browserPrefixToKey=i,e.browserPrefixToStyle=function(t,e){return e?"-"+e.toLowerCase()+"-"+t:t};var n=["Moz","Webkit","O","ms"];function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||void 0===window.document)return"";var e=window.document.documentElement.style;if(t in e)return"";for(var a=0;a<n.length;a++)if(i(t,n[a])in e)return n[a];return""}function i(t,e){return e?""+e+function(t){for(var e="",a=!0,n=0;n<t.length;n++)a?(e+=t[n].toUpperCase(),a=!1):"-"===t[n]?a=!0:e+=t[n];return e}(t):t}e.default=r()},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!e||a.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=p(a(1)),o=p(a(0)),s=p(a(9)),l=a(26),u=a(28),c=a(24),d=p(a(29));function p(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},g=h.mouse,m=function(t){function e(){var t,a,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),c=0;c<i;c++)o[c]=arguments[c];return a=r=f(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),r.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},r.prepare=function(t){r.props.onMouseDown(t);var e=s.default.findDOMNode(r);if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var a=e.ownerDocument,n=(0,l.getTouchIdentifier)(t);r.setState({touchIdentifier:n});var i=(0,u.getControlPosition)(t,n,r);if(null!=i){var o=i.x,c=i.y,p=(0,u.createCoreData)(r,o,c);(0,d.default)("DraggableCore: handleDragStart: %j",p),(0,d.default)("calling",r.props.onStart),!1!==r.props.onStart(t,p)&&(r.props.enableUserSelectHack&&(0,l.addUserSelectStyles)(a),r.setState({dragging:!0,lastX:o,lastY:c}))}},r.handleDrag=function(t){if(console.log("handleDrag",t,r.state.dragging,r.state),!r.state.dragging&&t)return r.prepare(t);var e=(0,u.getControlPosition)(t,r.state.touchIdentifier,r);if(null!=e){var a=e.x,i=e.y;if(Array.isArray(r.props.grid)){var o=a-r.state.lastX,s=i-r.state.lastY,l=(0,u.snapToGrid)(r.props.grid,o,s),c=n(l,2);if(o=c[0],s=c[1],!o&&!s)return;a=r.state.lastX+o,i=r.state.lastY+s}var p=(0,u.createCoreData)(r,a,i);if((0,d.default)("DraggableCore: handleDrag: %j",p),!1!==r.props.onDrag(t,p))window.currentTouch.coreEvent=p,r.setState({lastX:p.x,lastY:p.y});else try{r.handleDragStop(new MouseEvent("mouseup"))}catch(t){var f=document.createEvent("MouseEvents");f.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(f)}}},r.handleDragStop=function(t){if(console.log("should stop",r.state.dragging),r.state.dragging){var e=(0,u.getControlPosition)(t,r.state.touchIdentifier,r);if(null!=e){var a=e.x,n=e.y,i=(0,u.createCoreData)(r,a,n),o=s.default.findDOMNode(r);o&&r.props.enableUserSelectHack&&(0,l.removeUserSelectStyles)(o.ownerDocument),(0,d.default)("DraggableCore: handleDragStop: %j",i),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),r.props.onStop(t,i),o&&((0,d.default)("DraggableCore: Removing handlers"),(0,l.removeEvent)(o.ownerDocument,g.move,r.handleDrag),(0,l.removeEvent)(o.ownerDocument,g.stop,r.handleDragStop))}}},r.onMouseDown=function(t){return g=h.mouse,r.handleDragStart(t)},r.onMouseUp=function(t){return g=h.mouse,r.handleDragStop(t)},r.onTouchStart=function(t){return g=h.touch,r.handleDragStart(t)},r.onTouchEnd=function(t){return g=h.touch,r.handleDragStop(t)},f(r,a)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.Component),r(e,[{key:"componentWillUnmount",value:function(){if(s.default.findDOMNode(this)){var t=window.currentTouch.node;(0,l.removeEvent)(t,h.mouse.move,this.handleDrag),(0,l.removeEvent)(t,h.touch.move,this.handleDrag),(0,l.removeEvent)(t,h.mouse.stop,this.handleDragStop),(0,l.removeEvent)(t,h.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&(0,l.removeUserSelectStyles)(t)}}},{key:"componentDidMount",value:function(){this.start()}},{key:"start",value:function(){var t=window.currentTouch.node;(0,l.addEvent)(t,h.mouse.move,this.handleDrag),(0,l.addEvent)(t,h.mouse.stop,this.handleDragStop),(0,l.addEvent)(t,h.touch.move,this.handleDrag),(0,l.addEvent)(t,h.touch.stop,this.handleDragStop),console.log("handlers attached")}},{key:"render",value:function(){return i.default.cloneElement(i.default.Children.only(this.props.children),{style:(0,l.styleHacks)(this.props.children.props.style),onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),e}();m.displayName="DraggableCore",m.propTypes={allowAnyClick:o.default.bool,disabled:o.default.bool,enableUserSelectHack:o.default.bool,offsetParent:function(t,e){if(t[e]&&1!==t[e].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:o.default.arrayOf(o.default.number),handle:o.default.string,cancel:o.default.string,onStart:o.default.func,onDrag:o.default.func,onStop:o.default.func,onMouseDown:o.default.func,className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe},m.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},e.default=m},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=a(47);a(48),a(53);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.changeValue=a.changeValue.bind(a),a.changeCursor=a.changeCursor.bind(a),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),n(e,[{key:"changeValue",value:function(t,e,a){if(this.props&&this.props.valueChanged){var n=t.getCursor();void 0!=e.origin?this.props.valueChanged({scode:a,cursor:{line:n.line,ch:n.ch}}):this.props.valueChanged({scode:a})}}},{key:"changeCursor",value:function(t,e){void 0!=e.sticky&&this.props&&this.props.valueChanged&&this.props.valueChanged({cursor:{line:e.line,ch:e.ch}})}},{key:"render",value:function(){return i.default.createElement(o.UnControlled,{value:this.props.data.scode,options:{mode:"javascript",lineNumbers:!0},autoCursor:!1,cursor:this.props.data.cursor,onChange:this.changeValue,onCursor:this.changeCursor})}}]),e}();e.default=s},,,,,,,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={wallet:{},timers:{},startLoop:function(t,e,a){this.timers[t]&&this.stop(this.timers[t]),this.timers[t]=this.start(e,a)},stopLoop:function(t){this.timers[t]&&this.stop(this.timers[t]),delete this.timers[t]},start:function(t,e){var a=this,n=window.setInterval(function(){"stop"==t()&&a.stop(n)},e);return n},stop:function(t){window.clearInterval(t)}};e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={wallet:{},timers:{},startTouchWatch:function(t,e){var a=$(t.touches[0].target),n={onMove:function(t){var a=t.touches[0];o.clientX=a.clientX,o.clientY=a.clientY,o.targetX=o.clientX-o.dx,o.targetY=o.clientY-o.dy,e.run(o)},onStop:function(){$(a).off("touchmove",n.onMove).off("touchstop"),e.end()}},r=a.offset(),i=t.touches[0],o={domTarget:t.touches[0].target,clientX:i.clientX,clientY:i.clientY,targetX:r.left,targetY:r.top,initial:{clientX:i.clientX,clientY:i.clientY,targetX:r.left,targetY:r.top,targetWidth:a.width(),targetHeight:a.height()},dx:0,dy:0};o.dx=o.clientX-o.targetX,o.dy=o.clientY-o.targetY,$(a).on("touchend",n.onStop),$(a).on("touchmove",n.onMove)},startMouseWatch:function(t,e){var a={onMove:function(t){i.clientX=t.clientX,i.clientY=t.clientY,i.targetX=i.clientX-i.dx,i.targetY=i.clientY-i.dy,e.run(i)},onStop:function(){$("body").off("mousemove",a.onMove).off("mouseup"),e.end()}},n=$(t.target),r=n.offset(),i={clientX:t.clientX,clientY:t.clientY,targetX:r.left,targetY:r.top,initial:{clientX:t.clientX,clientY:t.clientY,targetX:r.left,targetY:r.top,targetWidth:n.width(),targetHeight:n.height()},dx:0,dy:0};i.dx=i.clientX-i.targetX,i.dy=i.clientY-i.targetY,$("body").on("mouseup",a.onStop),$("body").on("mousemove",a.onMove)}};e.default=n},function(t,e,a){"use strict";a(57),a(58),a(59)},function(t,e,a){"use strict";a(23),DataManager.setCombined("prisms.simpleDataFetch",{get:function(t,e,a,n){var r={};if(DataManager.fetchValues(r,n.args,t,e,a),n.outputMap){var i={};for(var o in n.outputMap)i[o]=_.get(r,n.outputMap[o]);return i}return r}}),DataManager.setCombined("prisms.pathLoader",{get:function(t,e,a,n){var r={};return DataManager.fetchValues(r,{path:"$."+n.path},t,e,a),DataManager.fetchValues(r,{value:"$."+r.path},t,e,a),r.value}}),DataManager.setCombined("prisms.moldMaker",{get:function(t,e,a,n,r){var i={};try{i.path=r.srcPath.slice(0,-1).join("."),i.args=Object.assign({},n.args,{tpls:"$."+i.path+".tpls",tplpp:"$."+i.path+".tplpp",parser:"$.oldrepo.parseCollection",alter:"$.oldrepo.tplAlter"}),DataManager.fetchValues(i,i.args,t,e,a),i.tplpp,i.molds=i.parser.parse(i.tpls)}catch(t){console.error(t)}return i.molds}}),DataManager.setCombined("prisms.builder",{get:function(t,e,a,n,r){var i={tb:{}};try{DataManager.fetchValues(i.tb,{builder:"$."+n.source},null,e,null),i.block=i.tb.builder.run({},e)}catch(t){console.error(t)}return e.setCombined(n.destination,i.block),{done:!0}}})},function(t,e,a){"use strict";a(23),DataManager.setCombined("fn.makeAList",{run:function(t,e){_.isString(t)&&(t={main:t});return t.items={dataPath:"sub",item:"{tpl:item}",wrapper:"<div class='content' role='content'>{#items} </div>",empty_content:""},t}}),DataManager.setCombined("fn.makeAStyle",{run:function(t,e){return{main:"<style>{@getStyles}</style>",getStyles:function(t){return t.TPLS.styles.join("\n")},styles:t}}}),DataManager.setCombined("fn.insertValues",{}),DataManager.setCombined("fn.cleanTpl",{run:function(t){var e={};return e.value=this.assemble(t.target),e.value},assemble:function(t){if(!_.isObjectLike(t))return t;var e={};for(var a in t){var n=a;"REP_loader"==a&&(n="loader"),e[n]=this.assemble(t[a])}return e}})},function(t,e,a){"use strict";a(23),DataManager.setCombined("modules.simpleUI",{data:{},startTemplate:"main",wallet:{},startPayload:{},tpls:{main:"<div>Salutare Builderas</div>"},molds:{REP_loader:{prism:"prisms.moldMaker"}}})}])]);